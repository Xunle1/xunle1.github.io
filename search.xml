<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Go å…·åè¿”å›å€¼</title>
      <link href="/2024/09/02/Go%E5%85%B7%E5%90%8D%E8%BF%94%E5%9B%9E%E5%80%BC/"/>
      <url>/2024/09/02/Go%E5%85%B7%E5%90%8D%E8%BF%94%E5%9B%9E%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<p>Go è¯­è¨€å¯ä»¥å¯¹æ–¹æ³•çš„è¿”å›å€¼å‘½åï¼Œè¿”å›å€¼ä¼šè¢«è‡ªåŠ¨è¢«åˆå§‹åŒ–ä¸ºé›¶å€¼è€Œä¸éœ€è¦ä½ çš„å¤„ç†ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨â€œè£¸â€è¿”å›è¯­å¥ã€‚ä»¥ä¸‹æ˜¯ <a href="https://go.dev/tour/basics/7">A Tour of Go</a> ä¸­çš„ä¾‹å­ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">split</span><span class="params">(sum <span class="type">int</span>)</span></span> (x, y <span class="type">int</span>) &#123;</span><br><span class="line">x = sum * <span class="number">3</span> / <span class="number">9</span></span><br><span class="line">y = sum - x</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(split(<span class="number">10</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨"><a href="#ä»€ä¹ˆæ—¶å€™ä½¿ç”¨" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨"></a>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨</h2><p><a href="https://go.dev/doc/effective_go#named-results">Effective Go</a> ä¸­ä¸»è¦è¯´æ˜äº†<strong>å…·åè¿”å›å€¼</strong>å¯ä»¥æé«˜æ–¹æ³•çš„å¯è¯»æ€§ã€‚ç‰¹åˆ«æ˜¯åœ¨è¿”å›å€¼ç±»å‹ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ä¸€ä¸ªè¿”å›ç»çº¬åº¦çš„æ–¹æ³•ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">location</span><span class="params">(name City)</span></span> (lat, long <span class="type">float64</span>)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä»è¿”å›å€¼åˆ—è¡¨ä¸­çŸ¥é“ç»åº¦å’Œçº¬åº¦åˆ†åˆ«å¯¹åº”ç¬¬å‡ ä¸ªå‚æ•°ã€‚</p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li><p><a href="https://go.dev/tour/basics/7">A Tour of Go</a> ä¸­ä¹Ÿæåˆ°ï¼Œåº”è¯¥åœ¨<strong>çŸ­æ–¹æ³•</strong>ä¸­ä½¿ç”¨â€œè£¸è¿”å›â€ï¼Œå¦åˆ™ä¼šé™ä½ä»£ç çš„å¯è¯»æ€§ã€‚</p></li><li><p>å…·åè¿”å›å€¼ä¹Ÿä¼šå› ä¸ºæˆ‘ä»¬å¤„ç†ä¸å½“è€Œé€ æˆé”™è¯¯ã€‚æ¯”å¦‚ï¼š</p></li></ol><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">todoWithTimeout</span><span class="params">(c *context.Context)</span></span> (err <span class="type">error</span>) &#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> c.Err() != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// do something and return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ£€æŸ¥äº†ä¸Šä¸‹æ–‡æ˜¯å¦è¶…æ—¶åï¼Œç›´æ¥è¿”å›äº†ï¼Œå¯¼è‡´<code>err</code>è¿˜æ˜¯<code>nil</code>ï¼Œé€ æˆäº†é”™è¯¯ã€‚</p><p>æ­£ç¡®åšæ³•åº”è¯¥æ˜¯ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">todoWithTimeout</span><span class="params">(c *context.Context)</span></span> (err <span class="type">error</span>) &#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> err = c.Err(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// do something and return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go æŒ‡é’ˆæ¥æ”¶è€…</title>
      <link href="/2024/09/02/Go%E6%8C%87%E9%92%88%E6%8E%A5%E6%94%B6%E8%80%85/"/>
      <url>/2024/09/02/Go%E6%8C%87%E9%92%88%E6%8E%A5%E6%94%B6%E8%80%85/</url>
      
        <content type="html"><![CDATA[<p>Go è¯­è¨€ä¸­å¯ä»¥å¯¹æ–¹æ³•å£°æ˜<strong>æ¥æ”¶è€…</strong>ï¼Œæ¥æ”¶è€…ç±»å‹å¯ä»¥æ˜¯ç»“æ„ä½“ä¹Ÿå¯ä»¥æ˜¯æ¥å£ã€‚è¿™æ„å‘³ç€è¢«å£°æ˜çš„æ–¹æ³•åªèƒ½è¢«è¯¥ç»“æ„ä½“æˆ–è€…æ˜¯æ¥å£çš„å®ä¾‹è°ƒç”¨ã€‚</p><p>è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t Type)</span></span> methodMame(params) returns &#123;</span><br><span class="line">    <span class="comment">// method body</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç‰¹åˆ«åœ°ï¼Œåœ¨æ­¤å¤„å¯ä»¥å£°æ˜æŒ‡é’ˆæ¥æ”¶è€…ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *Type)</span></span> methodMame(params) returns &#123;</span><br><span class="line">    <span class="comment">// method body</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <a href="https://go.dev/tour/methods/4">A tour of Go</a> ä¸­ä»‹ç»åˆ°</p><blockquote><p>You can declare methods with pointer receivers.<br>&#x2F;&#x2F; ä½ å¯ä»¥ä¸ºæ–¹æ³•ç»‘å®šä¸€ä¸ªæŒ‡é’ˆæ¥æ”¶è€…</p><p>This means the receiver type has the literal syntax *T for some type T. (Also, T cannot itself be a pointer such as *int.)<br>&#x2F;&#x2F; è¿™æ„å‘³ç€æ¥æ”¶è€…ç±»å‹æ˜¯ T çš„æŒ‡é’ˆï¼Œå…¶ä¸­ T ä¸èƒ½æ˜¯åƒ *int è¿™æ ·çš„æŒ‡é’ˆç±»å‹ã€‚</p></blockquote><p>ä»–çš„ä½œç”¨ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯å¯ä»¥ä¿®æ”¹æ¥æ”¶è€…æŒ‡å‘çš„å€¼ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…ï¼Œé‚£ä¹ˆä¿®æ”¹çš„åªæ˜¯æ¥æ”¶è€…çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå¹¶ä¸å½±å“åŸæ¥çš„å€¼ã€‚</p><p>ä»å­—é¢è¯­ä¹‰ä¸Šä¹Ÿå¾ˆç›´è§‚ï¼Œæˆ‘ä»¬é€šå¸¸ç†è§£çš„æŒ‡é’ˆå°±æ˜¯æŒ‡å‘å˜é‡çš„åœ°å€ï¼Œå¯¹æŒ‡é’ˆçš„æ“ä½œä¼šå½±å“åŸæ¥çš„å˜é‡å€¼ã€‚</p><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>ä¸¾ä¾‹æ¥è¯´ï¼Œå£°æ˜ä¸€ä¸ªç»“æ„ä½“<code>Vertex</code>ï¼Œä¸º<code>Vertex</code>ç»‘å®šæ–¹æ³•<code>Abs</code>ã€<code>Scale</code>å’Œ<code>Shrink</code>ï¼Œå…¶ä¸­<code>Abs</code>ã€<code>Shrink</code>æ–¹æ³•ä½¿ç”¨å€¼æ¥æ”¶è€…ï¼Œ<code>Scale</code>æ–¹æ³•ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">        <span class="string">&quot;fmt&quot;</span></span><br><span class="line">        <span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Vertex <span class="keyword">struct</span> &#123;</span><br><span class="line">        X, Y <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v Vertex)</span></span> Abs() <span class="type">float64</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> math.Sqrt(v.X*v.X + v.Y*v.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v *Vertex)</span></span> Scale(f <span class="type">float64</span>) &#123;</span><br><span class="line">        v.X = v.X * f</span><br><span class="line">        v.Y = v.Y * f</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v Vertex)</span></span> Shrink(f <span class="type">float64</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> f == <span class="number">0</span> &#123;</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        v.X = v.X / <span class="number">10</span></span><br><span class="line">        v.Y = v.Y / <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        v := Vertex&#123;<span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">        fmt.Println(v.Abs())</span><br><span class="line">        v.Scale(<span class="number">10</span>)</span><br><span class="line">        fmt.Println(v.Abs())</span><br><span class="line">        v.Shrink(<span class="number">10</span>)</span><br><span class="line">        fmt.Println(v.Abs())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºçš„ç»“æœä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">50</span><br><span class="line">50</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>Abs</code>å’Œ<code>Shrink</code>æ–¹æ³•ä½¿ç”¨å€¼æ¥æ”¶è€…ï¼Œæ‰€ä»¥<code>Abs</code>å’Œ<code>Shrink</code>æ–¹æ³•å†…éƒ¨å¯¹<code>v</code>çš„ä¿®æ”¹ä¸ä¼šå½±å“åŸæ¥çš„<code>v</code>ã€‚</p><p>è€Œ<code>Scale</code>æ–¹æ³•ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…ï¼Œæ‰€ä»¥<code>Scale</code>æ–¹æ³•å†…éƒ¨å¯¹<code>v</code>çš„ä¿®æ”¹ä¼šå½±å“åŸæ¥çš„<code>v</code>ã€‚</p><p>å¦‚æœå°†<code>Shrink</code>æ–¹æ³•çš„æ¥æ”¶è€…ç±»å‹æ”¹ä¸ºæŒ‡é’ˆæ¥æ”¶è€…ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v *Vertex)</span></span> Shrink(f <span class="type">float64</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> f == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        v.X = v.X / <span class="number">10</span></span><br><span class="line">        v.Y = v.Y / <span class="number">10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">50</span><br><span class="line">5</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go ä¸­çš„åˆå§‹åŒ–</title>
      <link href="/2024/08/07/Go%E4%B8%AD%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/"/>
      <url>/2024/08/07/Go%E4%B8%AD%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>Go è¯­è¨€ä¼šåœ¨å£°æ˜å˜é‡ç±»å‹çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šå€¼ï¼Œé‚£å°†ä¼šä½¿ç”¨é›¶å€¼ã€‚å„ç§ç±»å‹çš„é›¶å€¼ï¼š</p><ul><li>int: 0</li><li>float: 0.0</li><li>bool: false</li><li>string: â€œâ€</li><li>åˆ‡ç‰‡: []</li><li>æŒ‡é’ˆã€å‡½æ•°ã€æ¥å£: nil</li><li>ç»“æ„ä½“: ç”±å±æ€§çš„é›¶å€¼ç»„æˆ</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGo è¯­è¨€ä¸­å£°æ˜ï¼ˆdeclarationï¼‰å’Œå®šä¹‰ï¼ˆdefinitionï¼‰éƒ½ä¼šä¸ºå˜é‡åˆ†é…ç©ºé—´ã€‚æ„æ€æ˜¯ä¸åœ¨éœ€è¦åƒ Java é‚£æ ·å¿…é¡»è°ƒç”¨ new æ¥æ„é€ å¯¹è±¡ã€‚</p><p>ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> StructA <span class="keyword">struct</span> &#123;</span><br><span class="line">        A <span class="type">int</span></span><br><span class="line">        B *<span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Inter <span class="keyword">interface</span> &#123;</span><br><span class="line">        Hello(<span class="type">string</span>) <span class="type">error</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> StructB <span class="keyword">struct</span> &#123;</span><br><span class="line">        Int       <span class="type">int</span></span><br><span class="line">        String    <span class="type">string</span></span><br><span class="line">        Struct    StructA</span><br><span class="line">        Point     *StructA</span><br><span class="line">        Array     []<span class="type">int</span></span><br><span class="line">        Fun       <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span></span> <span class="type">int</span></span><br><span class="line">        Interface Inter</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">var</span> declaration StructB</span><br><span class="line">        fmt.Printf(<span class="string">&quot;Declaration StructB: \n%+v\n&quot;</span>, declaration)</span><br><span class="line">        <span class="keyword">var</span> definition = StructB&#123;Int: <span class="number">3</span>, String: <span class="string">&quot;foo&quot;</span>&#125;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;Definition StructB: \n%+v\n&quot;</span>, definition)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Declaration StructB:</span><br><span class="line">&#123;Int:0 String: Struct:&#123;A:0 B:&lt;nil&gt;&#125; Point:&lt;nil&gt; Array:[] Fun:&lt;nil&gt; Interface:&lt;nil&gt;&#125;</span><br><span class="line">Definition StructB:</span><br><span class="line">&#123;Int:3 String:foo Struct:&#123;A:0 B:&lt;nil&gt;&#125; Point:&lt;nil&gt; Array:[] Fun:&lt;nil&gt; Interface:&lt;nil&gt;&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°å£°æ˜çš„å˜é‡ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”å±æ€§éƒ½è¢«èµ‹äºˆäº†é›¶å€¼ã€‚</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://go.dev/doc/effective_go#data">Effective Go</a></p>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‚è°ˆâ€”â€”æ¯•ä¸šä¸€å¹´</title>
      <link href="/2024/08/05/%E6%9D%82%E8%B0%88%E2%80%94%E2%80%94%E6%AF%95%E4%B8%9A%E4%B8%80%E5%B9%B4/"/>
      <url>/2024/08/05/%E6%9D%82%E8%B0%88%E2%80%94%E2%80%94%E6%AF%95%E4%B8%9A%E4%B8%80%E5%B9%B4/</url>
      
        <content type="html"><![CDATA[<p>ä» CQUPT æ¯•ä¸šä¸€å¹´æ—¶é—´ï¼Œèº«ä»½ä»å­¦ç”Ÿè½¬æ¢åˆ°æ‰“å·¥äººä¹Ÿå·²ç»ä¸€å¹´æ—¶é—´ã€‚ä¸€å¹´ä»¥æ¥å…³äºç”Ÿæ´»å…³äºå·¥ä½œå¯èƒ½åœ¨ç”Ÿæ´»ä¸Šæœ‰è®¸å¤šæƒ³æ³•ï¼Œä½†éƒ½åªæ˜¯åœ¨è„‘æµ·ä¸­ç»•äº†ä¸€åœˆï¼Œæœ‰çš„æ¶ˆå¤±äº†ï¼Œæœ‰çš„è¿˜ç•™ç€ã€‚æ‰€ä»¥æƒ³ç”¨æ–‡å­—è®°å½•ä¸‹å½“ä¸‹çš„æƒ³æ³•ã€‚</p><h1 id="ç¦»èŒ"><a href="#ç¦»èŒ" class="headerlink" title="ç¦»èŒ"></a>ç¦»èŒ</h1><p>ç¬¬ä¸€ä»½æ­£å¼å·¥ä½œåœ¨ A å…¬å¸ï¼Œå²—ä½æ˜¯åå°å¼€å‘ã€‚æˆ‘æ˜¯ä» 22 å¹´ 10 æœˆçš„æ—¶å€™å¼€å§‹å®ä¹ ï¼Œæ¯•ä¸šè½¬æ­£ï¼Œç›´åˆ° 24 å¹´ 6 æœˆæ­£å¼ç¦»èŒï¼Œç®—ä¸‹æ¥å¾…äº† 3 + 11 + 5 &#x3D; 19 ä¸ªæœˆæ—¶é—´ã€‚</p><p>åœ¨ A å…¬å¸å­¦åˆ°äº†å¾ˆå¤šï¼Œè™½ç„¶è¿› A å…¬å¸ä¹‹å‰åªä¼š Spring Boot é‚£ä¸€å¥—ï¼Œä½†æ˜¯ç¬¬ä¸€é¡¹ç›®éœ€è¦å¼€å‘ä¸€ä¸ªç›‘æ§çš„ agentï¼Œå­¦ä¹ äº† Go è¯­è¨€ï¼Œå¯¹æ“ä½œç³»ç»Ÿç½‘ç»œã€è¿›ç¨‹ã€Shell è„šæœ¬ä¹Ÿæœ‰äº†è¿›ä¸€æ­¥äº†è§£ã€‚</p><p>ç¬¬äºŒä¸ªé¡¹ç›®å‚ä¸äº†å¤šç«¯ï¼Œç®¡ç†ç«¯ç”¨å›äº† Spring Bootï¼Œä¸ºäº†æ–¹ä¾¿å¼€å‘è¿˜ç†Ÿæ‚‰äº† Docker è¿è¡Œå„ç§ä¸­é—´ä»¶ï¼Œci &#x2F; cd æµç¨‹ã€‚C ç«¯ä¸ºäº†å¼€å‘å®¢æˆ·ç«¯åå°ç¨‹åºå­¦ä¹ äº† C++ã€Cmakeï¼Œå› ä¸ºè¦è·¨å¹³å°è¿è¡Œï¼Œä¹Ÿè¿›ä¸€æ­¥äº†è§£äº† linux ä¸­ç¨‹åºçš„è¿è¡Œã€‚</p><h2 id="ä¸ºä»€ä¹ˆï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆï¼Ÿ"></a>ä¸ºä»€ä¹ˆï¼Ÿ</h2><p>ç¬¬ä¸€ï¼Œåœ¨ A å…¬å¸åšçš„æ˜¯ toB äº§å“ï¼Œæ— æ‰€è°“ä»£ç è´¨é‡ï¼Œåªè¦èƒ½è·‘ï¼Œèƒ½æ»¡è¶³å®¢æˆ·éœ€æ±‚ï¼Œèƒ½äº¤ä»˜ï¼Œé‚£å°±è¶³å¤Ÿäº†ã€‚é™¤éæ˜¯è¯·æ±‚ä¸€ä¸ªæ¥å£åå‡ ç§’å¯¼è‡´å®¢æˆ·ç«¯å¡ä½äº†ï¼Œæˆ–è€…ä¸‹è½½å¤±è´¥äº†ï¼Œæ²¡äººä¼šå…³å¿ƒä»£ç å†™çš„æ€ä¹ˆæ ·ï¼Œä¹Ÿæ²¡äººä¼šå…³å¿ƒèµ„æºå ç”¨æ˜¯ä¸æ˜¯å¤ªå¤šï¼Œå½“ç„¶ä¹Ÿå¯èƒ½æ˜¯é¡¹ç›®ä½“é‡æœ¬èº«å°±å°ï¼Œè¿˜æ²¡æœ‰åˆ°éœ€è¦ä¼˜åŒ–çš„åœ°æ­¥ã€‚æ€»ä¹‹ï¼Œå¥½åƒåœ¨ä¸šåŠ¡æ–¹é¢æˆ‘å­¦ä¸åˆ°æ›´å¤šä¸œè¥¿äº†ã€‚</p><p>ç¬¬äºŒï¼Œæˆ‘å¥½åƒå¹¶ä¸æ¸…æ¥šåº”è¯¥æ€ä¹ˆè¯„ä»·æˆ‘è‡ªå·±ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œæˆ‘çš„å²—ä½æ˜¯åå°å¼€å‘å·¥ç¨‹å¸ˆï¼Œæˆ‘å‚ä¸äº† xx é¡¹ç›®çš„å¼€å‘ï¼Œåº”è¯¥æ€ä¹ˆè¯„ä»·æˆ‘çš„å·¥ä½œå‘¢ï¼Ÿé¡¹ç›®æœ‰æ˜ç¡®çš„å·¥æœŸå®‰æ’ï¼Œæ ¹æ®åˆåŒæˆ–è€…é¡¹ç›®ç»ç†å’Œå®¢æˆ·è®¨è®ºå‡ºæ¥çš„å·¥æœŸï¼Œåº”è¯¥ä»æˆ‘æœ‰æ²¡æœ‰æŒ‰æ—¶å®Œæˆä»»åŠ¡æ¥è¯„ä»·å—ï¼Ÿå¦‚æœ xx æ—¶é—´å‰å®Œæˆäº† xx ä»»åŠ¡ï¼Œæˆ‘å°±åŠ ä¸€åˆ†ï¼Ÿæˆ–è€…æ˜¯ä¸æ˜¯åº”è¯¥ä»æˆ‘æœ‰æ²¡æœ‰é€ æˆçº¿ä¸Šäº‹æ•…ï¼Œè§£å†³äº‹æ•…çš„é€Ÿåº¦æ¥åˆ¤æ–­ï¼Ÿæˆ‘æ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆï¼Œæˆ‘åªçŸ¥é“å°½é‡åœ¨å·¥æœŸå‰å®Œæˆä»»åŠ¡ï¼Œå®Œä¸æˆå°±æä¸€ä¸‹å»¶åï¼Œæˆ–è€…åŠ ä¸€ä¼šå„¿ç­ç»§ç»­å®Œæˆå°±è¡Œã€‚æ²¡æœ‰äººä¼šå¯¹æˆ‘è¿›è¡Œè¯„ä»·ï¼Œæ¯ä¸ªæœˆçš„å·¥èµ„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»å¦ä¸€ä¸ªè§’åº¦æ¥è¯´å¥½åƒä¹ŸæŒºå¥½çš„ã€‚</p><p>ç¬¬ä¸‰ï¼Œä¹Ÿæ˜¯è¢«ä¸‹ä¸€å®¶å…¬å¸è€æ¿è¯„ä»·è¯´è‡ªæˆ‘çŸ›ç›¾çš„ç‚¹ï¼Œæˆ‘å¥½åƒåˆæƒ³èµ°æŠ€æœ¯ä¸Šå‡é€šé“ï¼Œç²¾è¿›è‡ªå·±çš„ä¸“ä¸šï¼Œåˆé‡éš¾åˆ™é€€ï¼ŒæŠ±æ€¨å¤–éƒ¨æ¡ä»¶ã€‚åœ¨ A å…¬å¸çš„é¡¹ç›®éœ€è¦äº†è§£ Chromium æºç ã€‚æˆ‘çš„è¯´è¾æ˜¯å®ƒå¤ªéš¾äº†ï¼ŒA å…¬å¸åˆæ²¡æœ‰äººæ•™ï¼Œæˆ‘æ°´å¹³åˆæœ‰é™ï¼Œåšçš„éƒ½æ˜¯éšä¾¿è°æ¥éƒ½å¯ä»¥åšçš„å·¥ä½œï¼Œç®€å•æè¿°å°±æ˜¯ï¼šéœ€è¦æ”¹ä¸€ä¸‹æŸä¸ªæŒ‰é’®çš„è¡Œä¸ºï¼Œé‚£å°±åœ¨å¯èƒ½è§¦å‘è¿™ä¸ªæŒ‰é’®çš„åœ°æ–¹é™„è¿‘æ‰“ä¸ªæ–­ç‚¹ï¼Œç„¶å debug æ‰¾åˆ°å…·ä½“ä½ç½®ï¼Œä¿®æ”¹ä¸€ä¸‹é€»è¾‘å°±å¥½ã€‚è¦è¯´ä»€ä¹ˆéƒ½æ²¡å­¦åˆ°ä¹Ÿä¸å¯¹ï¼Œæˆ‘ç¡®å®äº†è§£äº†æµè§ˆå™¨çš„ä¸€ç‚¹ç‚¹çŸ¥è¯†ï¼Œä½†æˆ‘åˆä¸èƒ½æ²‰ä¸‹å¿ƒæ¥é’»ç ”å®ƒï¼Œåº”è¯¥è¢«ç§°ä¹‹ä¸ºæµ®èºï¼Œæˆ–è€…â€œæŒ«â€ã€‚</p><p>åœ¨ A å…¬å¸æœ€åçš„é˜¶æ®µï¼Œæˆ‘å¿ƒç†çŠ¶æ€ååˆ†ä¸å¥½ï¼Œå˜å¾—æ˜“æ€’ï¼Œç„¦è™‘ï¼Œå½“ç„¶æ˜¯åœ¨å·¥ä½œå¤–çš„æ—¶é—´ï¼Œä¹Ÿéå¸¸æ„Ÿè°¢å¥³æœ‹å‹çš„åŒ…å®¹è°…è§£ã€‚é‚£æ—¶æˆ‘è§‰å¾—ä¸Šç­å°±æ˜¯åç‰¢ï¼Œæˆ‘ä¹Ÿä¸æƒ³å†™ä»£ç ã€‚æˆ‘è§‰å¾—è‡ªå·±æ²¡æœ‰ä»·å€¼ï¼Œæ˜¯ä¸ª loserï¼Œé‡è§å›°éš¾å°±é€ƒé¿ï¼Œåªæ„¿æ„å‘†åœ¨è‡ªå·±çš„èˆ’é€‚åœˆï¼Œå´è¿˜å¦„æƒ³è‡ªå·±å¦‚æœåšäº† xx äº‹ï¼Œå¯èƒ½å°±ä¼šæ€ä¹ˆæ ·ã€‚å½“æ—¶ä¸ªäººå’Œå®¶åº­ç»æµæƒ…å†µå¹¶ä¸å¥½ï¼Œæ˜¯è´Ÿå€ºçš„æ°´å¹³ã€‚æˆ‘æ„Ÿè§‰å¥½åƒæ˜¯å—å¤Ÿäº†ï¼Ÿåˆæˆ–è€…æ˜¯æˆ‘ä¸æƒ³å†ç»­é‚£åŠå¹´æœŸçš„æˆ¿ç§Ÿï¼ˆğŸ˜‚ï¼‰ï¼Ÿæœ€ç»ˆæˆ‘è¿˜æ˜¯è£¸è¾äº†ï¼Œæå‰ä¸€ä¸ªæœˆæ‰“å¥½æ‹›å‘¼ï¼Œå’Œå‰è¾ˆè€å¸ˆè°ˆäº†è°ˆï¼Œå…­æœˆåˆç¦»å¼€äº† A å…¬å¸ã€‚</p><h1 id="è¿‡æ¸¡"><a href="#è¿‡æ¸¡" class="headerlink" title="è¿‡æ¸¡"></a>è¿‡æ¸¡</h1><p>&#x2F;&#x2F; TODO</p><h1 id="æ–°å·¥ä½œ"><a href="#æ–°å·¥ä½œ" class="headerlink" title="æ–°å·¥ä½œ"></a>æ–°å·¥ä½œ</h1><p>&#x2F;&#x2F; TODO</p>]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‚è°ˆ </tag>
            
            <tag> ç”Ÿæ´» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashMap æºç é˜…è¯»</title>
      <link href="/2024/07/10/HashMap%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/"/>
      <url>/2024/07/10/HashMap%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸ºé˜…è¯» HashMap æºç çš„ç¬”è®°ï¼Œä¸»è¦äº†è§£ HashMap å¢åˆ æ”¹æŸ¥çš„è¿‡ç¨‹ã€‚</p><p>æ–‡ä¸­ä»£ç å’Œæè¿°åŸºäº openjdk 17ï¼ŒHashMap åº•å±‚æ•°æ®ç»“æ„é‡‡ç”¨ <code>Node</code> æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openjdk 17.0.11 2024-04-16 LTS</span><br><span class="line">OpenJDK Runtime Environment Corretto-17.0.11.9.1 (build 17.0.11+9-LTS)</span><br><span class="line">OpenJDK 64-Bit Server VM Corretto-17.0.11.9.1 (build 17.0.11+9-LTS, mixed mode, sharing)</span><br></pre></td></tr></table></figure><h1 id="æ’å…¥å…ƒç´ "><a href="#æ’å…¥å…ƒç´ " class="headerlink" title="æ’å…¥å…ƒç´ "></a>æ’å…¥å…ƒç´ </h1><p>è°ƒç”¨ <code>put</code> æ–¹æ³•æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹ï¼Œæµç¨‹ä¸ºï¼š</p><ol><li>è°ƒç”¨ <code>putVal</code> æ–¹æ³•</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>å¦‚æœä¸ºç©ºè¡¨ï¼Œåˆ™è¿›è¡Œåˆå§‹åŒ–</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Implements Map.put and related methods. * * <span class="doctag">@param</span> hash hash for key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key the key</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value the value to put</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> onlyIfAbsent if true, don&#x27;t change existing value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> evict if false, the table is in creation mode.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> previous value, or null if none</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">               <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="type">int</span> n, i;</span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">    <span class="comment">// å¦‚æœå½“å‰è¡¨ä¸ºç©ºè¡¨ï¼Œåˆå§‹åŒ–è¡¨ã€‚</span></span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>å¦‚æœå½“å‰çš„å“ˆå¸Œæ¡¶ï¼ˆæ¡¶æ•°ç»„ï¼‰ä¸ºç©ºï¼Œç›´æ¥æ’å…¥</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">               <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// å½“å‰æ¡¶æ•°ç»„ä¸ºç©ºã€‚</span></span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>)</span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>å¦‚æœå½“å‰çš„å“ˆå¸Œæ¡¶æœ‰å€¼ï¼Œå³äº§ç”Ÿå“ˆå¸Œå†²çªï¼Œé¦–å…ˆåˆ¤æ–­é“¾è¡¨å¤´ï¼Œå³å“ˆå¸Œæ¡¶ç¬¬ä¸€ä¸ª <code>Node</code> é”®å€¼å¯¹å’Œå°†è¦æ’å…¥çš„é”®å€¼å¯¹æ˜¯å¦ç›¸åŒï¼Œç›¸åŒåˆ™è¦†ç›–ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">               <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">...</span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>)</span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// å½“å‰æ¡¶æ•°ç»„ä¸ä¸ºç©ºã€‚</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        <span class="comment">// é‡å¤çš„é”®å€¼å¯¹</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¦†ç›–é”®å€¼å¯¹çš„å€¼</span></span><br><span class="line">    <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">        <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;</span><br><span class="line">        <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="literal">null</span>)</span><br><span class="line">            e.value = value;</span><br><span class="line">        afterNodeAccess(e);</span><br><span class="line">        <span class="keyword">return</span> oldValue;</span><br><span class="line">    &#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>å¦‚æœå“ˆå¸Œæ¡¶ç¬¬ä¸€ä¸ªé”®å€¼å¯¹ä¸é‡å¤ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ ‘å½¢èŠ‚ç‚¹ï¼Œå¦‚æœä¸ºæ ‘å½¢èŠ‚ç‚¹ï¼Œè°ƒç”¨ <code>putTreeval</code></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">               <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">...</span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>)</span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯æ ‘å½¢èŠ‚ç‚¹åˆ™è°ƒç”¨æ ‘èŠ‚ç‚¹æ’å…¥æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="built_in">this</span>, tab, hash, key, value);</span><br><span class="line">...</span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">            <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;</span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="literal">null</span>)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="6"><li>å¦‚æœä¸æ˜¯æ ‘å½¢èŠ‚ç‚¹ï¼Œåˆ™éå†å“ˆå¸Œæ¡¶ï¼Œå³éå†é“¾è¡¨ï¼Œåœ¨é“¾è¡¨å°¾éƒ¨æ’å…¥ï¼Œå¦‚æœé“¾è¡¨é•¿åº¦å¤§äºæ ‘åŒ–çš„é˜ˆå€¼ï¼Œåˆ™å°†å½“å‰å“ˆå¸Œæ¡¶çš„èŠ‚ç‚¹æ ‘åŒ–ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">               <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">...</span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>)</span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">...</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// éå†é“¾è¡¨èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">binCount</span> <span class="operator">=</span> <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">            <span class="comment">// åœ¨å°¾éƒ¨æ’å…¥æ–°é”®å€¼å¯¹</span></span><br><span class="line">                <span class="keyword">if</span> ((e = p.next) == <span class="literal">null</span>) &#123;</span><br><span class="line">                    p.next = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">                    <span class="comment">// é“¾è¡¨èŠ‚ç‚¹è¶…è¿‡é˜ˆå€¼ï¼Œè¿›è¡Œæ ‘åŒ–</span></span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å­˜åœ¨é‡å¤èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                p = e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">...</span><br><span class="line">    &#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="7"><li>å¦‚æœè¡¨ä¸­å…ƒç´ æ•°é‡å¤§äºé˜ˆå€¼ï¼Œåˆ™è¿›è¡Œæ‰©å®¹ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">               <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">...</span><br><span class="line">    ++modCount;</span><br><span class="line">    <span class="comment">// å…ƒç´ æ•°é‡å¤§äºé˜ˆå€¼è¿›è¡Œæ‰©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HashMap </tag>
            
            <tag> æºç  </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chromium å®šåˆ¶å¼€å‘</title>
      <link href="/2024/04/01/Chromium-%E5%AE%9A%E5%88%B6%E5%BC%80%E5%8F%91/"/>
      <url>/2024/04/01/Chromium-%E5%AE%9A%E5%88%B6%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ç”¨äºè®°å½•åœ¨å·¥ä½œä¸­å¯¹ Chromium çš„å®šåˆ¶åŒ–å¼€å‘ã€‚åŸºäº 84 ç‰ˆæœ¬ Chromium æµè§ˆå™¨ã€‚</p><h1 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h1><h2 id="å›¾æ ‡å’Œæµè§ˆå™¨å®‰è£…åç§°"><a href="#å›¾æ ‡å’Œæµè§ˆå™¨å®‰è£…åç§°" class="headerlink" title="å›¾æ ‡å’Œæµè§ˆå™¨å®‰è£…åç§°"></a>å›¾æ ‡å’Œæµè§ˆå™¨å®‰è£…åç§°</h2><p>æµè§ˆå™¨å›¾æ ‡ï¼š</p><ul><li><code>chrome/app/theme/chromium/product_logo_*.png</code></li><li><code>chrome/app/theme/chromium/win/chormium.ico</code>, <code>chrome/app/theme/chromium/win/tiles/Logo.png</code>, <code>chrome/app/theme/chromium/win/tiles/SmallLogo.png</code></li><li><code>chrome/app/theme/default_100_percent/chromium/product_logo*.png</code>, <code>chrome/app/theme/default_200_percent/chromium/product_logo*.png</code></li></ul><p>æµè§ˆå™¨å®‰è£…åç§°ï¼š</p><ul><li><code>chrome/app/chromium_strings.grd</code></li></ul><h2 id="å®‰è£…ä½ç½®"><a href="#å®‰è£…ä½ç½®" class="headerlink" title="å®‰è£…ä½ç½®"></a>å®‰è£…ä½ç½®</h2><p>ä¿®æ”¹æµè§ˆå™¨å®‰è£…ä½ç½®ï¼š</p><ul><li><code>chrome/installer/setup/setup_main.cc --&gt; wWinMain --&gt; installer_state.Initialize() --&gt; chrome/installer/setup/installer_state.cc --&gt; InstallerState::Initialize</code> ä¿®æ”¹ <code>target_path_</code> è·¯å¾„</li></ul><p>æ¯”å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">// target_path_ = GetChromeInstallPath(system_install());</span></span><br><span class="line">target_path_ = base::<span class="built_in">FilePath</span>(<span class="string">L&quot;C:\\&quot;</span>);</span><br><span class="line">target_path_ = taget_path_.<span class="built_in">Append</span>(install_static::<span class="built_in">GetChromeInstallSubDirectory</span>()); <span class="comment">// Append &quot;kCompanyPathName\\&quot;</span></span><br><span class="line">target_path_ = target_path_.<span class="built_in">Append</span>(kInstallBinaryDir); <span class="comment">// Append &quot;Appliation\\&quot;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç å°†å®‰è£…ä½ç½®è®¾ç½®ä¸ºï¼š<code>C:\\$&#123;ComppanyPathName&#125;\\Application\\</code></p><h1 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h1><p>å‚è€ƒï¼š</p><ul><li><a href="https://stackoverflow.com/questions/64166411/how-to-change-chromium-browser-logo-and-name">å›¾æ ‡å’Œæµè§ˆå™¨åç§°</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chromium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†å¸ƒå¼</title>
      <link href="/2022/12/04/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
      <url>/2022/12/04/%E5%88%86%E5%B8%83%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ†å¸ƒå¼"><a href="#åˆ†å¸ƒå¼" class="headerlink" title="åˆ†å¸ƒå¼"></a>åˆ†å¸ƒå¼</h1><h2 id="CAP"><a href="#CAP" class="headerlink" title="CAP"></a>CAP</h2><p>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</p><p>å¯ç”¨æ€§ï¼ˆAvailablilityï¼‰</p><p>åˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰</p><ul><li>CPï¼š</li></ul><p>è¿½æ±‚ä¸€è‡´æ€§å’Œåˆ†åŒºå®¹é”™æ€§ï¼šRedisã€HBaseã€Zookeeper</p><ul><li>APï¼š</li></ul><p>è¿½æ±‚å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ï¼šEureka</p><hr><h2 id="BASEç†è®º"><a href="#BASEç†è®º" class="headerlink" title="BASEç†è®º"></a>BASEç†è®º</h2><p>BASEï¼šåŸºæœ¬å¯ç”¨ï¼ˆBasically Availableï¼‰ã€è½¯çŠ¶æ€ï¼ˆSoft Stateï¼‰ã€æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventually Consistencyï¼‰</p><p><strong>åŸºæœ¬å¯ç”¨ï¼š</strong></p><p>åˆ†å¸ƒå¼ç³»ç»Ÿå‡ºç°æ•…éšœæ—¶ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼Œå³ä¿è¯æ ¸å¿ƒå¯ç”¨</p><p><strong>è½¯çŠ¶æ€ï¼š</strong></p><p>å…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œå¹¶è®¤ä¸ºè¯¥çŠ¶æ€ä¸å½±å“ç³»ç»Ÿçš„æ•´ä½“å¯ç”¨æ€§ï¼Œå³å…è®¸ç³»ç»Ÿåœ¨å¤šä¸ªä¸åŒèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬å­˜åœ¨æ•°æ®å»¶æ—¶ã€‚</p><p><strong>æœ€ç»ˆä¸€è‡´æ€§ï¼š</strong></p><p>ç³»ç»Ÿä¸­æ‰€æœ‰æ•°æ®å‰¯æœ¬ç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œæœ€ç»ˆèƒ½å¤Ÿè¾¾åˆ°ä¸€è‡´çš„çŠ¶æ€ã€‚</p><hr><h2 id="åˆ†å¸ƒå¼äº‹åŠ¡"><a href="#åˆ†å¸ƒå¼äº‹åŠ¡" class="headerlink" title="åˆ†å¸ƒå¼äº‹åŠ¡"></a>åˆ†å¸ƒå¼äº‹åŠ¡</h2><p><strong>2PC(Two-phaseCommit)ï¼š</strong>äºŒé˜¶æ®µæäº¤åè®®</p><p>2PC ç®—æ³•æ€è·¯ï¼š<strong>å‚ä¸è€…å°†æ“ä½œæˆè´¥é€šçŸ¥åè°ƒè€…ï¼Œå†ç”±åè°ƒè€…æ ¹æ®æ‰€æœ‰å‚ä¸è€…çš„åé¦ˆæƒ…æŠ¥å†³å®šå„å‚ä¸è€…æ˜¯å¦è¦æäº¤æ“ä½œè¿˜æ˜¯ä¸­æ­¢æ“ä½œã€‚</strong></p><ul><li><p><strong>å‡†å¤‡é˜¶æ®µï¼ˆæŠ•ç¥¨é˜¶æ®µï¼‰</strong></p></li><li><p><strong>æäº¤é˜¶æ®µï¼ˆæ‰§è¡Œé˜¶æ®µï¼‰</strong></p></li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li><p><strong>åŒæ­¥é˜»å¡</strong></p></li><li><p><strong>å•ç‚¹æ•…éšœ</strong></p></li><li><p><strong>æ•°æ®ä¸ä¸€è‡´</strong></p></li><li><p><strong>è„‘è£‚ï¼š</strong>Elasticsearchã€Zookeeper é›†ç¾¤ç¯å¢ƒä¸­ï¼Œå½“ä¸¤ä¸ªæœºæˆ¿ä¹‹é—´çš„ç½‘ç»œé€šä¿¡å‡ºç°æ•…éšœæ—¶ï¼Œé€‰ä¸¾æœºåˆ¶å¯èƒ½å†ä¸¤ä¸ªè®¡æ–¹é€‰ä¸¾å‡ºä¸¤ä¸ª Leaderã€‚</p></li></ul><p><strong>3PC(Three-phaseCommit)ï¼š</strong>ä¸‰é˜¶æ®µæäº¤åè®®</p><p>3PC åè®®åœ¨ 2PC åè®®åŸºç¡€ä¸ŠåŠ å…¥äº†è¶…æ—¶æœºåˆ¶å’Œ preCommit é˜¶æ®µ</p><ul><li><p><strong>CanCommit é˜¶æ®µ</strong></p><p>å’Œ 2PC çš„å‡†å¤‡é˜¶æ®µç›¸åŒï¼Œåè°ƒè€…åƒå‚ä¸è€…å‘é€ commit è¯·æ±‚ï¼Œå‚ä¸è€…æ”¶åˆ°è¯·æ±‚åè¿”å›å“åº”</p></li><li><p><strong>PreCommit é˜¶æ®µ</strong></p><p>å¦‚æœæ‰€æœ‰çš„å‚ä¸è€…éƒ½è¿”å› Yes å“åº”ï¼Œåˆ™æ‰§è¡Œäº‹åŠ¡çš„é¢„æ‰§è¡Œ</p><ol><li><strong>å‘é€é¢„æäº¤è¯·æ±‚</strong>ï¼šåè°ƒè€…å‘å‚ä¸è€…å‘é€ PreCommit è¯·æ±‚ï¼Œå¹¶è¿›å…¥ Prepare é˜¶æ®µ</li><li><strong>äº‹åŠ¡é¢„æäº¤</strong>ï¼šå‚ä¸è€…æ”¶åˆ° PreCommit è¯·æ±‚åï¼Œæ‰§è¡Œäº‹åŠ¡æ“ä½œï¼Œå¹¶è®°å½• undo logã€redo log</li><li><strong>å“åº”åé¦ˆ</strong></li></ol><p>å¦‚æœæœ‰ä»»ä½•ä¸€ä¸ªå‚ä¸è€…è¿”å›äº† No å“åº”ï¼Œæˆ–è€…ç­‰å¾…è¶…æ—¶åéƒ½æ²¡æœ‰æ¥åˆ°å‚ä¸è€…çš„å“åº”ï¼Œåˆ™æ‰§è¡Œäº‹åŠ¡ä¸­æ–­</p><ol><li><strong>å‘é€ä¸­æ–­ï¼ˆabortï¼‰è¯·æ±‚</strong></li><li><strong>ç»ˆç«¯äº‹åŠ¡</strong></li></ol></li><li><p><strong>doCommit é˜¶æ®µ</strong></p><p>åœ¨ doCommit é˜¶æ®µå¦‚æœå‚ä¸è€…å› ä¸ºç½‘ç»œè¶…æ—¶æ²¡æœ‰æ”¶åˆ° doCommit è¯·æ±‚æˆ–è€… abort è¯·æ±‚ï¼Œåˆ™ä¼šç»§ç»­è¿›è¡Œäº‹åŠ¡çš„æäº¤</p></li></ul><hr><h2 id="åˆ†å¸ƒå¼é”"><a href="#åˆ†å¸ƒå¼é”" class="headerlink" title="åˆ†å¸ƒå¼é”"></a>åˆ†å¸ƒå¼é”</h2>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¦‚è¿° </tag>
            
            <tag> åˆ†å¸ƒå¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java IO</title>
      <link href="/2022/03/29/JavaIO/"/>
      <url>/2022/03/29/JavaIO/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaNIO"><a href="#JavaNIO" class="headerlink" title="JavaNIO"></a>JavaNIO</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><h3 id="ä¸‰ç§IOæ¨¡å‹"><a href="#ä¸‰ç§IOæ¨¡å‹" class="headerlink" title="ä¸‰ç§IOæ¨¡å‹"></a>ä¸‰ç§IOæ¨¡å‹</h3><p>Javaæ”¯æŒä¸‰ç§<code>I/O</code>æ¨¡å¼</p><ul><li><code>BIO</code></li><li><code>NIO</code></li><li><code>AIO</code></li></ul><p><strong>BIO (Blocking):</strong></p><blockquote><p>  JDK1.4ä»¥å‰çš„åŒæ­¥é˜»å¡IOï¼Œå½“å®¢æˆ·ç«¯æœ‰è¿æ¥è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å°±éœ€è¦å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚</p><p>  <img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153351.png" alt="img"></p></blockquote><hr><p><strong>NIO (Non-blocking)</strong></p><blockquote><p>  JDK1.4ä»¥åï¼ŒåŒæ­¥éé˜»å¡IOï¼ŒæœåŠ¡ç«¯ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªè¯·æ±‚ï¼Œå®¢æˆ·ç«¯å‘é€çš„è¿æ¥è¯·æ±‚ä¼šæ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ä¸Šï¼Œå¤šè·¯å¤ç”¨å™¨è½®è¯¢åˆ°è¿æ¥æœ‰<code>I/O</code>è¯·æ±‚å°±å¤„ç†</p><p>  <img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153354.png" alt="img"></p></blockquote><hr><p><strong>AIO (Asynchronous)</strong></p><blockquote><p>  JDK1.7ä»¥åï¼Œå¼‚æ­¥éé˜»å¡IOã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯å…ˆç”±æ“ä½œç³»ç»Ÿå®Œæˆåæ‰é€šçŸ¥æœåŠ¡ç«¯ç¨‹åºå¯åŠ¨çº¿ç¨‹å»å¤„ç†ã€‚</p></blockquote><hr><p><strong>ä¸‰ç§IOæ¨¡å‹çš„é€‚ç”¨åœºæ™¯</strong></p><ul><li><code>BIO</code> æ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®æ¯”è¾ƒå°ä¸”å›ºå®šçš„æ¶æ„ï¼Œè¿™ç§æ–¹å¼å¯¹æœåŠ¡å™¨èµ„æºè¦æ±‚æ¯”è¾ƒé«˜ï¼Œå¹¶å‘å±€é™äºåº”ç”¨ä¸­ï¼Œç¨‹åºç®€å•æ˜“ç†è§£ã€‚</li><li><code>NIO</code> æ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒçŸ­ï¼ˆè½»æ“ä½œï¼‰çš„æ¶æ„ï¼Œæ¯”å¦‚èŠå¤©æœåŠ¡å™¨ï¼Œå¼¹å¹•ç³»ç»Ÿï¼ŒæœåŠ¡å™¨é—´é€šè®¯ç­‰ï¼Œç¼–ç¨‹æ¯”è¾ƒå¤æ‚ã€‚</li><li><code>AIO</code> æ–¹å¼ä½¿ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒé•¿ï¼ˆé‡æ“ä½œï¼‰çš„æ¶æ„ï¼Œæ¯”å¦‚ç›¸å†ŒæœåŠ¡å™¨ï¼Œå……åˆ†è°ƒç”¨ <code>OS</code> å‚ä¸å¹¶å‘æ“ä½œï¼Œç¼–ç¨‹æ¯”è¾ƒå¤æ‚ã€‚</li></ul><hr><p><strong><code>NIO</code>å’Œ<code>BIO</code>çš„æ¯”è¾ƒ</strong></p><ol><li><code>BIO</code> ä»¥æµçš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œè€Œ <code>NIO</code> ä»¥å—çš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œå— <code>I/O</code> çš„æ•ˆç‡æ¯”æµ <code>I/O</code> é«˜å¾ˆå¤šã€‚</li><li><code>BIO</code> æ˜¯é˜»å¡çš„ï¼Œ<code>NIO</code> åˆ™æ˜¯éé˜»å¡çš„ã€‚</li><li><code>BIO</code> åŸºäºå­—èŠ‚æµå’Œå­—ç¬¦æµè¿›è¡Œæ“ä½œï¼Œè€Œ <code>NIO</code> åŸºäº <code>Channel</code>ï¼ˆé€šé“ï¼‰å’Œ <code>Buffer</code>ï¼ˆç¼“å†²åŒºï¼‰è¿›è¡Œæ“ä½œï¼Œæ•°æ®æ€»æ˜¯ä»é€šé“è¯»å–åˆ°ç¼“å†²åŒºä¸­ï¼Œæˆ–è€…ä»ç¼“å†²åŒºå†™å…¥åˆ°é€šé“ä¸­ã€‚<code>Selector</code>ï¼ˆé€‰æ‹©å™¨ï¼‰ç”¨äºç›‘å¬å¤šä¸ªé€šé“çš„äº‹ä»¶ï¼ˆæ¯”å¦‚ï¼šè¿æ¥è¯·æ±‚ï¼Œæ•°æ®åˆ°è¾¾ç­‰ï¼‰ï¼Œå› æ­¤ä½¿ç”¨å•ä¸ªçº¿ç¨‹å°±å¯ä»¥ç›‘å¬å¤šä¸ªå®¢æˆ·ç«¯é€šé“ã€‚</li></ol><hr><h2 id="NIOåŸç†"><a href="#NIOåŸç†" class="headerlink" title="NIOåŸç†"></a>NIOåŸç†</h2><h3 id="NIOä¸‰å¤§æ ¸å¿ƒ"><a href="#NIOä¸‰å¤§æ ¸å¿ƒ" class="headerlink" title="NIOä¸‰å¤§æ ¸å¿ƒ"></a>NIOä¸‰å¤§æ ¸å¿ƒ</h3><p><code>NIO</code> æœ‰ä¸‰å¤§æ ¸å¿ƒéƒ¨åˆ†: <strong><code>Channel</code>ï¼ˆé€šé“ï¼‰ã€<code>Buffer</code>ï¼ˆç¼“å†²åŒºï¼‰ã€<code>Selector</code>ï¼ˆé€‰æ‹©å™¨ï¼‰</strong> ã€‚</p><p><strong>NIOä¸‰å¤§æ ¸å¿ƒå…³ç³»å›¾</strong></p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153401.png" alt="img" style="zoom: 67%;" /><ol><li>æ¯ä¸ª <code>Channel</code> éƒ½ä¼šå¯¹åº”ä¸€ä¸ª <code>Buffer</code>ã€‚</li><li><code>Selector</code> å¯¹åº”ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹åº”å¤šä¸ª <code>Channel</code>ï¼ˆè¿æ¥ï¼‰ã€‚</li><li>è¯¥å›¾ååº”äº†æœ‰ä¸‰ä¸ª <code>Channel</code> æ³¨å†Œåˆ°è¯¥ <code>Selector</code> &#x2F;&#x2F;ç¨‹åº</li><li>ç¨‹åºåˆ‡æ¢åˆ°å“ªä¸ª <code>Channel</code> æ˜¯ç”±äº‹ä»¶å†³å®šçš„ï¼Œ<code>Event</code> å°±æ˜¯ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µã€‚</li><li><code>Selector</code> ä¼šæ ¹æ®ä¸åŒçš„äº‹ä»¶ï¼Œåœ¨å„ä¸ªé€šé“ä¸Šåˆ‡æ¢ã€‚</li><li><code>Buffer</code> å°±æ˜¯ä¸€ä¸ªå†…å­˜å—ï¼Œåº•å±‚æ˜¯æœ‰ä¸€ä¸ªæ•°ç»„ã€‚</li><li><code>Buffer</code>å¯ä»¥é€šè¿‡<code>flip</code>æ–¹æ³•åˆ‡æ¢è¯»å†™æ¨¡å¼ã€‚</li></ol><hr><h3 id="ç¼“å†²åŒºï¼ˆBufferï¼‰"><a href="#ç¼“å†²åŒºï¼ˆBufferï¼‰" class="headerlink" title="ç¼“å†²åŒºï¼ˆBufferï¼‰"></a>ç¼“å†²åŒºï¼ˆBufferï¼‰</h3><p>ç¼“å†²åŒºï¼ˆ<code>Buffer</code>ï¼‰ï¼šç¼“å†²åŒºæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>å¯ä»¥è¯»å†™æ•°æ®çš„å†…å­˜å—</strong>ï¼Œå¯ä»¥ç†è§£æˆæ˜¯ä¸€ä¸ª<strong>å®¹å™¨å¯¹è±¡ï¼ˆå«æ•°ç»„ï¼‰</strong>ï¼Œè¯¥å¯¹è±¡æä¾›äº†ä¸€ç»„æ–¹æ³•ï¼Œå¯ä»¥æ›´è½»æ¾åœ°ä½¿ç”¨å†…å­˜å—ï¼Œï¼Œç¼“å†²åŒºå¯¹è±¡å†…ç½®äº†ä¸€äº›æœºåˆ¶ï¼Œèƒ½å¤Ÿè·Ÿè¸ªå’Œè®°å½•ç¼“å†²åŒºçš„çŠ¶æ€å˜åŒ–æƒ…å†µã€‚<code>Channel</code> æä¾›ä»æ–‡ä»¶ã€ç½‘ç»œè¯»å–æ•°æ®çš„æ¸ é“ï¼Œä½†æ˜¯è¯»å–æˆ–å†™å…¥çš„æ•°æ®éƒ½å¿…é¡»ç»ç”± <code>Buffer</code></p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153409.png" alt="img"></p><p><strong>Bufferç±»åŠå…¶å­ç±»</strong></p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153414.png" alt="image-20210726001826565"></p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153417.png" alt="image-20210726001849519" style="zoom: 67%;" /><hr><h3 id="é€šé“ï¼ˆChannelï¼‰"><a href="#é€šé“ï¼ˆChannelï¼‰" class="headerlink" title="é€šé“ï¼ˆChannelï¼‰"></a>é€šé“ï¼ˆChannelï¼‰</h3><ol><li><code>NIO</code>çš„é€šé“ç±»ä¼¼äºæµï¼Œä½†æœ‰äº›åŒºåˆ«å¦‚ä¸‹ï¼š<ul><li>é€šé“å¯ä»¥åŒæ—¶è¿›è¡Œè¯»å†™ï¼Œè€Œæµåªèƒ½è¯»æˆ–è€…åªèƒ½å†™</li><li>é€šé“å¯ä»¥å®ç°å¼‚æ­¥è¯»å†™æ•°æ®</li><li>é€šé“å¯ä»¥ä»ç¼“å†²è¯»æ•°æ®ï¼Œä¹Ÿå¯ä»¥å†™æ•°æ®åˆ°ç¼“å†²:</li></ul></li><li><code>BIO</code> ä¸­çš„ <code>Stream</code> æ˜¯å•å‘çš„ï¼Œä¾‹å¦‚ <code>FileInputStream</code> å¯¹è±¡åªèƒ½è¿›è¡Œè¯»å–æ•°æ®çš„æ“ä½œï¼Œè€Œ <code>NIO</code> ä¸­çš„é€šé“ï¼ˆ<code>Channel</code>ï¼‰æ˜¯åŒå‘çš„ï¼Œå¯ä»¥è¯»æ“ä½œï¼Œä¹Ÿå¯ä»¥å†™æ“ä½œã€‚</li><li><code>Channel</code> åœ¨ <code>NIO</code> ä¸­æ˜¯ä¸€ä¸ªæ¥å£ <code>public interface Channel extends Closeable&#123;&#125;</code></li><li>å¸¸ç”¨çš„ <code>Channel</code> ç±»æœ‰ï¼š<code>FileChannel</code>ã€<code>DatagramChannel</code>ã€<code>ServerSocketChannel</code> å’Œ <code>SocketChannel</code>ã€‚<code>ServerSocketChanne</code> ç±»ä¼¼ <code>ServerSocket</code>ã€<code>SocketChannel</code> ç±»ä¼¼ <code>Socket</code></li><li><code>FileChannel</code> ç”¨äºæ–‡ä»¶çš„æ•°æ®è¯»å†™ï¼Œ<code>DatagramChannel</code> ç”¨äº <code>UDP</code> çš„æ•°æ®è¯»å†™ï¼Œ<code>ServerSocketChannel</code> å’Œ <code>SocketChannel</code> ç”¨äº <code>TCP</code> çš„æ•°æ®è¯»å†™ã€‚h</li></ol>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> IO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java çº¿ç¨‹æ± </title>
      <link href="/2022/03/29/Java%E7%BA%BF%E7%A8%8B%E6%B1%A0/"/>
      <url>/2022/03/29/Java%E7%BA%BF%E7%A8%8B%E6%B1%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± "><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± " class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± "></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± </h1><p>ä½¿ç”¨çº¿ç¨‹æ± ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªåŸå› ï¼š</p><ol><li>åˆ›å»º&#x2F;é”€æ¯çº¿ç¨‹éœ€è¦æ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œçº¿ç¨‹æ± å¯ä»¥<strong>å¤ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹</strong>ã€‚</li><li><strong>æ§åˆ¶å¹¶å‘çš„æ•°é‡</strong>ã€‚å¹¶å‘æ•°é‡è¿‡å¤šï¼Œå¯èƒ½ä¼šå¯¼è‡´èµ„æºæ¶ˆè€—è¿‡å¤šï¼Œä»è€Œé€ æˆæœåŠ¡å™¨å´©æºƒã€‚ï¼ˆä¸»è¦åŸå› ï¼‰ã€‚</li><li>å¯ä»¥å¯¹çº¿ç¨‹åšç»Ÿä¸€ç®¡ç†ã€‚</li></ol><p>Java ä¸­çº¿ç¨‹æ± çš„é¡¶å±‚æ¥å£æ˜¯<code>Executor</code>æ¥å£ï¼Œè€Œ<code>ThreadPoolExecutor</code>æ˜¯è¿™ä¸ªæ¥å£çš„å®ç°ç±»ã€‚</p><h1 id="çº¿ç¨‹æ± æ ¸å¿ƒå‚æ•°"><a href="#çº¿ç¨‹æ± æ ¸å¿ƒå‚æ•°" class="headerlink" title="çº¿ç¨‹æ± æ ¸å¿ƒå‚æ•°"></a>çº¿ç¨‹æ± æ ¸å¿ƒå‚æ•°</h1><ol><li><code>int corePoolSize</code>ï¼šè¯¥çº¿ç¨‹æ± ä¸­çš„æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± ä¸­æœ‰ä¸¤ç±»çº¿ç¨‹ï¼šæ ¸å¿ƒçº¿ç¨‹å’Œéæ ¸å¿ƒçº¿ç¨‹ã€‚</li><li><code>int maximumPoolSize</code>ï¼šè¯¥çº¿ç¨‹æ± å…è®¸çš„æœ€å¤§çº¿ç¨‹æ•° &#x3D; éæ ¸å¿ƒçº¿ç¨‹æ•° + æ ¸å¿ƒçº¿ç¨‹æ•°ã€‚</li><li><code>long keepAliveTime</code>ï¼šéæ ¸å¿ƒçº¿ç¨‹é—²ç½®çš„è¶…æ—¶æ—¶é•¿ï¼Œéæ ¸å¿ƒçº¿ç¨‹å¦‚æœå¤„äºé—²ç½®çŠ¶æ€è¶…è¿‡è¯¥å€¼ï¼Œå°±ä¼šè¢«é”€æ¯ã€‚</li><li><code>TimeUnit</code>ï¼škeepAliveTime çš„æ—¶é—´å•ä½ã€‚</li><li><code>workQueue</code>ï¼šé˜»å¡é˜Ÿåˆ—ï¼Œç»´æŠ¤ç­‰å¾…æ‰§è¡Œçš„çº¿ç¨‹ã€‚</li><li><code>threadFactory</code>ï¼šåˆ›å»ºçº¿ç¨‹çš„å·¥å‚ã€‚</li><li><code>RejectedExecutionHandler</code>ï¼šæ‹’ç»ç­–ç•¥å¤„ç†ã€‚</li></ol><h1 id="ThreadPoolExecutor-çš„ç­–ç•¥"><a href="#ThreadPoolExecutor-çš„ç­–ç•¥" class="headerlink" title="ThreadPoolExecutor çš„ç­–ç•¥"></a>ThreadPoolExecutor çš„ç­–ç•¥</h1><p>çº¿ç¨‹æ± æœ¬èº«æœ‰ä¸€ä¸ªè°ƒåº¦çº¿ç¨‹ï¼Œç”¨æ¥ç®¡ç†çº¿ç¨‹æ± çš„å„ç§äº‹åŠ¡ã€‚</p><p>çº¿ç¨‹æ± ä¹Ÿæœ‰è‡ªå·±çš„çŠ¶æ€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// runState is stored in the high-order bits</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">RUNNING</span>    <span class="operator">=</span> -<span class="number">1</span> &lt;&lt; COUNT_BITS;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SHUTDOWN</span>   <span class="operator">=</span>  <span class="number">0</span> &lt;&lt; COUNT_BITS;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">STOP</span>       <span class="operator">=</span>  <span class="number">1</span> &lt;&lt; COUNT_BITS;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">TIDYING</span>    <span class="operator">=</span>  <span class="number">2</span> &lt;&lt; COUNT_BITS;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">TERMINATED</span> <span class="operator">=</span>  <span class="number">3</span> &lt;&lt; COUNT_BITS;</span><br></pre></td></tr></table></figure><h1 id="çº¿ç¨‹æ± å¤„ç†æµç¨‹"><a href="#çº¿ç¨‹æ± å¤„ç†æµç¨‹" class="headerlink" title="çº¿ç¨‹æ± å¤„ç†æµç¨‹"></a>çº¿ç¨‹æ± å¤„ç†æµç¨‹</h1><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153148.png" alt="img"></p><h1 id="å¸¸è§çº¿ç¨‹æ± "><a href="#å¸¸è§çº¿ç¨‹æ± " class="headerlink" title="å¸¸è§çº¿ç¨‹æ± "></a>å¸¸è§çº¿ç¨‹æ± </h1><p><code>java.util.concurrent.Executors</code> ç±»æä¾›äº†å‡ ç§é™æ€æ–¹æ³•åˆ›å»ºçº¿ç¨‹æ± </p><ol><li><code>newCachedThreadPool</code></li><li><code>newFixedThreadPool</code></li><li><code>newSingleThreadExecutor</code></li><li><code>newScheduledThreadPool</code></li></ol><h1 id="é˜»å¡é˜Ÿåˆ—"><a href="#é˜»å¡é˜Ÿåˆ—" class="headerlink" title="é˜»å¡é˜Ÿåˆ—"></a>é˜»å¡é˜Ÿåˆ—</h1><p>åœ¨<strong>ç”Ÿäº§è€…-æ¶ˆè´¹è€…</strong>æ¨¡å‹ä¸­ï¼Œç”Ÿäº§è€…è´Ÿè´£ç”Ÿäº§èµ„æºï¼Œæ¶ˆè´¹è€…è´Ÿè´£æ¶ˆè´¹èµ„æºï¼Œç„¶è€Œæœ‰æ—¶ä¼šå‡ºç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ç”Ÿäº§æ¶ˆè´¹çš„é€Ÿç‡ä¸åŒ¹é…çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šå¯¼è‡´èµ„æºæ± ä¸ºç©ºæˆ–ä¸ºæ»¡ã€‚å½“èµ„æºæ± ä¸ºç©ºæ—¶ï¼Œéœ€è¦é˜»å¡æ¶ˆè´¹è€…ï¼Œå”¤é†’ç”Ÿäº§è€…ï¼›å½“èµ„æºæ± ä¸ºæ»¡æ—¶ï¼Œéœ€è¦é˜»å¡ç”Ÿäº§è€…ï¼Œå”¤é†’æ¶ˆè´¹è€…ã€‚</p><p>JDK ä¸­çš„é˜»å¡é˜Ÿåˆ—ï¼ˆBlockingQueueï¼‰å¯ä»¥å¸®åŠ©å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œä½¿ç”¨è€…åªéœ€è¦å‘é˜Ÿåˆ—ä¸­æ·»åŠ æˆ–å–å‡ºèµ„æºï¼Œè€Œæ— éœ€å…³å¿ƒå…±äº«èµ„æºçš„å¹¶å‘è®¿é—®é—®é¢˜å’Œé˜»å¡å”¤é†’æµç¨‹ã€‚</p><p><strong>BlockingQueue</strong> æ˜¯ <code>java.util.concurrent</code> åŒ…ä¸‹çš„æ¥å£ï¼Œæœ‰å¤šç§å®ç°ç±»æä¾›äº†ä¸åŒçš„å­˜å–æ–¹æ³•ï¼Œå’Œæ™®é€šçš„é˜Ÿåˆ—ä¸åŒçš„æ˜¯éƒ½æ”¯æŒå¤šçº¿ç¨‹ç¯å¢ƒã€‚</p><h2 id="æ“ä½œæ–¹æ³•"><a href="#æ“ä½œæ–¹æ³•" class="headerlink" title="æ“ä½œæ–¹æ³•"></a>æ“ä½œæ–¹æ³•</h2><p>BlockingQueue æä¾›äº†å››ç»„ä¸åŒçš„æ–¹æ³•æ“ä½œé˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚</p><ol><li>æŠ›å‡ºå¼‚å¸¸ï¼š<code>add(e)</code>ã€<code>remove()</code>ã€<code>element()</code></li><li>è¿”å›ç‰¹å®šå€¼ï¼ˆ<code>null</code> æˆ–è€… <code>false</code>ï¼‰ï¼š<code>offer(e)</code>ã€<code>poll()</code>ã€<code>peek()</code></li><li>é˜»å¡å½“å‰çº¿ç¨‹ï¼š<code>put(e)</code>ã€<code>take()</code></li><li>æŒ‡å®šå”¤é†’æ—¶é—´ï¼š<code>offer(e, time, unit)</code>ã€<code>pool(time, unit)</code></li></ol><h2 id="å®ç°ç±»"><a href="#å®ç°ç±»" class="headerlink" title="å®ç°ç±»"></a>å®ç°ç±»</h2><h3 id="ArrayBlockingQueue"><a href="#ArrayBlockingQueue" class="headerlink" title="ArrayBlockingQueue"></a>ArrayBlockingQueue</h3><p>ç”±<strong>æ•°ç»„</strong>ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ã€‚</p><h3 id="LinkedBlockingQueue"><a href="#LinkedBlockingQueue" class="headerlink" title="LinkedBlockingQueue"></a>LinkedBlockingQueue</h3><p>ç”±<strong>é“¾è¡¨</strong>ç»„æˆçš„é˜»å¡é˜Ÿåˆ—ã€‚é»˜è®¤å¤§å°ä¸º <code>Integer.MAX_VALUE</code>ã€‚</p><h3 id="DelayQueue"><a href="#DelayQueue" class="headerlink" title="DelayQueue"></a>DelayQueue</h3><p>ç”±å®ç°äº† <code>Delay</code> æ¥å£çš„å¯¹è±¡ç»„æˆçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œä¼ å…¥çš„å¯¹è±¡åªæœ‰å½“å»¶è¿Ÿæ—¶é—´åˆ°æœŸåæ‰å¯ä»¥è¢«å–å‡ºã€‚</p><h3 id="PriorityBlockingQueue"><a href="#PriorityBlockingQueue" class="headerlink" title="PriorityBlockingQueue"></a>PriorityBlockingQueue</h3><p>ä¼˜å…ˆé˜»å¡é˜Ÿåˆ—ï¼ŒåŒæ ·ä¹Ÿæ˜¯æ— ç•Œçš„ï¼Œä¼ å…¥çš„å¯¹è±¡é€šè¿‡å®ç° <code>Comparator</code> æ¥å£æ’åºã€‚å› ä¸ºæ˜¯æ— ç•Œé˜Ÿåˆ—æ‰€ä»¥æœ‰å¼•å‘ OOM çš„é£é™©ã€‚</p><h3 id="SynchronousQueue"><a href="#SynchronousQueue" class="headerlink" title="SynchronousQueue"></a>SynchronousQueue</h3><p>è¿™ä¸ªé˜Ÿåˆ—æ²¡æœ‰ä»»ä½•å†…éƒ¨å®¹é‡ï¼Œæ¯ä¸ª put å¿…é¡»ç­‰å¾…ä¸€ä¸ª take æ“ä½œï¼Œåä¹‹äº¦ç„¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
            <tag> å¹¶å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ“ä½œç³»ç»Ÿç¬”è®°</title>
      <link href="/2022/03/29/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
      <url>/2022/03/29/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h1><h2 id="ç¬¬ä¸€ç« "><a href="#ç¬¬ä¸€ç« " class="headerlink" title="ç¬¬ä¸€ç« "></a>ç¬¬ä¸€ç« </h2><h3 id="1-1"><a href="#1-1" class="headerlink" title="1.1"></a>1.1</h3><blockquote><ul><li><strong>èµ„æºç®¡ç†è€…</strong>ï¼šæœ‰æ•ˆåœ°ç®¡ç†è®¡ç®—æœºè½¯ç¡¬ä»¶èµ„æº</li><li><strong>æ‰©å±•æœºå™¨</strong>ï¼šä¸ºç”¨æˆ·æä¾›æ¯”å®é™…æœºå™¨æ›´ä¾¿äºè¿ç”¨çš„æŠ½è±¡ï¼ŒåŒ…æ‹¬è¿›ç¨‹ã€åœ°å€ç©ºé—´ã€æ–‡ä»¶ç­‰ï¼Œæä¾›æ¥å£ã€‚</li></ul></blockquote><hr><h3 id="1-2-æ“ä½œç³»ç»Ÿå‘å±•å²"><a href="#1-2-æ“ä½œç³»ç»Ÿå‘å±•å²" class="headerlink" title="1.2 æ“ä½œç³»ç»Ÿå‘å±•å²"></a>1.2 æ“ä½œç³»ç»Ÿå‘å±•å²</h3><blockquote><ul><li>çœŸç©ºç®¡å’Œç©¿å­”å¡ç‰‡</li><li>æ™¶ä½“ç®¡å’Œæ‰¹å¤„ç†ç³»ç»Ÿ</li><li>é›†æˆç”µè·¯å’Œå¤šé“ç³»ç»Ÿ</li><li>ä¸ªäººè®¡ç®—æœºï¼Œç§»åŠ¨è®¡ç®—æœº</li></ul></blockquote><hr><h3 id="1-3-æ“ä½œç³»ç»Ÿç±»å‹"><a href="#1-3-æ“ä½œç³»ç»Ÿç±»å‹" class="headerlink" title="1.3 æ“ä½œç³»ç»Ÿç±»å‹"></a>1.3 æ“ä½œç³»ç»Ÿç±»å‹</h3><blockquote><ul><li><p>æ‰¹å¤„ç†ç³»ç»Ÿ</p><ul><li><p>å•é“</p></li><li><p>å¤šé“</p><blockquote><ul><li>ä¼˜ç‚¹ï¼šèµ„æºåˆ©ç”¨ç‡é«˜ã€ç³»ç»Ÿååé‡å¤§ã€ç³»ç»Ÿåˆ‡æ¢å¼€é”€å°</li><li>ç¼ºç‚¹ï¼š<strong>æ— äº¤äº’èƒ½åŠ›</strong>ã€<strong>ä½œä¸šå¹³å‡è½®è½¬æ—¶é—´é•¿</strong></li><li>å¤šé“ç¨‹åºè®¾è®¡æ˜¯ç°ä»£æ“ä½œç³»ç»Ÿè¯ç”Ÿçš„æ ‡å¿—</li></ul></blockquote></li></ul></li><li><p>åˆ†æ—¶ç³»ç»Ÿ</p><ul><li>Nä¸ªç”¨æˆ· æ—¶é—´ç‰‡q</li><li>è½®æ¢æ³•</li><li>å¤šè·¯æ€§ã€äº¤äº’æ€§ã€ç‹¬å æ€§ã€åŠæ—¶æ€§</li><li>åˆ†æ—¶ç³»ç»Ÿæ›´å¼ºè°ƒ<strong>äººæœºäº¤äº’</strong>åŠŸèƒ½</li></ul></li><li><p>ç½‘ç»œæ“ä½œç³»ç»Ÿ</p></li><li><p>åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿ</p></li></ul></blockquote><hr><h3 id="1-4-æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½"><a href="#1-4-æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½" class="headerlink" title="1.4 æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½"></a>1.4 æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½</h3><blockquote><ul><li>èµ„æºç®¡ç†è€…<ul><li>å¤„ç†å™¨ç®¡ç†<ul><li><strong>è¿›ç¨‹æ§åˆ¶</strong></li><li><strong>è¿›ç¨‹åŒæ­¥</strong></li><li><strong>è¿›ç¨‹é€šä¿¡</strong></li><li><strong>è°ƒåº¦</strong></li></ul></li><li>å†…å­˜ç®¡ç†<ul><li><strong>å†…å­˜åˆ†é…</strong></li><li><strong>å†…å­˜ä¿æŠ¤</strong></li><li><strong>åœ°å€æ˜ å°„</strong></li><li><strong>å†…å­˜æ‰©å……</strong></li></ul></li><li>è®¾å¤‡ç®¡ç†<ul><li><strong>ç¼“å†²ç®¡ç†</strong></li><li><strong>è®¾å¤‡åˆ†é…</strong></li><li><strong>è®¾å¤‡å¤„ç†</strong></li></ul></li><li>æ–‡ä»¶ç®¡ç†<ul><li><strong>æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç†</strong></li><li><strong>ç›®å½•ç®¡ç†</strong></li><li><strong>æ–‡ä»¶çš„è¯»&#x2F;å†™ç®¡ç†</strong></li><li><strong>æ–‡ä»¶ä¿æŠ¤</strong></li></ul></li></ul></li><li>æ‰©å±•æœºå™¨<ul><li>ç”¨æˆ·æ¥å£<ul><li>å›¾å½¢ç”¨æˆ·æ¥å£ï¼šGUI</li><li>å‘½ä»¤æ¥å£</li><li>ç¨‹åºæ¥å£</li></ul></li></ul></li><li>æ“ä½œç³»ç»Ÿçš„ç‰¹å¾<ul><li><strong>å¹¶å‘æ€§</strong></li><li><strong>å…±äº«æ€§</strong></li><li>è™šæ‹Ÿæ€§</li><li>å¼‚æ­¥æ€§</li></ul></li></ul></blockquote><hr><h3 id="1-5-ä¸æ“ä½œç³»ç»Ÿç›¸å…³çš„ç¡¬ä»¶åŸºç¡€"><a href="#1-5-ä¸æ“ä½œç³»ç»Ÿç›¸å…³çš„ç¡¬ä»¶åŸºç¡€" class="headerlink" title="1.5 ä¸æ“ä½œç³»ç»Ÿç›¸å…³çš„ç¡¬ä»¶åŸºç¡€"></a>1.5 ä¸æ“ä½œç³»ç»Ÿç›¸å…³çš„ç¡¬ä»¶åŸºç¡€</h3><blockquote><ul><li>å¤„ç†å™¨ï¼ˆCPU)<ul><li>æ§åˆ¶éƒ¨ä»¶<ul><li><strong>æ§åˆ¶å™¨</strong>ï¼šæŒ‡ä»¤æ§åˆ¶ã€æ—¶åºæ§åˆ¶ã€æ€»çº¿æ§åˆ¶ã€ä¸­æ–­æ§åˆ¶</li><li><strong>ç¨‹åºè®¡æ•°å™¨PC</strong></li><li><strong>åœ°å€å¯„å­˜å™¨AR</strong>ï¼šä¿å­˜å½“å‰CPUæ‰€è®¿é—®çš„å†…å­˜å•å…ƒçš„åœ°å€</li><li><strong>æŒ‡ä»¤å¯„å­˜å™¨IR</strong></li><li><strong>æŒ‡ä»¤è¯‘ç å™¨ID</strong></li></ul></li><li>è¿ç®—éƒ¨ä»¶<ul><li><strong>ç®—æœ¯é€»è¾‘å•å…ƒALU</strong></li><li><strong>ç´¯åŠ å¯„å­˜å™¨AC</strong></li><li><strong>æ•°æ®ç¼“å†²å¯„å­˜å™¨DR</strong></li><li><strong>ç¨‹åºçŠ¶æ€å­—å¯„å­˜å™¨PSW</strong></li></ul></li><li>å·¥ä½œæ¨¡å¼<ul><li>æœ‰PSWä¸­çš„ä¸€ä¸ªä½æ§åˆ¶</li><li><strong>ç”¨æˆ·æ€ï¼ˆç›®æ€ï¼‰</strong></li><li><strong>å†…æ ¸æ€ï¼ˆç³»ç»Ÿæ€ã€æ ¸å¿ƒæ€ã€ç®¡æ€ï¼‰</strong></li><li>å†…æ ¸æ€CPUå¯ä»¥æ‰§è¡Œå…¶æŒ‡ä»¤é›†ä¸­çš„æ¯æ¡æŒ‡ä»¤ï¼Œå¯ä½¿ç”¨ç¡¬ä»¶çš„å„ç§åŠŸèƒ½ã€‚ä½†æ˜¯ç”¨æˆ·æ€CPUåªèƒ½æ‰§è¡Œéƒ¨åˆ†æŒ‡ä»¤ï¼Œæ‰§è¡Œæ—¶ä»…ä½¿ç”¨éƒ¨åˆ†åŠŸèƒ½ã€‚</li></ul></li></ul></li><li>å­˜å‚¨ç³»ç»Ÿ</li><li>I&#x2F;Oå­ç³»ç»Ÿ</li><li>æ€»çº¿</li></ul></blockquote><hr><h3 id="1-6-åŸºæœ¬æ¦‚å¿µ"><a href="#1-6-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.6 åŸºæœ¬æ¦‚å¿µ"></a>1.6 åŸºæœ¬æ¦‚å¿µ</h3><blockquote><ul><li>è¿›ç¨‹(process)ï¼šå¯å¹¶å‘æ‰§è¡Œçš„ç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†åˆä¸Šçš„è¿è¡Œè¿‡ç¨‹<ul><li><strong>ç¨‹åºæ®µï¼ˆæ­£æ–‡ï¼‰</strong></li><li><strong>æ•°æ®æ®µ</strong></li><li><strong>å †æ ˆæ®µ</strong></li><li><strong>è¿›ç¨‹è¡¨è¡¨é¡¹ï¼ˆè¿›ç¨‹æ§åˆ¶å—PCB)</strong></li><li><strong>å¤„äºæ‰§è¡Œæ€çš„è¿›ç¨‹è¿˜æœ‰CPUç°åœº</strong></li></ul></li><li>ç”¨æˆ·æ¥å£â€“ç³»ç»Ÿè°ƒç”¨çš„æ­¥éª¤<ul><li>å°†å‚æ•°å‹å…¥ç”¨æˆ·æ ˆï¼Œè½¬æ ‡å‡†åº“</li><li>å°†ç³»ç»Ÿè°ƒç”¨å·å‹å…¥å¯„å­˜å™¨</li><li>ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€</li><li>å†…æ ¸æ ¹æ®ç³»ç»Ÿè°ƒç”¨å·æ‰¾åˆ°ç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åºè¿›è¡Œå¤„ç†</li><li>ä»å†…æ ¸æ€è¿”å›ç”¨æˆ·æ€</li></ul></li></ul></blockquote><hr><h2 id="ç¬¬äºŒç« -è¿›ç¨‹ä¸çº¿ç¨‹"><a href="#ç¬¬äºŒç« -è¿›ç¨‹ä¸çº¿ç¨‹" class="headerlink" title="ç¬¬äºŒç«  è¿›ç¨‹ä¸çº¿ç¨‹"></a>ç¬¬äºŒç«  è¿›ç¨‹ä¸çº¿ç¨‹</h2><ul><li>ç¨‹åºé¡ºåºæ‰§è¡Œ<ul><li>é¡ºåºï¼Œå°é—­ï¼Œå¯å†ç°</li></ul></li><li>ç¨‹åºå¹¶å‘æ‰§è¡Œ<ul><li>é—´æ–­ã€å¤±å»å°é—­ã€æœªå¿…å¯å†ç°</li></ul></li><li>åŸè¯­<ul><li><strong>æœºå™¨æŒ‡ä»¤çº§</strong>ï¼šä¸å…è®¸ä¸­æ–­</li><li><strong>åŠŸèƒ½çº§</strong>ï¼šä¸å…è®¸å¹¶å‘</li></ul></li></ul><h3 id="2-1-è¿›ç¨‹"><a href="#2-1-è¿›ç¨‹" class="headerlink" title="2.1 è¿›ç¨‹"></a>2.1 è¿›ç¨‹</h3><blockquote><ul><li>å®šä¹‰ï¼š<ul><li><strong>å¯ä»¥ä¸å…¶ä»–ç¨‹åºå¹¶å‘æ‰§è¡Œçš„ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œ</strong></li><li><strong>å¯å¹¶å‘æ‰§è¡Œçš„ç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†åˆä¸Šçš„è¿è¡Œè¿‡ç¨‹</strong></li><li>æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½</li></ul></li><li>ä¸€ä¸ªç¨‹åºå¯ä»¥ç”Ÿæˆä¸åŒçš„è¿›ç¨‹</li></ul></blockquote><h4 id="è¿›ç¨‹çš„åŸºæœ¬çŠ¶æ€"><a href="#è¿›ç¨‹çš„åŸºæœ¬çŠ¶æ€" class="headerlink" title="è¿›ç¨‹çš„åŸºæœ¬çŠ¶æ€"></a>è¿›ç¨‹çš„åŸºæœ¬çŠ¶æ€</h4><blockquote>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å°±ç»ª -&gt; æ‰§è¡Œ: è¿›ç¨‹è°ƒåº¦</span><br><span class="line">æ‰§è¡Œ -&gt; å°±ç»ª: ä¸­æ–­ï¼ˆæ—¶é—´ç‰‡å®Œï¼‰</span><br><span class="line">æ‰§è¡Œ -&gt; é˜»å¡: ç­‰å¾…æŸäº‹ä»¶</span><br><span class="line">é˜»å¡ -&gt; å°±ç»ª: äº‹ä»¶å‘ç”Ÿ</span><br></pre></td></tr></table></figure><p>  <img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20220706234334.png" alt="20210708014430"></p></blockquote><h4 id="è¿›ç¨‹è¡¨è¡¨é¡¹ï¼ˆPCBï¼‰"><a href="#è¿›ç¨‹è¡¨è¡¨é¡¹ï¼ˆPCBï¼‰" class="headerlink" title="è¿›ç¨‹è¡¨è¡¨é¡¹ï¼ˆPCBï¼‰"></a>è¿›ç¨‹è¡¨è¡¨é¡¹ï¼ˆPCBï¼‰</h4><blockquote><ul><li>PCBçš„ç»„ç»‡æ–¹å¼<ul><li>é“¾æ¥ç»„ç»‡æ–¹å¼<ul><li>æŠŠå…·æœ‰åŒä¸€çŠ¶æ€çš„PCBé“¾æ¥æˆä¸€ä¸ªé˜Ÿåˆ—</li><li>å°±ç»ªé˜Ÿåˆ—ã€è‹¥å¹²ä¸ªé˜»å¡é˜Ÿåˆ—ã€ç©ºé˜Ÿåˆ—</li></ul></li><li>ç´¢å¼•ç»„ç»‡æ–¹å¼<ul><li>å»ºç«‹ç›¸åº”çš„ç´¢å¼•è¡¨</li><li>å°±ç»ªç´¢å¼•è¡¨ã€é˜»å¡ç´¢å¼•è¡¨ç­‰</li></ul></li></ul></li><li>è¿›ç¨‹çš„æ§åˆ¶<ul><li>è¿›ç¨‹åˆ›å»º<ul><li>åˆ›å»ºåŸå› <ol><li>ç³»ç»Ÿåˆå§‹åŒ–</li><li>æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹è°ƒç”¨åˆ›å»ºè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨</li><li>ç”¨æˆ·è¯·æ±‚åˆ›å»ºä¸€ä¸ªè¿›ç¨‹</li><li>æ‰¹å¤„ç†ä½œä¸šçš„åˆå§‹åŒ–</li></ol></li></ul></li><li>è¿›ç¨‹é˜»å¡<ul><li>é˜»å¡åŸå› <ol><li>è¯·æ±‚ç³»ç»ŸæœåŠ¡</li><li>å¯åŠ¨æŸç§æ“ä½œ</li><li>æ•°æ®å°šæœªåˆ°è¾¾</li><li>æ— æ–°å·¥ä½œè¯¾åš</li></ol></li></ul></li><li>è¿›ç¨‹å”¤é†’</li></ul></li></ul></blockquote><hr><h3 id="2-2-çº¿ç¨‹"><a href="#2-2-çº¿ç¨‹" class="headerlink" title="2.2 çº¿ç¨‹"></a>2.2 çº¿ç¨‹</h3><blockquote><p>  çº¿ç¨‹æ˜¯è½»é‡çº§çš„è¿›ç¨‹ï¼Œæ˜¯ä¸€ä¸ªè¿›ç¨‹å†…çš„åŸºæœ¬è°ƒåº¦å•ä½ï¼Œæœ‰è‡ªå·±çš„<strong>ç¨‹åºè®¡æ•°å™¨</strong>ï¼Œ<strong>å¯„å­˜å™¨åŠå †æ ˆ</strong>ã€‚å…±äº«è¿›ç¨‹çš„èµ„æº</p><ul><li>è¿›ç¨‹æ˜¯èµ„æºç®¡ç†çš„åŸºæœ¬å•ä½</li><li>çº¿ç¨‹æ˜¯è°ƒåº¦çš„åŸºæœ¬å•ä½</li></ul></blockquote><h4 id="çº¿ç¨‹å®ç°"><a href="#çº¿ç¨‹å®ç°" class="headerlink" title="çº¿ç¨‹å®ç°"></a>çº¿ç¨‹å®ç°</h4><blockquote><p>  å®ç°æ–¹å¼</p><ul><li>åœ¨ç”¨æˆ·ç©ºé—´ä¸­å®ç°çº¿ç¨‹<ul><li>ä¼˜ç‚¹<ul><li>å¯ä»¥åœ¨ä¸æ”¯æŒçº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­å®ç°å¤šçº¿ç¨‹ç¼–ç¨‹</li><li>â€¦</li></ul></li><li>ç¼ºç‚¹<ul><li>å®ç°<strong>é˜»å¡ç³»ç»Ÿè°ƒç”¨</strong>å›°éš¾ï¼Œå¦‚ä½•é¿å…è¢«é˜»å¡çº¿ç¨‹å½±å“å…¶ä»–çº¿ç¨‹</li><li>â€¦</li></ul></li></ul></li><li>åœ¨å†…æ ¸ä¸­å®ç°çº¿ç¨‹<ul><li>ä¼˜ç‚¹ï¼š<ul><li>çº¿ç¨‹é˜»å¡æ—¶ï¼Œå¯ä»¥è¿è¡ŒåŒä¸€è¿›ç¨‹ä¸­çš„å¦ä¸€çº¿ç¨‹æˆ–å…¶ä»–è¿›ç¨‹çš„çº¿ç¨‹</li><li>åœ¨é˜»å¡ç³»ç»Ÿè°ƒç”¨å’Œå¤„ç†ç¼ºé¡µé—®é¢˜æ›´æœ‰ä¼˜åŠ¿</li></ul></li><li>ç¼ºç‚¹ï¼š<ul><li>åˆ›å»ºå’Œç»ˆæ­¢çº¿ç¨‹ä»£ä»·è¾ƒå¤§</li></ul></li></ul></li><li>æ··åˆå®ç°</li></ul></blockquote><hr><h3 id="2-3-è¿›ç¨‹é—´é€šä¿¡"><a href="#2-3-è¿›ç¨‹é—´é€šä¿¡" class="headerlink" title="2.3 è¿›ç¨‹é—´é€šä¿¡"></a>2.3 è¿›ç¨‹é—´é€šä¿¡</h3><blockquote><p>  è¿›ç¨‹é—´é€šä¿¡éœ€è¦è§£å†³çš„ä¸‰ä¸ªé—®é¢˜ï¼š</p><ol><li>å¦‚ä½•ç¡®ä¿å¤šä¸ªè¿›ç¨‹åœ¨å…³é”®æ´»åŠ¨ä¸­ä¸ä¼šå†²çª</li><li>å¦‚ä½•ç¡®ä¿å¤šä¸ªåˆä½œè¿›ç¨‹çš„æœ‰åºè¿›è¡Œ</li><li>è¿›ç¨‹é—´å¦‚ä½•ä¼ é€’ä¿¡æ¯</li></ol></blockquote><h4 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h4><blockquote><ul><li>ä¸´ç•Œèµ„æºï¼ˆç«äº‰æ¡ä»¶ï¼‰ï¼šä¸€æ¬¡åªå…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨çš„è½¯ç¡¬ä»¶èµ„æº</li><li>ä¸´ç•ŒåŒºï¼šåœ¨æ¯ä¸ªè¿›ç¨‹ä¸­ï¼Œè®¿é—®ä¸´ç•Œèµ„æºçš„éƒ¨åˆ†</li><li>ä¸¤ç§å½¢å¼åˆ¶çº¦å…³ç³»<ul><li>é—´æ¥ç›¸äº’åˆ¶çº¦ï¼šæºäºè¿›ç¨‹å¯¹èµ„æºçš„ç«äº‰å…±äº« äº’æ–¥</li><li>ç›´æ¥ç›¸äº’åˆ¶çº¦ï¼šæºäºè¿›ç¨‹é—´çš„åˆä½œ åŒæ­¥</li></ul></li><li><strong>è¿›ç¨‹äº’æ–¥</strong>ï¼šä¸€ä¸ªè¿›ç¨‹æ­£åœ¨è®¿é—®ä¸´ç•Œèµ„æºï¼Œå¦ä¸€ä¸ªè¦è®¿é—®è¯¥èµ„æºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾…ã€‚</li><li><strong>è¿›ç¨‹åŒæ­¥</strong>ï¼šåˆä½œå®ŒæˆåŒä¸€ä¸ªä»»åŠ¡çš„å¤šä¸ªè¿›ç¨‹ï¼Œå†æ‰§è¡Œé€Ÿåº¦æˆ–æŸäº›æ—¶åºç‚¹ä¸Šå¿…é¡»ç›¸äº’åè°ƒçš„åˆä½œå…³ç³»</li></ul></blockquote><h4 id="è§£å†³è¿›ç¨‹äº’æ–¥"><a href="#è§£å†³è¿›ç¨‹äº’æ–¥" class="headerlink" title="è§£å†³è¿›ç¨‹äº’æ–¥"></a>è§£å†³è¿›ç¨‹äº’æ–¥</h4><blockquote><p>  å¹¶å‘è¿›ç¨‹äº’æ–¥æ‰§è¡Œå‡†åˆ™ï¼š</p><ul><li>ä¸å‡è®¾å„å¹¶å‘è¿›ç¨‹çš„ç›¸å¯¹æ‰§è¡Œé€Ÿåº¦</li><li>å¤„äºä¸´ç•ŒåŒºå¤–çš„è¿›ç¨‹ä¸èƒ½é˜»æ­¢å…¶ä»–è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒº</li><li>ä»»ä½•æ—¶åˆ»åªå…è®¸ä¸€ä¸ªè¿›ç¨‹å¤„äºä¸´ç•ŒåŒºä¸­</li><li>ä¸èƒ½ä½¿è¿›ç¨‹åœ¨ä¸´ç•ŒåŒºå¤–æ°¸è¿œç­‰å¾…</li></ul><p>  <strong>å±è”½ä¸­æ–­</strong>ï¼šæ¯ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºåå…ˆå…³ä¸­æ–­ï¼Œç¦»å¼€å‰å¼€ä¸­æ–­</p><blockquote><p>  ç¼ºç‚¹ï¼š</p><ul><li>ç®€å•ç²—æš´ï¼Œæ•ˆç‡ä½</li><li>ç³»ç»Ÿå¯èƒ½ç»ˆæ­¢</li><li>å¤šCPUæ—¶æ— ç”¨</li></ul></blockquote><p>  <strong>åŠ é”æ³•</strong>ï¼šç”¨é”å˜é‡æ¥è¡¨ç¤ºä¸´ç•ŒåŒºæ˜¯å¦å¯ç”¨</p><blockquote><p>  ç¼ºç‚¹ï¼š</p><ul><li>ä¸æ–­å¾ªç¯æµ‹è¯•ï¼ŒCPUè´¹æ—¶</li><li><strong>ä¸èƒ½å®ç°ç»å¯¹äº’æ–¥ï¼ˆlockä¸æ˜¯åŸå­æ“ä½œï¼‰</strong></li></ul></blockquote><p>  <strong>ä¸¥æ ¼è½®æ¢æ³•</strong></p><p>  <strong>Petersonè§£å†³æ–¹æ¡ˆ</strong></p><p>  <strong>TSLæŒ‡ä»¤</strong>ï¼šéœ€è¦ç¡¬ä»¶æ”¯æŒ</p></blockquote><h4 id="ä¿¡å·é‡ï¼ˆç¯ï¼‰æœºåˆ¶"><a href="#ä¿¡å·é‡ï¼ˆç¯ï¼‰æœºåˆ¶" class="headerlink" title="ä¿¡å·é‡ï¼ˆç¯ï¼‰æœºåˆ¶"></a>ä¿¡å·é‡ï¼ˆç¯ï¼‰æœºåˆ¶</h4><blockquote><ul><li><p><strong>ä¿¡å·é‡ï¼ˆsemaphoreï¼‰</strong>ï¼šOSä¸­ç”¨äºè¡¨ç¤º<strong>èµ„æº</strong>çš„å®ä½“ï¼Œå…¶å€¼ä»…æœ‰<strong>downï¼Œup</strong>åŸè¯­æ”¹å˜</p></li><li><p><strong>down</strong> &#x3D; <strong>P</strong></p></li><li><p><strong>up</strong> &#x3D; <strong>V</strong></p></li><li><p>è®¾sä¸ºsemaphoreä¿¡å·é‡ï¼Œåˆ™ï¼š</p><ul><li>å½“<strong>s &gt;&#x3D; 0</strong>æ—¶ï¼Œè¡¨ç¤ºå¯ä¾›å¹¶å‘è¿›ç¨‹ä½¿ç”¨çš„èµ„æºæ•°</li><li>å½“<strong>s &lt; 0</strong>æ—¶ï¼Œ**|s|**è¡¨ç¤ºç­‰å¾…ä½¿ç”¨sèµ„æºçš„è¿›ç¨‹æ•°</li></ul></li></ul></blockquote><h4 id="ä¿¡å·é‡è§£å†³è¿›ç¨‹äº’æ–¥"><a href="#ä¿¡å·é‡è§£å†³è¿›ç¨‹äº’æ–¥" class="headerlink" title="ä¿¡å·é‡è§£å†³è¿›ç¨‹äº’æ–¥"></a>ä¿¡å·é‡è§£å†³è¿›ç¨‹äº’æ–¥</h4><blockquote>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">semaphore mutex;</span><br><span class="line">mutex = 1;</span><br></pre></td></tr></table></figure><p>  å¯¹mutexæ‰§è¡Œ<strong>Pã€V</strong>æ“ä½œ</p></blockquote><h4 id="ä¿¡å·é‡è§£å†³è¿›ç¨‹åŒæ­¥"><a href="#ä¿¡å·é‡è§£å†³è¿›ç¨‹åŒæ­¥" class="headerlink" title="ä¿¡å·é‡è§£å†³è¿›ç¨‹åŒæ­¥"></a>ä¿¡å·é‡è§£å†³è¿›ç¨‹åŒæ­¥</h4><blockquote><ul><li>æœ‰å“ªäº›ä¸´ç•Œèµ„æºï¼Ÿ</li><li>æœ‰å“ªäº›å¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹ï¼Ÿ</li><li>â€¦â€¦</li></ul></blockquote><h4 id="ä¿¡å·é‡æœºåˆ¶æ€»ç»“"><a href="#ä¿¡å·é‡æœºåˆ¶æ€»ç»“" class="headerlink" title="ä¿¡å·é‡æœºåˆ¶æ€»ç»“"></a>ä¿¡å·é‡æœºåˆ¶æ€»ç»“</h4><blockquote><ul><li>ç»Ÿä¸€ä¿¡å·é‡Sçš„<strong>Pã€V</strong>æ“ä½œå¿…é¡»æˆå¯¹å‡ºç°ï¼Œæœ‰ä¸€ä¸ª**P(S)<strong>æ“ä½œå°±ä¸€å®šæœ‰ä¸€ä¸ªå¯¹åº”çš„</strong>V(S)**æ“ä½œ<ul><li>è¿›ç¨‹äº’æ–¥æ—¶ï¼Œå®ƒä»¬å¤„åœ¨<strong>åŒä¸€è¿›ç¨‹</strong></li><li>è¿›ç¨‹åŒæ­¥æ—¶ï¼Œå®ƒä»¬ä¸åœ¨<strong>åŒä¸€è¿›ç¨‹</strong></li></ul></li><li>ä¸€ä¸ª<strong>åŒæ­¥P</strong>æ“ä½œä¸ä¸€ä¸ª<strong>äº’æ–¥P</strong>æ“ä½œåœ¨ä¸€èµ·æ—¶ï¼Œ<strong>åŒæ­¥P</strong>æ“ä½œåœ¨<strong>äº’æ–¥P</strong>æ“ä½œå‰</li></ul></blockquote><h3 id="2-5å¤„ç†æœºè°ƒåº¦"><a href="#2-5å¤„ç†æœºè°ƒåº¦" class="headerlink" title="2.5å¤„ç†æœºè°ƒåº¦"></a>2.5å¤„ç†æœºè°ƒåº¦</h3><h4 id="è°ƒåº¦æ¦‚è¿°"><a href="#è°ƒåº¦æ¦‚è¿°" class="headerlink" title="è°ƒåº¦æ¦‚è¿°"></a>è°ƒåº¦æ¦‚è¿°</h4><blockquote><ul><li><p>è¿›ç¨‹è°ƒåº¦</p></li><li><p>åŠŸèƒ½ï¼š</p><ul><li>è®°å½•ç³»ç»Ÿä¸­æ‰€æœ‰è¿›ç¨‹çš„æ‰§è¡Œæƒ…å†µ</li><li>é€‰æ‹©å æœ‰å¤„ç†æœºçš„è¿›ç¨‹</li><li>è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢</li></ul></li><li><p>æ—¶æœºï¼š</p><ul><li>æ­£å¸¸æ‰§è¡Œç»“æŸ</li><li>è¿›ç¨‹é˜»å¡ç­‰å¾…</li><li>æ‰§è¡Œäº†æŸäº›åŸè¯­ï¼ˆPï¼ŒVï¼‰</li><li>ä»ç³»ç»Ÿæ€è¿”å›ç”¨æˆ·æ€</li><li>åœ¨æŠ¢å å¼è°ƒåº¦ä¸­ï¼Œé«˜ä¼˜å…ˆçº§è¿›ç¨‹è¿›å…¥å°±ç»ªé˜Ÿåˆ—</li><li>åˆ†æ—¶ç³»ç»Ÿä¸­ï¼Œåˆ†é…çš„æ—¶é—´ç‰‡ç”¨å®Œ</li></ul></li><li><p>è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æ­¥éª¤</p></li><li><p>è°ƒåº¦æ–¹å¼ï¼š</p><ul><li>éæŠ¢å å¼ï¼šè¿›ç¨‹ä¸€ç›´æ‰§è¡Œä¸‹å»ï¼Œç›´åˆ°å®Œæˆæœ¬æ¬¡CPUå‘¨æœŸ</li><li>æŠ¢å å¼ï¼šå¼ºè¡Œå‰¥å¤ºæ­£åœ¨æ‰§è¡Œè¿›ç¨‹çš„CPUï¼Œå¹¶å°†CPUåˆ†é…ç»™å¦ä¸€è¿›ç¨‹</li></ul></li><li><p>è°ƒåº¦çš„åŸºæœ¬å‡†åˆ™</p></li><li><p>ä½œä¸šæˆ–è¿›ç¨‹è°ƒåº¦çš„ä¸»è¦æ€§èƒ½è¯„ä»·æŒ‡æ ‡</p><ul><li><p>é¢å‘<strong>ç³»ç»Ÿ</strong>çš„æŒ‡æ ‡ï¼š</p><ul><li>ç³»ç»Ÿååé‡â€”â€”æŒ‡åœ¨å•ä½æ—¶é—´å†…å®Œæˆçš„ä½œä¸šæ•°</li><li>å¤„ç†æœºåˆ©ç”¨ç‡</li><li>å„ç±»èµ„æºçš„å¹³è¡¡åˆ©ç”¨ç‡</li></ul></li><li><p>é¢å‘<strong>ç”¨æˆ·</strong>çš„æŒ‡æ ‡ï¼š</p><ul><li><p>å¹³å‡å‘¨è½¬æ—¶é—´<strong>T</strong>ï¼š</p></li><li><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221204234355.png" alt="image-20210707223837426"><br>$$<br>T &#x3D; \frac{ä½œä¸šå®Œæˆæ—¶é—´}{ä½œä¸šæ•°}<br>$$</p></li><li><p>å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´**Tâ€™**ï¼š<br>$$<br>T_iâ€™ &#x3D; \frac{T_i}{t_iï¼ˆå®é™…è¿è¡Œæ—¶é—´ï¼‰}<br>$$</p><p>$$<br>Tâ€™ &#x3D; \sum_{i&#x3D;1}^n Tâ€™_i<br>$$</p></li><li><p>å¹³å‡ç­‰å¾…æ—¶é—´<strong>W</strong>ï¼ˆä¸»è¦é’ˆå¯¹è¿›ç¨‹è€Œè¨€ï¼‰ï¼š<br>$$<br>{W}_i &#x3D; {T}_ip-{T}_ir<br>$$</p><p>$$<br>W &#x3D; \sum_i^{n}Wi<br>$$</p></li></ul></li></ul></li></ul></blockquote><h4 id="éå®æ—¶è°ƒåº¦ç®—æ³•"><a href="#éå®æ—¶è°ƒåº¦ç®—æ³•" class="headerlink" title="éå®æ—¶è°ƒåº¦ç®—æ³•"></a>éå®æ—¶è°ƒåº¦ç®—æ³•</h4><blockquote><ul><li><p><strong>å…ˆæ¥å…ˆæœåŠ¡ç®—æ³•ï¼ˆFCFSï¼‰</strong>ï¼šæŒ‰åˆ°æ¥çš„å…ˆåæ¬¡åºè¿›è¡Œè°ƒåº¦</p><ul><li>ç‰¹ç‚¹ï¼šæ‰§è¡Œæ—¶é—´çŸ­çš„è¿›ç¨‹æˆ–ä½œä¸šç­‰å¾…æ—¶é—´å°†é•¿</li></ul></li><li><p><strong>æœ€çŸ­ä½œä¸š&#x2F;è¿›ç¨‹æœ‰é™ç®—æ³•ï¼ˆSJF&#x2F;SPFï¼‰</strong>ï¼šé€‰æ‹©ä¼°è®¡éœ€è¦æ‰§è¡Œæ—¶é—´æœ€çŸ­çš„æŠ•å…¥è¿è¡Œ</p><ul><li>ç‰¹ç‚¹ï¼šååé‡å¤§</li><li>å¯¹ä¸æ–­æœ‰ä½œä¸šè¿›å…¥çš„ç³»ç»Ÿï¼Œé•¿ä½œä¸šå°†å¾—ä¸åˆ°æ‰§è¡Œ</li></ul></li><li><p><strong>å“åº”æ¯”é«˜æœ‰é™è°ƒåº¦ç®—æ³•ï¼ˆHRNï¼‰</strong>ï¼šé€‰æ‹©å“åº”æ¯”æœ€å¤§çš„è¿è¡Œ<br>$$<br>R&#x3D;\frac{ç­‰å¾…æ—¶é—´+è¦æ±‚æœåŠ¡æ—¶é—´}{è¦æ±‚æœåŠ¡æ—¶é—´}&#x3D;\frac{å“åº”æ—¶é—´}{è¦æ±‚æœåŠ¡æ—¶é—´}<br>$$</p><ul><li>ç‰¹ç‚¹ï¼šä»‹äºFCFSä¸SJFä¹‹é—´ï¼Œååé‡å‡å°‘ï¼Œå¢åŠ äº†ç³»ç»Ÿå¼€é”€</li></ul></li><li><p><strong>è½®è½¬è°ƒåº¦ç®—æ³•ï¼ˆRRï¼‰</strong>ï¼ˆé€‚ç”¨äºè¿›ç¨‹è°ƒåº¦ï¼‰ï¼šå°†CPUæ—¶é—´åˆ’åˆ†æˆæ—¶é—´ç‰‡ï¼Œæ¯ä¸ªè¿›ç¨‹è½®æµä½¿ç”¨æ—¶é—´ç‰‡</p><ul><li>ç‰¹åˆ«é€‚åˆäºåˆ†æ—¶ç³»ç»Ÿçš„å¯æŠ¢å æ–¹å¼çš„è°ƒåº¦ç®—æ³•</li><li>æ—¶é—´ç‰‡qä»<strong>å‡ ms~å‡ ç™¾ms</strong></li><li>å†³å®šå› ç´ <ul><li>ç³»ç»Ÿå¯¹ç›¸åº”æ—¶é—´çš„è¦æ±‚ï¼š<strong>T &#x3D; Nq</strong></li><li>å°±ç»ªé˜Ÿåˆ—ä¸­è¿›ç¨‹çš„æ•°ç›®</li><li>ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›</li></ul></li></ul></li><li><p><strong>ä¼˜å…ˆçº§è°ƒåº¦</strong>ï¼šé€‰æ‹©ä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹æ‰§è¡Œ</p></li><li><p>â€¦</p></li></ul></blockquote><h4 id="å®æ—¶è°ƒåº¦ç®—æ³•"><a href="#å®æ—¶è°ƒåº¦ç®—æ³•" class="headerlink" title="å®æ—¶è°ƒåº¦ç®—æ³•"></a>å®æ—¶è°ƒåº¦ç®—æ³•</h4><blockquote><ul><li><p>ç¡¬å®æ—¶ä»»åŠ¡ï¼šç³»ç»Ÿå¿…é¡»å®Œå…¨æ»¡è¶³ä»»åŠ¡çš„æ—¶é™è¦æ±‚</p></li><li><p>è½¯å®æ—¶ä»»åŠ¡ï¼šå…è®¸ç³»ç»Ÿå¯¹ä»»åŠ¡çš„æ—¶é™è¦æ±‚æœ‰ä¸€å®šçš„å»¶è¿Ÿ</p></li><li><p><strong>æ—¶é™è°ƒåº¦ç®—æ³•</strong>ï¼šé€‰æ‹©<strong>æ—¶é™</strong>è¦æ±‚æœ€è¿‘çš„ä»»åŠ¡ä¼˜å…ˆå æœ‰å¤„ç†æœº</p></li><li><p><strong>é¢‘ç‡å•è°ƒè°ƒåº¦ç®—æ³•</strong>ï¼šå‘¨æœŸé•¿ï¼ˆé¢‘ç‡ä½ï¼‰çš„ä»»åŠ¡ä¼˜å…ˆçº§è¶Šä½ï¼ˆé€‚ç”¨äºå‘¨æœŸæ€§å®æ—¶ä»»åŠ¡ï¼‰</p><ul><li><p>å®æ—¶ç³»ç»Ÿå¯è°ƒåº¦æ¡ä»¶ï¼šå¯¹nä¸ªå‘¨æœŸä¸åŒçš„ä»»åŠ¡ï¼Œå‘¨æœŸä¸ºTiï¼Œæ‰§è¡Œæ—¶é—´ä¸ºti</p></li><li><p><img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20210707223816.png" alt="image-20210707223814477"><br>$$<br>\frac{t_1}{T_1}+\frac{t_2}{T_2}+â€¦+\frac{t_n}{T_n} &lt;&#x3D; n(2^\frac{1}{n}-1)<br>$$</p></li></ul></li></ul></blockquote><h4 id="çº¿ç¨‹è°ƒåº¦"><a href="#çº¿ç¨‹è°ƒåº¦" class="headerlink" title="çº¿ç¨‹è°ƒåº¦"></a>çº¿ç¨‹è°ƒåº¦</h4><hr><h2 id="ç¬¬ä¸‰ç« -æ­»é”"><a href="#ç¬¬ä¸‰ç« -æ­»é”" class="headerlink" title="ç¬¬ä¸‰ç«  æ­»é”"></a>ç¬¬ä¸‰ç«  æ­»é”</h2><h3 id="3-1-èµ„æº"><a href="#3-1-èµ„æº" class="headerlink" title="3.1 èµ„æº"></a>3.1 èµ„æº</h3><blockquote><ul><li>å¯æŠ¢å èµ„æº</li><li>ä¸å¯æŠ¢å èµ„æº</li></ul></blockquote><blockquote><ul><li>ä½¿ç”¨ä¸€ä¸ªèµ„æºçš„é¡ºåº<ol><li>è¯·æ±‚èµ„æº</li><li>ä½¿ç”¨èµ„æº</li><li>é‡Šæ”¾èµ„æº</li><li>è‹¥è¯·æ±‚å¤±è´¥ï¼Œæœ‰çš„ç³»ç»Ÿè¿›ç¨‹å°†è‡ªåŠ¨è¢«é˜»å¡ï¼Œèµ„æºå¯ç”¨æ—¶å”¤é†’ï¼›æœ‰çš„ç³»ç»Ÿä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ä»£ç ï¼Œè¯·æ±‚è¿›ç¨‹ç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•</li></ol></li></ul></blockquote><h3 id="3-2-æ­»é”æ¦‚è¿°"><a href="#3-2-æ­»é”æ¦‚è¿°" class="headerlink" title="3.2 æ­»é”æ¦‚è¿°"></a>3.2 æ­»é”æ¦‚è¿°</h3><blockquote><ul><li>æ­»é”å®šä¹‰ï¼šå¦‚æœä¸€ä¸ªè¿›ç¨‹é›†åˆä¸­çš„æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨<strong>ç­‰å¾…</strong>åªèƒ½ç”±è¯¥è¿›ç¨‹é›†åˆä¸­çš„<strong>å…¶ä»–è¿›ç¨‹</strong>æ‰èƒ½å¼•å‘çš„<strong>äº‹ä»¶</strong>ï¼Œé‚£ä¹ˆï¼Œè¯¥è¿›ç¨‹é›†åˆæ˜¯æ­»é”çš„ã€‚</li><li><strong>äº‹ä»¶</strong>æ˜¯æŒ‡é‡Šæ”¾è¯¥è¿›ç¨‹é›†åˆä¸­å…¶ä»–è¿›ç¨‹æ‰€å æœ‰çš„èµ„æºâ€”â€”èµ„æºæ­»é”</li><li>è¯¥é›†åˆä¸­æ²¡æœ‰ä»»ä½•è¿›ç¨‹ä¼šï¼š<strong>è¿è¡Œã€é‡Šæ”¾èµ„æºã€è¢«å”¤é†’</strong></li></ul></blockquote><blockquote><ul><li>å››ä¸ªå¿…è¦æ¡ä»¶<ul><li><strong>äº’æ–¥æ¡ä»¶</strong></li><li><strong>å æœ‰å’Œç­‰å¾…</strong></li><li><strong>ä¸å¯æŠ¢å æ¡ä»¶</strong></li><li><strong>ç¯è·¯ç­‰å¾…æ¡ä»¶</strong></li></ul></li></ul></blockquote><blockquote><ul><li>æ­»é”å»ºæ¨¡</li><li><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20220623235543.png" alt="image-20210706230209431"></li><li><strong>åœ†åœˆ</strong>è¡¨ç¤ºè¿›ç¨‹</li><li><strong>æ–¹æ¡†</strong>è¡¨ç¤ºèµ„æº</li></ul></blockquote><blockquote><ul><li>å››ç§å¤„ç†æ­»é”çš„ç­–ç•¥<ul><li>å¿½ç•¥è¯¥é—®é¢˜ï¼ˆé¸µé¸Ÿç®—æ³•ï¼‰</li><li>æ£€æµ‹æ­»é”å¹¶æ¢å¤ï¼ˆè§£é™¤æ­»é”ï¼‰</li><li>ä»”ç»†å¯¹èµ„æºè¿›è¡Œåˆ†é…ï¼ŒåŠ¨æ€åœ°é¿å…æ­»é”</li><li>é€šè¿‡ç ´åå¼•èµ·æ­»é”çš„å››ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼Œé˜²æ­¢æ­»é”çš„å‘ç”Ÿ</li></ul></li></ul></blockquote><blockquote><ul><li>å‡è®¾æœ‰mä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹éœ€è¦nä¸ªåŒç±»èµ„æºï¼Œæœ€å®¹æ˜“å‘ç”Ÿæ­»é”æ—¶æ˜¯(n-1,n-1,n-1â€¦,n-1)æ—¶ï¼Œæ¯ä¸ªè¿›ç¨‹è¯·æ±‚æœ€åä¸€ä¸ªã€‚</li><li>å³ï¼Œæœ€å°‘éœ€è¦<strong>m * (n-1) + 1</strong>ä¸ªèµ„æº</li></ul></blockquote><h3 id="3-3-é¸µé¸Ÿç®—æ³•"><a href="#3-3-é¸µé¸Ÿç®—æ³•" class="headerlink" title="3.3 é¸µé¸Ÿç®—æ³•"></a>3.3 é¸µé¸Ÿç®—æ³•</h3><blockquote><ul><li>å‡è£…æ²¡æœ‰é—®é¢˜å‘ç”Ÿ</li><li>é€‚ç”¨æ¡ä»¶<ul><li>æ­»é”å‘ç”Ÿçš„é¢‘ç‡å¾ˆå°</li><li>é¢„é˜²æ­»é”ä¼šä»˜å‡ºå¾ˆå¤§çš„ä»£ä»·</li></ul></li></ul></blockquote><h3 id="3-4-æ­»é”æ£€æµ‹å’Œæ­»é”æ¢å¤"><a href="#3-4-æ­»é”æ£€æµ‹å’Œæ­»é”æ¢å¤" class="headerlink" title="3.4 æ­»é”æ£€æµ‹å’Œæ­»é”æ¢å¤"></a>3.4 æ­»é”æ£€æµ‹å’Œæ­»é”æ¢å¤</h3><blockquote><ul><li><p>å››ç§æ•°æ®ç»“æ„</p><ul><li>ç°æœ‰èµ„æºçŸ©é˜µ<strong>E</strong></li><li>å¯ç”¨èµ„æºçŸ©é˜µ<strong>A</strong></li><li>å½“å‰åˆ†é…çŸ©é˜µ<strong>C</strong></li><li>è¯·æ±‚çŸ©é˜µ<strong>R</strong></li></ul></li><li><p>æ­»é”æ£€æµ‹æ–¹æ³•ï¼š</p><ol><li>æ‰¾åˆ°ä¸€ä¸ª<strong>C</strong>çŸ©é˜µä¸­çš„ä¸€è¡Œå‘é‡C_iï¼ˆä¸€ä¸ªè¿›ç¨‹ï¼‰ï¼Œå®ƒå¯ä»¥è¢«å¯ç”¨èµ„æºçŸ©é˜µ<strong>A</strong>æ»¡è¶³ï¼Œæ ‡è®°è¯¥å‘é‡</li><li>C_ié‡Šæ”¾èµ„æºï¼ŒçŸ©é˜µ<strong>A</strong>åŠ ä¸ŠC_ié‡Šæ”¾çš„èµ„æº</li><li>ç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ªå‘é‡</li><li>å¦‚æœæœ€ç»ˆæœ‰æ²¡æœ‰è¢«æ»¡è¶³çš„å‘é‡ï¼Œç³»ç»Ÿå°†è¿›å…¥æ­»é”</li></ol></li><li><p>ä¾‹å­</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20220623235543.png" alt="20210706230211"></p></li><li><p>æ­»é”æ¢å¤</p><ul><li><strong>é€šè¿‡æŠ¢å æ¢å¤</strong></li><li><strong>é€šè¿‡å›æ»šæ¢å¤</strong></li><li><strong>é€šè¿‡æ€æ­»è¿›ç¨‹æ¢å¤</strong></li></ul></li></ul></blockquote><h3 id="3-5-æ­»é”é¿å…"><a href="#3-5-æ­»é”é¿å…" class="headerlink" title="3.5 æ­»é”é¿å…"></a>3.5 æ­»é”é¿å…</h3><blockquote><ul><li>åœ¨èµ„æºçš„åŠ¨æ€åˆ†é…ä¸­ï¼Œç”¨æŸç§æ–¹æ³•é˜²æ­¢ç³»ç»Ÿè¿›å…¥<strong>ä¸å®‰å…¨çŠ¶æ€</strong></li><li><strong>å®‰å…¨çŠ¶æ€</strong>ï¼šç°æœ‰çš„è¿›ç¨‹èµ„æºå æœ‰æƒ…å†µä¸‹ï¼Œå„è¿›ç¨‹æŒ‰æŸç§æ¨è¿›é¡ºåºä»ç„¶å¯ä»¥ä½¿æ¯ä¸ªè¿›ç¨‹å¾—åˆ°èµ„æºæœ€å¤§éœ€æ±‚ã€‚</li></ul></blockquote><h3 id="é¿å…æ­»é”â€”â€”é“¶è¡Œå®¶ç®—æ³•"><a href="#é¿å…æ­»é”â€”â€”é“¶è¡Œå®¶ç®—æ³•" class="headerlink" title="é¿å…æ­»é”â€”â€”é“¶è¡Œå®¶ç®—æ³•"></a>é¿å…æ­»é”â€”â€”é“¶è¡Œå®¶ç®—æ³•</h3><blockquote><ul><li><p>å’Œæ­»é”æ£€æµ‹æœ‰ç±»ä¼¼çš„åœ°æ–¹ï¼Œä¸åŒç‚¹åœ¨äºï¼š</p><ul><li>æ²¡æœ‰ç°æœ‰èµ„æºçŸ©é˜µï¼Œåªæœ‰<strong>å¯ç”¨èµ„æºçŸ©é˜µï¼ˆAvailableï¼‰</strong></li><li>æ²¡æœ‰è¯·æ±‚çŸ©é˜µï¼ˆRequestï¼‰ï¼Œåªæœ‰<strong>éœ€æ±‚çŸ©é˜µï¼ˆneedï¼‰</strong></li><li>åŠ å…¥<strong>æœ€å¤§éœ€æ±‚çŸ©é˜µï¼ˆMaxï¼‰</strong></li></ul></li><li><p>æ•°é‡å…³ç³»ï¼š</p></li><li><p>$$<br>Max[i] &#x3D; Allocation[i] + Need[i]<br>$$</p></li><li><p>è¯•æ¢æ€§åˆ†é…åè¿›è¡Œå®‰å…¨çŠ¶æ€åˆ¤æ–­</p></li></ul></blockquote><h3 id="3-6-æ­»é”é¢„é˜²â€”â€”ç ´åå¿…è¦æ¡ä»¶"><a href="#3-6-æ­»é”é¢„é˜²â€”â€”ç ´åå¿…è¦æ¡ä»¶" class="headerlink" title="3.6 æ­»é”é¢„é˜²â€”â€”ç ´åå¿…è¦æ¡ä»¶"></a>3.6 æ­»é”é¢„é˜²â€”â€”ç ´åå¿…è¦æ¡ä»¶</h3><blockquote><ul><li>ç ´åäº’æ–¥æ¡ä»¶<ul><li>é¿å…åˆ†é…ä¸å¿…è¦çš„èµ„æº</li><li>å°½å¯èƒ½å°‘çš„è¿›ç¨‹çœŸæ­£ç”³è¯·</li><li>æ¯”å¦‚æ‰“å°æœºçš„å‡è„±æœºæŠ€æœ¯</li></ul></li><li>ç ´åå æœ‰ä¸”ç­‰å¾…æ¡ä»¶<ul><li>ä¸€æ¬¡æ€§è·å–æ‰€éœ€çš„å…¨éƒ¨èµ„æº</li></ul></li><li>ç ´åä¸å¯æŠ¢å æ¡ä»¶</li><li>ç ´åç¯è·¯ç­‰å¾…æ¡ä»¶</li></ul></blockquote><h3 id="3-7-å…¶ä»–é—®é¢˜"><a href="#3-7-å…¶ä»–é—®é¢˜" class="headerlink" title="3.7 å…¶ä»–é—®é¢˜"></a>3.7 å…¶ä»–é—®é¢˜</h3><blockquote><ul><li>æ´»é”<ul><li>CPUæ€»æ˜¯è¢«æ¶ˆè€—å®Œ</li><li>åŸå› æ˜¯è½®è¯¢å¯è¿›å…¥ä¸´ç•ŒåŒºæˆ–è·å–èµ„æº</li></ul></li><li>é¥¥é¥¿<ul><li>ç”±äºåˆ†é…èµ„æºçš„ç®—æ³•å¯¼è‡´æŸäº›è¿›ç¨‹å¾—ä¸åˆ°æœåŠ¡</li><li>åŸå› æ˜¯ç³»ç»Ÿæ€»æ˜¯è®©çŸ­è¿›ç¨‹å…ˆæ‰§è¡Œï¼ŒçŸ­è¿›ç¨‹æºæºä¸æ–­</li><li>è§£å†³åŠæ³•æ˜¯é€šè¿‡<strong>å…ˆæ¥å…ˆæœåŠ¡</strong>åˆ†é…èµ„æº</li></ul></li></ul></blockquote><hr><h2 id="ç¬¬å››ç« -å­˜å‚¨ç®¡ç†"><a href="#ç¬¬å››ç« -å­˜å‚¨ç®¡ç†" class="headerlink" title="ç¬¬å››ç«  å­˜å‚¨ç®¡ç†"></a>ç¬¬å››ç«  å­˜å‚¨ç®¡ç†</h2><h3 id="åºè¨€"><a href="#åºè¨€" class="headerlink" title="åºè¨€"></a>åºè¨€</h3><blockquote><ul><li>å­˜å‚¨ç®¡ç†å™¨ï¼ˆmemory managerï¼‰<ul><li>å†…å­˜åˆ†é…ä¸å›æ”¶</li><li>å†…å­˜ç©ºé—´ç®¡ç†</li><li>åœ°å€æ˜ å°„ï¼ˆé‡å®šä½ï¼‰</li><li>å­˜å‚¨ä¿æŠ¤</li><li>å¤„ç†å†…å­˜è¶…è½½</li></ul></li><li>å†…å­˜åˆ†é…æ–¹å¼<ul><li><strong>è¿ç»­åˆ†é…</strong><ul><li>å•ä¸€è¿ç»­åˆ†é…</li><li><strong>å›ºå®šåˆ†åŒºåˆ†é…</strong></li><li><strong>åŠ¨æ€åˆ†åŒºåˆ†é…</strong></li></ul></li><li><strong>ç¦»æ•£åˆ†é…</strong><ul><li><strong>åˆ†é¡µ</strong></li><li><strong>åˆ†æ®µ</strong></li><li><strong>æ®µé¡µ</strong></li></ul></li></ul></li><li>ç¨‹åºé“¾æ¥<ul><li>é™æ€é“¾æ¥<ul><li>è£…å…¥å‰é“¾æ¥æˆä¸ºä¸€ä¸ªå®Œæ•´æ¨¡å—</li></ul></li><li>è£…å…¥æ—¶åŠ¨æ€é“¾æ¥<ul><li>è¿è¡Œå‰è¾¹è£…å…¥è¾¹é“¾æ¥</li></ul></li><li>è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥<ul><li>è¿è¡Œæ—¶éœ€è¦ç›®æ ‡æ¨¡å—æ‰è¿›è¡Œé“¾æ¥è£…å…¥</li></ul></li></ul></li><li>åœ°å€æ˜ å°„ï¼ˆåœ°å€é‡å®šä½ ï¼‰<ul><li>ç”¨æˆ·ç¨‹åºè£…å…¥å†…å­˜æ—¶ï¼Œå¯¹ç›®æ ‡ç¨‹åºæœ‰å…³æŒ‡ä»¤å’Œæ•°æ®çš„åœ°å€éƒ¨åˆ†çš„ä¿®æ”¹</li><li><strong>é€»è¾‘åœ°å€</strong>â€“&gt;<strong>ç‰©ç†åœ°å€</strong></li><li>åœ°å€æ˜ å°„çš„æ–¹å¼<ul><li>é™æ€é‡å®šä½ï¼ˆå¯é‡å®šä½è£…å…¥ï¼‰<ul><li>ä¸ºç¨‹åºåˆ†é…å†…å­˜æ—¶ï¼Œå¿…é¡»åˆ†é…å…¨éƒ¨å†…å­˜ç©ºé—´</li></ul></li><li>åŠ¨æ€é‡å®šä½ï¼ˆåŠ¨æ€è¿è¡Œæ—¶è£…å…¥ï¼‰<ul><li>éœ€è¦<strong>é‡å®šä½å¯„å­˜å™¨</strong>æ”¯æŒ</li><li>åœ°å€è½¬æ¢æ¨è¿Ÿåœ¨<strong>ç¨‹åºçœŸæ­£è¦æ‰§è¡Œæ—¶æ‰è¿›è¡Œ</strong></li></ul></li></ul></li></ul></li><li>å­˜å‚¨ä¿æŠ¤ï¼šä¿å­˜åœ¨å†…å­˜ä¸­çš„å¤šé“ç¨‹åºï¼Œåªèƒ½åœ¨ç»™å®šçš„å­˜å‚¨åŒºåŸŸå†…æ´»åŠ¨å¹¶äº’è¡¥äº§ç”Ÿå¹²æ‰°<ul><li>é˜²æ­¢åœ°å€è¶Šç•Œ</li><li>é˜²æ­¢è¶Šæƒ</li><li>ä½¿ç”¨<strong>åŸºå€å¯„å­˜å™¨ï¼ˆé‡å®šä½å¯„å­˜å™¨ï¼‰</strong>å’Œ<strong>å±Šåœ°å€å¯„å­˜å™¨ï¼ˆç•Œé™å¯„å­˜å™¨ï¼‰</strong>å®ç°</li></ul></li><li>å†…å­˜è¶…è½½ï¼šæ‰€æœ‰è¿›ç¨‹æ‰€éœ€çš„å†…å­˜ç©ºé—´æ€»å’Œé€šå¸¸è¶…å‡ºç‰©ç†å†…å­˜å®é™…èƒ½å¤Ÿæ”¯æŒçš„èŒƒå›´<ul><li><strong>äº¤æ¢æŠ€æœ¯</strong></li><li><strong>è¦†ç›–æŠ€æœ¯</strong></li><li><strong>è™šæ‹Ÿå†…å­˜</strong></li></ul></li></ul></blockquote><h3 id="4-1-æ— å­˜å‚¨å™¨æŠ½è±¡"><a href="#4-1-æ— å­˜å‚¨å™¨æŠ½è±¡" class="headerlink" title="4.1 æ— å­˜å‚¨å™¨æŠ½è±¡"></a>4.1 æ— å­˜å‚¨å™¨æŠ½è±¡</h3><blockquote><ul><li><p>ç¨‹åºç›´æ¥è®¿é—®ç‰©ç†å†…å­˜</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20220624000133.png" alt="20210707134238"></p></li><li><p>å¤šé“ç³»ç»Ÿ</p><ul><li>é‡‡ç”¨<strong>è¿ç»­åˆ†åŒºåˆ†é…</strong>æ–¹å¼ï¼Œéœ€è¦è§£å†³<strong>å­˜å‚¨ä¿æŠ¤</strong>å’Œ<strong>é‡å®šä½</strong>é—®é¢˜</li><li>ä¿æŠ¤é”®æŠ€æœ¯ï¼šå†…å­˜æ¯å—ä¸€ä¸ª<strong>4ä½</strong>ä¿æŠ¤é”®ï¼Œé€šè¿‡ä¿æŠ¤é”®å’Œ<strong>PSW</strong>ä¸­å¯¹åº”çš„4ä½ç æ¥é˜²æ­¢è¿›ç¨‹é—´çš„äº’ç›¸å¹²æ‰°</li><li><strong>é™æ€é‡å®šä½</strong>ï¼š<del>ç¨‹åºåœ¨è£…å…¥å†…å­˜æ—¶ï¼Œç”±è£…è½½å™¨å¯¹ç›¸å…³åœ°å€è¿›è¡Œä¸€æ¬¡æ€§æ˜ å°„</del>ï¼ˆç‰©ç†åœ°å€&#x3D;é€»è¾‘åœ°å€åŠ ä¸Šåç§»é‡ï¼‰</li></ul></li><li><p>ç”±äºå°†ç‰©ç†åœ°å€å®Œå…¨æš´éœ²ç»™ç”¨æˆ·è¿›ç¨‹ï¼Œæ‰€ä»¥</p><ul><li>ç”¨æˆ·è¿›ç¨‹å¯èƒ½ç ´åæ“ä½œç³»ç»Ÿ</li><li>å¤šé“ç¨‹åºè®¾è®¡å›°éš¾</li></ul></li><li><p>æ‰€ä»¥éœ€è¦è¿›è¡Œå­˜å‚¨å™¨æŠ½è±¡</p></li></ul></blockquote><h3 id="4-2-å­˜å‚¨å™¨æŠ½è±¡-åœ°å€ç©ºé—´"><a href="#4-2-å­˜å‚¨å™¨æŠ½è±¡-åœ°å€ç©ºé—´" class="headerlink" title="4.2 å­˜å‚¨å™¨æŠ½è±¡ åœ°å€ç©ºé—´"></a>4.2 å­˜å‚¨å™¨æŠ½è±¡ åœ°å€ç©ºé—´</h3><blockquote><ul><li><strong>è¿›ç¨‹å¯ç”¨äºå¯»å€å†…å­˜</strong>çš„ä¸€å¥—åœ°å€é›†åˆ</li><li><strong>æœ¬è´¨</strong>ï¼šå†…å­˜ç©ºé—´ï¼ˆç‰©ç†åœ°å€ç©ºé—´ï¼‰çš„ä¸€éƒ¨åˆ†</li><li>æ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹äºå…¶ä»–è¿›ç¨‹çš„è‡ªå·±çš„åœ°å€ç©ºé—´</li><li>é€šè¿‡<strong>åŠ¨æ€é‡å®šä½</strong>å®ç°</li><li>ç¡¬ä»¶æ”¯æŒ<ul><li><strong>åŸºå€å¯„å­˜å™¨</strong></li><li><strong>ç•Œé™å¯„å­˜å™¨</strong></li></ul></li></ul></blockquote><h4 id="äº¤æ¢æŠ€æœ¯ï¼ˆswappingï¼‰"><a href="#äº¤æ¢æŠ€æœ¯ï¼ˆswappingï¼‰" class="headerlink" title="äº¤æ¢æŠ€æœ¯ï¼ˆswappingï¼‰"></a>äº¤æ¢æŠ€æœ¯ï¼ˆswappingï¼‰</h4><blockquote><ul><li><p>å¤„ç†å†…å­˜è¶…è½½çš„ç®€å•æ–¹æ³•</p></li><li><p>ç©ºé—²å†…å­˜çš„ç®¡ç†ï¼šè·Ÿè¸ªå†…å­˜æƒ…å†µ</p></li><li><p><strong>ä½å›¾</strong>ï¼šå¦‚å›¾</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221204234610.png" alt="20210707140307"></p></li><li><p><strong>é“¾è¡¨</strong>ï¼šå¦‚å›¾</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221204234638.png" alt="20210707140502"></p></li><li><p>å†…å­˜åˆ†é…ç®—æ³•â€“åŠ¨æ€åˆ†åŒºåˆ†é…æ–¹å¼ï¼ˆåŠ¨æ€åˆ†åŒºå­˜å‚¨ç®¡ç†ï¼‰</p><ul><li><strong>é¦–æ¬¡é€‚é…ç®—æ³•ï¼ˆfirst fitï¼‰</strong></li><li><strong>ä¸‹æ¬¡é€‚é…ç®—æ³•ï¼ˆnext fitï¼‰</strong>ï¼šå¯¹<strong>é¦–æ¬¡é€‚é…</strong>è¿›è¡Œè°ƒæ•´ï¼Œè®°å½•ä¸Šä¸€æ¬¡æœç´¢åœæ­¢ä½ç½®ï¼Œä¸‹ä¸€æ¬¡ä»æ­¤å¼€å§‹</li><li><strong>æœ€ä½³é€‚é…ç®—æ³•ï¼ˆbest fitï¼‰</strong>ï¼šæ‰¾åˆ°èƒ½å¤Ÿå®¹çº³çš„æœ€å°ç©ºé—²åŒº</li><li><strong>æœ€åé€‚é…ç®—æ³•ï¼ˆworst fitï¼‰</strong>ï¼šæ‰¾åˆ°èƒ½å¤Ÿå®¹çº³çš„æœ€å¤§ç©ºé—²åŒº</li><li><strong>æœ€å¿«é€‚é…ç®—æ³•ï¼ˆquick fitï¼‰</strong></li></ul></li><li><p>ä¸º<strong>è¿›ç¨‹ç»“ç‚¹</strong>å’Œ<strong>ç©ºé—²åŒºç»“ç‚¹</strong>å»ºç«‹ç‹¬ç«‹çš„é“¾è¡¨</p><ul><li>æœç´¢é€Ÿåº¦æé«˜ï¼Œä½†å¤æ‚åº¦å¢åŠ ä¸”å†…å­˜å›æ”¶æ…¢</li></ul></li><li><p>å¦‚æœç©ºé—²é“¾è¡¨æŒ‰<strong>åœ°å€é€’å¢</strong>æ’åº</p><ul><li>é¦–æ¬¡é€‚é…ï¼šä½åœ°å€åŒºç¢ç‰‡å¤šï¼Œæ¯æ¬¡ä»ä½åœ°å€åŒºæŸ¥æ‰¾å¢åŠ å¼€é”€</li><li>ä¸‹æ¬¡é€‚é…ï¼šç©ºé—²åŒºåˆ†å¸ƒå‡åŒ€ï¼Œå‡å°‘æŸ¥è¯¢ç©ºé—²åˆ†åŒºçš„å¼€é”€ï¼Œä½†ç¼ºä¹å¤§çš„ç©ºé—²åˆ†åŒº</li><li>æœ€ä½³é€‚é…ï¼šæŸ¥æ‰¾å¼€é”€å¤§ï¼Œèƒ½å¤Ÿé¿å…å¤§é‡éš¾åˆ©ç”¨çš„ç¢ç‰‡</li><li>æœ€å·®é€‚é…ï¼šæŸ¥æ‰¾å¼€é”€å¤§ï¼Œé¿å…ç•™ä¸‹å¤§é‡éš¾åˆ©ç”¨çš„ç¢ç‰‡,ä½†ç¼ºä¹å¤§çš„ç©ºé—²åˆ†åŒº</li></ul></li><li><p>ä¸ºå¢åŠ æœç´¢é€Ÿåº¦</p><ul><li>æœ€ä½³é€‚é…ï¼šç©ºé—²åŒºæŒ‰ç©ºé—´å¤§å°<strong>é€’å¢æ’åº</strong></li><li>æœ€å·®é€‚é…ï¼šç©ºé—²åŒºæŒ‰ç©ºé—´å¤§å°<strong>é€’å‡æ’åº</strong></li></ul></li></ul></blockquote><h4 id="è¦†ç›–æŠ€æœ¯ï¼ˆoverlayï¼‰"><a href="#è¦†ç›–æŠ€æœ¯ï¼ˆoverlayï¼‰" class="headerlink" title="è¦†ç›–æŠ€æœ¯ï¼ˆoverlayï¼‰"></a>è¦†ç›–æŠ€æœ¯ï¼ˆoverlayï¼‰</h4><blockquote><ul><li>è§£å†³<strong>ç¨‹åºå¤§å°è¶…è¿‡ç‰©ç†å†…å­˜æ€»å’Œ</strong>é—®é¢˜</li><li>å‘ç”Ÿåœ¨åŒä¸€è¿›ç¨‹æˆ–ä½œä¸šå†…</li></ul></blockquote><blockquote><p>  æ€æƒ³ï¼šå°†<strong>ç¨‹åºåˆ†ä¸ºå¤šä¸ªæ®µï¼ˆæ¨¡å—ï¼‰</strong>ï¼Œå¸¸ç”¨æ®µå¸¸é©»å†…å­˜ï¼Œä¸å¸¸ç”¨æ®µéœ€è¦æ—¶è°ƒå…¥å†…å­˜</p><p>  å†…å­˜ä¸­åˆ†é…<strong>ä¸€ä¸ªå›ºå®šåŒº</strong>å’Œ<strong>è‹¥å¹²ä¸ªè¦†ç›–åŒº</strong></p><p>  å¸¸ç”¨æ®µè°ƒå…¥å›ºå®šåŒºåä¸å†è°ƒå‡º</p><p>  ä¸å¸¸ç”¨æ®µéœ€è¦æ—¶è°ƒå…¥è¦†ç›–åŒºï¼Œä¸éœ€è¦æ—¶è°ƒå‡º</p><p>  <strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>å¯¹ç”¨æˆ·ä¸é€æ˜ï¼Œå¢åŠ ç¼–ç¨‹è´Ÿæ‹…</li></ul></blockquote><h4 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h4><blockquote></blockquote><h4 id="å¿«è¡¨ï¼ˆTLB"><a href="#å¿«è¡¨ï¼ˆTLB" class="headerlink" title="å¿«è¡¨ï¼ˆTLB)"></a>å¿«è¡¨ï¼ˆTLB)</h4><blockquote><p>  å±€éƒ¨æ€§åŸç†ï¼š</p><ul><li>æ—¶é—´å±€éƒ¨æ€§ï¼šå¦‚æœæ‰§è¡Œäº†ç¨‹åºä¸­çš„æŸä¸ªæŒ‡ä»¤ï¼Œåœ¨ä¸ä¹…åè¿™æ¡æŒ‡ä»¤å¾ˆæœ‰å¯èƒ½å†æ¬¡æ‰§è¡Œï¼›è®¿é—®äº†ç¨‹åºä¸­çš„æŸä¸ªæ•°æ®ï¼Œä¸ä¹…åè¯¥æ•°æ®å¯èƒ½å†æ¬¡è¢«è®¿é—®</li><li>ç©ºé—´å±€éƒ¨æ€§ï¼šè®¿é—®äº†æŸä¸ªå­˜å‚¨å•å…ƒï¼Œä¸ä¹…åå¯èƒ½ä¼šè®¿é—®è¯¥å­˜å‚¨å•å…ƒé™„è¿‘çš„å­˜å‚¨å•å…ƒ</li></ul><p>  <strong>å¿«è¡¨</strong>ï¼Œåˆç§°<strong>è”æƒ³å¯„å­˜å™¨ï¼ˆTLBï¼‰</strong>ï¼Œæ˜¯ä¸€ç§è®¿é—®é€Ÿåº¦æ¯”å†…å­˜å¿«å¾ˆå¤šçš„é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ï¼Œç”¨æ¥å­˜æ”¾å½“å‰è®¿é—®çš„è‹¥å¹²é¡µè¡¨é¡¹ï¼Œä»¥åŠåŠ é€Ÿåœ°å€å˜æ¢çš„è¿‡ç¨‹ã€‚ä¸æ­¤å¯¹åº”ï¼Œå†…å­˜ä¸­çš„é¡µè¡¨è¢«ç§°ä¸º<strong>æ…¢è¡¨</strong></p><ul><li>å¿«è¡¨å‘½ä¸­ï¼Œä¸€æ¬¡è®¿å­˜</li><li>å¿«è¡¨æœªå‘½ä¸­ï¼Œä¸¤æ¬¡è®¿å­˜</li></ul></blockquote><h4 id="å¤šçº§é¡µè¡¨"><a href="#å¤šçº§é¡µè¡¨" class="headerlink" title="å¤šçº§é¡µè¡¨"></a>å¤šçº§é¡µè¡¨</h4><blockquote><ul><li>é¡µè¡¨å¿…é¡»è¿ç»­å­˜æ”¾ï¼Œå½“é¡µè¡¨å¾ˆå¤§æ—¶ï¼Œéœ€è¦å ç”¨å¤šä¸ªè¿ç»­çš„é¡µæ¡†</li></ul></blockquote><h3 id="4-3-è™šæ‹Ÿå†…å­˜"><a href="#4-3-è™šæ‹Ÿå†…å­˜" class="headerlink" title="4.3 è™šæ‹Ÿå†…å­˜"></a>4.3 è™šæ‹Ÿå†…å­˜</h3><blockquote><ul><li>å¤„ç†å†…å­˜è¶…è½½çš„æœ€é‡è¦æŠ€æœ¯</li><li>å†…å­˜ç®¡ç†å•å…ƒï¼ˆMMUï¼‰å®Œæˆåœ°å€æ˜ å°„</li><li>é¡µè¡¨ï¼šæ”¾åœ¨å†…å­˜ä¸­ï¼ŒæŠŠè™šæ‹Ÿé¡µé¢æ˜ å°„ä¸ºé¡µæ¡†ï¼Œå³ç»™å‡ºè™šæ‹Ÿåœ°å€ä¸ç‰©ç†åœ°å€çš„æ˜ å°„å…³ç³»<ul><li>æœ‰å¤šä¸ªé¡µè¡¨é¡¹ç»„æˆ</li><li>æ¯ä¸€ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªé¡µè¡¨é¡¹</li></ul></li><li>é¡µæ¡†ï¼šå†…å­˜</li><li>é¡µé¢ï¼šè¿›ç¨‹</li></ul></blockquote><h3 id="4-4-é¡µé¢ç½®æ¢ç®—æ³•"><a href="#4-4-é¡µé¢ç½®æ¢ç®—æ³•" class="headerlink" title="4.4 é¡µé¢ç½®æ¢ç®—æ³•"></a>4.4 é¡µé¢ç½®æ¢ç®—æ³•</h3><blockquote><ul><li>ä¸€èˆ¬åŸåˆ™ï¼š<ul><li>å·²ä¿®æ”¹çš„é¡µé¢å¿…é¡»é¦–å…ˆä¿å­˜ï¼ˆ<strong>éœ€è¦å†™å›ç£ç›˜</strong>ï¼‰ï¼Œæœªä¿®æ”¹çš„é¡µé¢ç›´æ¥ç”±æ–°é¡µé¢è¦†ç›–ï¼ˆ<strong>å·²ç»æ˜¯æœ€æ–°çš„</strong>ï¼‰</li><li>å°½å¯èƒ½ä¸è¦é€‰æ‹©é¢‘ç¹ä½¿ç”¨çš„é¡µé¢ç½®æ¢å‡ºå†…å­˜ï¼Œå¾ˆå¯èƒ½å¾ˆçŸ­æ—¶é—´å†…åˆè¦è¢«è°ƒå…¥å†…å­˜</li></ul></li></ul></blockquote><blockquote><ul><li>ç‰©ç†å—ï¼ˆé¡µæ¡†ï¼‰åˆ†é…ä¸ç½®æ¢ç­–ç•¥<ul><li><strong>å›ºå®š</strong>åˆ†é…<strong>å±€éƒ¨</strong>ç½®æ¢<ul><li>è¿›ç¨‹å æ®çš„å†…å­˜é¡µæ¡†æ•°<strong>ä¸å˜</strong></li><li>ç¼ºé¡µæ—¶ï¼Œåªèƒ½ä¸è¯¥è¿›ç¨‹åœ¨å†…å­˜çš„é¡µé¢ç½®æ¢</li><li>ç”±è¿›ç¨‹ç±»å‹ã€ç¨‹åºå‘˜ç¡®å®šæ¯ä¸ªè¿›ç¨‹åˆ†å¾—çš„ç‰©ç†å—æ•°</li><li>ä½†åˆ†é…æ—¶ï¼Œéš¾ä»¥ç¡®å®šæŸä¸ªè¿›ç¨‹çš„é¡µæ¡†æ•°</li></ul></li><li><strong>å¯å˜</strong>åˆ†é…<strong>å…¨å±€</strong>ç½®æ¢<ul><li>æœ€æ˜“å®ç°ï¼Œç©ºé—²é¡µæ¡†ç”±OSç®¡ç†â€”â€”ç©ºé—²ç‰©ç†å—é˜Ÿåˆ—</li><li>å…ˆä¸ºè¿›ç¨‹åˆ†é…ä¸€å®šç‰©ç†å—</li><li>ç¼ºé¡µæ—¶ï¼Œä»ç³»ç»Ÿç©ºé—²ç‰©ç†å—é˜Ÿåˆ—ä¸­å–ä¸€å—</li><li>ç©ºé—²ç‰©ç†å—å–å®Œæ—¶ï¼Œä¸å†…å­˜ä¸­çš„ä¸€é¡µç½®æ¢</li></ul></li><li><strong>å¯å˜</strong>åˆ†é…<strong>å±€éƒ¨</strong>ç½®æ¢<ul><li>å…ˆä¸ºè¿›ç¨‹åˆ†é…ä¸€å®šç‰©ç†å—</li><li>ç¼ºé¡µæ—¶ï¼Œåªä¸è¯¥è¿›ç¨‹åœ¨å†…å­˜çš„ä¸€é¡µç½®æ¢</li><li>ç¼ºé¡µç‡è¾ƒé«˜æ—¶è°ƒæ•´é¡µæ¡†æ•°</li></ul></li></ul></li><li><strong>å›ºå®š</strong>å’Œ<strong>å¯å˜</strong>ï¼šå³è¿›ç¨‹å æ®çš„é¡µæ¡†æ•°æ˜¯å¦ä¼šå‘ç”Ÿå˜åŒ–</li><li><strong>å…¨å±€</strong>å’Œ<strong>å±€éƒ¨</strong>ï¼šå³è¿›ç¨‹ç¼ºé¡µæ—¶ç½®æ¢åªåœ¨è¯¥å†…å­˜ä¸­è¿›è¡Œå«åš<strong>å±€éƒ¨</strong>ç½®æ¢ï¼Œå¯èƒ½ç½®æ¢å…¶ä»–è¿›ç¨‹çš„é¡µé¢å«åš<strong>å…¨å±€</strong>ç½®æ¢</li></ul></blockquote><blockquote><ul><li><strong>æœ€ä¼˜</strong>ï¼ˆOPTï¼‰</li><li><strong>æœ€è¿‘æœªä½¿ç”¨</strong>ï¼ˆNRU[not recently used]ï¼‰ï¼šå½“é¡µé¢è¢«è®¿é—®æˆ–ä¿®æ”¹æ—¶ï¼Œè®¾ç½®è®¿é—®ä½<strong>R</strong>å’Œä¿®æ”¹ä½<strong>M</strong><ul><li>0ï¼šR &#x3D; 0ï¼Œ M &#x3D; 0ï¼›</li><li>1ï¼šR &#x3D; 0ï¼Œ M &#x3D; 1ï¼›</li><li>2ï¼šR &#x3D; 1ï¼Œ M &#x3D; 0ï¼›</li><li>3ï¼šR &#x3D; 1ï¼Œ M &#x3D; 1ï¼ˆæ—¶é’Ÿä¸­æ–­Ræ¸…0ï¼Œå˜æˆ1ç±»ï¼‰ï¼›</li><li>ä»ç¼–å·æœ€å°çš„å¼€å§‹æ·˜æ±°ï¼Œå³<strong>æ²¡è®¿é—®æ²¡ä¿®æ”¹â€“&gt;ä¿®æ”¹äº†æ²¡è®¿é—®â€“&gt;è®¿é—®äº†æ²¡ä¿®æ”¹â€“&gt;è®¿é—®äº†ä¿®æ”¹äº†</strong></li></ul></li><li><strong>å…ˆè¿›å…ˆå‡º</strong>ï¼ˆFIFOï¼‰ï¼šOSç»´æŠ¤ä¸€ä¸ªå†…å­˜ä¸­é¡µé¢çš„é“¾è¡¨ï¼ŒæŒ‰ç…§è¿›å…¥å†…å­˜é¡ºåºç»„ç»‡ï¼Œç½®æ¢<ul><li>FIFOçš„<strong>Belady</strong>ç°è±¡ï¼šå½“åˆ†é…ç»™è¿›ç¨‹çš„ç‰©ç†é¡µé¢æ•°å¢åŠ æ—¶ï¼Œç¼ºé¡µæ¬¡æ•°åè€Œå¢åŠ </li></ul></li><li><strong>ç¬¬äºŒæ¬¡æœºä¼š</strong>ï¼ˆSCRï¼‰<ul><li>å¯¹FIFOç®—æ³•çš„ä¿®æ”¹ï¼Œç½®æ¢æ—¶å…ˆçœ‹è®¿é—®ä½<strong>R</strong>æ˜¯å¦ä¸º0ï¼Œä¸º0ç½®æ¢ï¼Œå¦åˆ™ç½®ä¸º0æ”¾å…¥é˜Ÿå°¾</li></ul></li><li><strong>æ—¶é’Ÿ</strong>ï¼ˆclockï¼‰<ul><li>é¿å…SCRä¸­ç§»åŠ¨é¡µé¢ï¼Œç»„ç»‡ä¸€ä¸ªç¯å½¢é“¾è¡¨ï¼Œæ£€æŸ¥è¡¨é’ˆæŒ‡å‘çš„é¡µé¢ï¼ŒRä¸º0ç½®æ¢ï¼Œå¦åˆ™æŒ‡é’ˆåç§»</li></ul></li><li><strong>æœ€è¿‘æœ€å°‘ä½¿ç”¨</strong>ï¼ˆLRUï¼‰ï¼šé€‰æ‹©æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é¡µæ·˜æ±°<ul><li>æ ¹æ®è¿‡å»é¢„æµ‹æœªæ¥</li><li>æœ€è¿‘æœ€å¤šä½¿ç”¨åœ¨è¡¨å¤´ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨åœ¨è¡¨å°¾</li><li>æ¯æ¬¡è®¿é—®æ—¶æ›´æ–°é“¾è¡¨</li></ul></li><li><strong>æœ€ä¸å¸¸ç”¨ï¼ˆNFUï¼‰</strong>ï¼šå°†æ¯ä¸ªé¡µé¢å’Œè®¡æ—¶å™¨ç›¸å…³è”ï¼Œåˆå€¼ä¸º0ï¼Œæ¯æ¬¡æ—¶é’Ÿä¸­æ–­å°†Rä½åŠ åˆ°è®¡æ•°å™¨ï¼Œæ·˜æ±°è®¡æ•°å™¨å€¼æœ€å°çš„<ul><li>å’ŒLRUç²—ç•¥è¿‘ä¼¼</li></ul></li></ul></blockquote><h3 id="4-5-åˆ†é¡µç³»ç»Ÿä¸­çš„è®¾è®¡é—®é¢˜"><a href="#4-5-åˆ†é¡µç³»ç»Ÿä¸­çš„è®¾è®¡é—®é¢˜" class="headerlink" title="4.5 åˆ†é¡µç³»ç»Ÿä¸­çš„è®¾è®¡é—®é¢˜"></a>4.5 åˆ†é¡µç³»ç»Ÿä¸­çš„è®¾è®¡é—®é¢˜</h3><blockquote><ul><li>â€¦</li><li>é¡µé¢å¤§å°ï¼š<ul><li>å°é¡µé¢<ul><li>æ›´å°‘çš„å†…éƒ¨ç¢ç‰‡</li><li>æ›´åŠ çµæ´»ï¼Œé€‚åˆå„ç§ç¨‹åºç»“æ„å’Œæ•°æ®æ®µ</li><li>å‡å°‘å†…å­˜ä¸­å±€éƒ¨æ‰§è¡Œæ²¡ç”¨çš„ç¨‹åº</li><li><strong>ç¼ºç‚¹</strong>ï¼šè¿›ç¨‹éœ€è¦æ›´å¤šé¡µé¢ï¼Œæ›´å¤§é¡µè¡¨</li></ul></li><li>å¤§é¡µé¢<ul><li>é¡µè¡¨å°</li><li><strong>ç¼ºç‚¹</strong>ï¼šå°é¡µé¢çš„ä¼˜ç‚¹</li></ul></li></ul></li></ul></blockquote><h3 id="4-7-åˆ†æ®µ"><a href="#4-7-åˆ†æ®µ" class="headerlink" title="4.7 åˆ†æ®µ"></a>4.7 åˆ†æ®µ</h3><blockquote><ul><li>åˆ†é¡µç¼ºç‚¹ï¼šè™šåœ°å€ç©ºé—´æ˜¯ä¸€ç»´çš„ï¼Œä¸åˆ©äºåŠ¨æ€å¢é•¿</li><li>è§£å†³ï¼šæ ¹æ®é€»è¾‘å…³ç³»åˆ†æ®µ</li><li><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20220706232004.png" alt="20210707214634"></li></ul></blockquote><h2 id="ç¬¬äº”ç« -æ–‡ä»¶ç³»ç»Ÿ"><a href="#ç¬¬äº”ç« -æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="ç¬¬äº”ç«  æ–‡ä»¶ç³»ç»Ÿ"></a>ç¬¬äº”ç«  æ–‡ä»¶ç³»ç»Ÿ</h2><h3 id="åºè¨€-1"><a href="#åºè¨€-1" class="headerlink" title="åºè¨€"></a>åºè¨€</h3><blockquote><ul><li>æ–‡ä»¶çš„æ ¹æœ¬ç›®æ ‡ï¼šé•¿æœŸå­˜å‚¨ä¿¡æ¯</li><li>æ–‡ä»¶çš„å­˜å‚¨ä»‹è´¨ï¼šç£ç›˜ã€å…‰ç›˜ã€ç£å¸¦ç­‰</li><li>æ–‡ä»¶<ul><li>æ–‡ä»¶æ˜¯è¿›ç¨‹åˆ›å»ºçš„ä¿¡æ¯é€»è¾‘å•å…ƒ</li><li>æ–‡ä»¶æ˜¯ç£ç›˜ä¸Šçš„ä¸€ç§åœ°å€ç©ºé—´</li></ul></li><li>æ–‡ä»¶ç³»ç»Ÿ<ul><li>æ–‡ä»¶æ˜¯ç”±æ“ä½œç³»ç»Ÿç®¡ç†ï¼Œæ“ä½œç³»ç»Ÿä¸­å¤„ç†æ–‡ä»¶çš„éƒ¨åˆ†å«åšæ–‡ä»¶ç³»ç»Ÿ</li></ul></li></ul></blockquote><h3 id="5-1-æ–‡ä»¶"><a href="#5-1-æ–‡ä»¶" class="headerlink" title="5.1 æ–‡ä»¶"></a>5.1 æ–‡ä»¶</h3><h4 id="5-1-1-æ–‡ä»¶å‘½å"><a href="#5-1-1-æ–‡ä»¶å‘½å" class="headerlink" title="5.1.1 æ–‡ä»¶å‘½å"></a>5.1.1 æ–‡ä»¶å‘½å</h4><blockquote><ul><li>æ–‡ä»¶å.æ‰©å±•å</li></ul></blockquote><h4 id="5-1-2-æ–‡ä»¶ç»“æ„"><a href="#5-1-2-æ–‡ä»¶ç»“æ„" class="headerlink" title="5.1.2 æ–‡ä»¶ç»“æ„"></a>5.1.2 æ–‡ä»¶ç»“æ„</h4><blockquote><ul><li>å­—èŠ‚åºåˆ—</li><li>è®°å½•åºåˆ—</li><li>æ•°</li></ul></blockquote><h4 id="5-1-3-æ–‡ä»¶ç±»å‹"><a href="#5-1-3-æ–‡ä»¶ç±»å‹" class="headerlink" title="5.1.3 æ–‡ä»¶ç±»å‹"></a>5.1.3 æ–‡ä»¶ç±»å‹</h4><blockquote><ul><li>æ™®é€šæ–‡ä»¶<ul><li>ASCIIæ–‡ä»¶</li><li>äºŒè¿›åˆ¶æ–‡ä»¶</li><li>Unicodeæ–‡ä»¶</li></ul></li><li>ç›®å½•<ul><li>ç®¡ç†æ–‡ä»¶ç³»ç»Ÿç»“æ„çš„ç³»ç»Ÿæ–‡ä»¶</li></ul></li></ul></blockquote><h4 id="5-1-4-æ–‡ä»¶å­˜å–"><a href="#5-1-4-æ–‡ä»¶å­˜å–" class="headerlink" title="5.1.4 æ–‡ä»¶å­˜å–"></a>5.1.4 æ–‡ä»¶å­˜å–</h4><blockquote><ul><li>é¡ºåºå­˜å–</li><li>éšæœºå­˜å–</li></ul></blockquote><h4 id="5-1-5-æ–‡ä»¶å±æ€§"><a href="#5-1-5-æ–‡ä»¶å±æ€§" class="headerlink" title="5.1.5 æ–‡ä»¶å±æ€§"></a>5.1.5 æ–‡ä»¶å±æ€§</h4><blockquote><ul><li>é™¤äº†æ–‡ä»¶åå’Œæ•°æ®ï¼Œè¿˜ä¼šä¿å­˜<strong>æ–‡ä»¶å±æ€§ï¼ˆå…ƒæ•°æ®ï¼‰</strong></li></ul></blockquote><h3 id="5-2-ç›®å½•"><a href="#5-2-ç›®å½•" class="headerlink" title="5.2 ç›®å½•"></a>5.2 ç›®å½•</h3><blockquote><ul><li>ç›®å½•æˆ–æ–‡ä»¶å¤¹ç®¡ç†çš„åŸºæœ¬è¦æ±‚<ul><li>å®ç°â€æŒ‰åå­˜å–â€œ</li><li>æé«˜å¯¹ç›®å½•çš„æ£€ç´¢é€Ÿåº¦</li><li>æ–‡ä»¶å…±äº«</li><li>å…è®¸æ–‡ä»¶é‡å</li></ul></li><li>ç›®å½•é¡¹<ul><li>ç›®å½•çš„åŸºæœ¬ç»„æˆå…ƒç´ ï¼Œæ–‡ä»¶æ§åˆ¶å—ï¼ˆFCBï¼‰</li><li>å†…å®¹ï¼šå­˜æ”¾äº†ç®¡ç†æ–‡ä»¶æ‰€éœ€çš„æ‰€æœ‰æœ‰å…³ä¿¡æ¯ï¼ŒåŒ…å«æ–‡ä»¶åã€å­˜å‚¨åœ°å€ç­‰åŸºæœ¬ä¿¡æ¯</li><li>ç›®å½•é¡¹æ˜¯æ–‡ä»¶å­˜åœ¨çš„æ ‡å¿—ï¼šç›®å½•é¡¹å’Œæ–‡ä»¶ä¸€ ä¸€å¯¹åº”</li></ul></li><li>æ–‡ä»¶ç›®å½•ï¼ˆç›®å½•ï¼‰<ul><li>æŠŠæ–‡ä»¶çš„ç›®å½•é¡¹ï¼ˆFCBï¼‰ç»„ç»‡åœ¨ä¸€èµ·ï¼Œå°±æ„æˆäº†æ–‡ä»¶ç›®å½•</li></ul></li></ul></blockquote><h3 id="5-3-æ–‡ä»¶ç³»ç»Ÿçš„å®ç°"><a href="#5-3-æ–‡ä»¶ç³»ç»Ÿçš„å®ç°" class="headerlink" title="5.3 æ–‡ä»¶ç³»ç»Ÿçš„å®ç°"></a>5.3 æ–‡ä»¶ç³»ç»Ÿçš„å®ç°</h3><blockquote><p>  <img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20220706231938.png" alt="20210707225439"></p><p>  <img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20220706231934.png" alt="20210707225443"></p></blockquote><h4 id="æ–‡ä»¶å­˜å‚¨çš„å®ç°"><a href="#æ–‡ä»¶å­˜å‚¨çš„å®ç°" class="headerlink" title="æ–‡ä»¶å­˜å‚¨çš„å®ç°"></a>æ–‡ä»¶å­˜å‚¨çš„å®ç°</h4><blockquote><ul><li>å¤–å­˜ä¸‰ç§ä¸»è¦åˆ†é…æ–¹å¼<ul><li>è¿ç»­åˆ†é…â€”â€”é¡ºåºå¼æ–‡ä»¶ç»“æ„</li><li>é“¾æ¥åˆ†é…â€”â€”é“¾æ¥å¼æ–‡ä»¶ç»“æ„</li><li>ç´¢å¼•åˆ†é…â€”â€”ç´¢å¼•å¼æ–‡ä»¶ç»“æ„</li></ul></li></ul></blockquote><h4 id="æ˜¾ç¤ºé“¾æ¥"><a href="#æ˜¾ç¤ºé“¾æ¥" class="headerlink" title="æ˜¾ç¤ºé“¾æ¥"></a>æ˜¾ç¤ºé“¾æ¥</h4><blockquote><ul><li>è¿™æ ·çš„è¡¨æ•´ç£ç›˜ä»…è®¾ä¸€å¼ ï¼Œç§°ä¸º<strong>æ–‡ä»¶åˆ†é…è¡¨ï¼ˆFATï¼‰</strong></li><li></li></ul></blockquote><h3 id="5-4-æ–‡ä»¶ç³»ç»Ÿç®¡ç†ä¸ä¼˜åŒ–"><a href="#5-4-æ–‡ä»¶ç³»ç»Ÿç®¡ç†ä¸ä¼˜åŒ–" class="headerlink" title="5.4 æ–‡ä»¶ç³»ç»Ÿç®¡ç†ä¸ä¼˜åŒ–"></a>5.4 æ–‡ä»¶ç³»ç»Ÿç®¡ç†ä¸ä¼˜åŒ–</h3><h4 id="ç£ç›˜ç©ºé—´ç®¡ç†"><a href="#ç£ç›˜ç©ºé—´ç®¡ç†" class="headerlink" title="ç£ç›˜ç©ºé—´ç®¡ç†"></a>ç£ç›˜ç©ºé—´ç®¡ç†</h4><blockquote><ul><li>ç›˜å—<ul><li>ç›˜å—å¤§å°<ul><li>å¤ªå¤§ï¼Œå°æ–‡ä»¶æµªè´¹ç©ºé—´</li><li>å¤ªæ•ˆï¼Œå¤§æ–‡ä»¶è®¿é—®æ•ˆç‡ä½</li></ul></li><li>è®°å½•ç©ºé—²ç›˜å—</li><li>ç›˜å—é…é¢</li></ul></li><li>ç£ç›˜è®¿é—®æ—¶é—´ &#x3D; å¯»é“æ—¶é—´ + æ—‹è½¬å»¶è¿Ÿæ—¶é—´ + ä¼ è¾“æ—¶é—´</li><li><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20220706231922.png" alt="20210707231453"></li></ul></blockquote><h2 id="ç¬¬å…­ç« -IO"><a href="#ç¬¬å…­ç« -IO" class="headerlink" title="ç¬¬å…­ç«  IO"></a>ç¬¬å…­ç«  IO</h2><blockquote><ul><li>IOå±‚æ¬¡<ul><li>ç”¨æˆ·çº§I&#x2F;Oè½¯ä»¶</li><li>ä¸è®¾å¤‡æ— å…³çš„OSè½¯ä»¶</li><li>è®¾å¤‡é©±åŠ¨ç¨‹åº</li><li>ä¸­æ–­å¤„ç†ç¨‹åº</li><li>ç¡¬ä»¶</li></ul></li><li><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20220706231908.png" alt="20210707234756"></li></ul></blockquote><h4 id="ç£ç›˜è°ƒåº¦ç®—æ³•"><a href="#ç£ç›˜è°ƒåº¦ç®—æ³•" class="headerlink" title="ç£ç›˜è°ƒåº¦ç®—æ³•"></a>ç£ç›˜è°ƒåº¦ç®—æ³•</h4><blockquote><ul><li><strong>å…ˆæ¥å…ˆæœåŠ¡ï¼ˆFCFS)</strong></li><li><strong>æœ€çŸ­å¯»é“ä¼˜å…ˆï¼ˆSSFï¼‰</strong></li><li><strong>ç”µæ¢¯ç®—æ³•ï¼ˆSCANï¼‰</strong></li><li><strong>å¾ªç¯æ‰«æï¼ˆS-SCAN)</strong></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¦‚è¿° </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç½‘ç»œç¬”è®°</title>
      <link href="/2022/03/29/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
      <url>/2022/03/29/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¡ç®—æœºç½‘ç»œ"><a href="#è®¡ç®—æœºç½‘ç»œ" class="headerlink" title="è®¡ç®—æœºç½‘ç»œ"></a>è®¡ç®—æœºç½‘ç»œ</h1><h2 id="ç¬¬ä¸€ç« -æ¦‚è¿°"><a href="#ç¬¬ä¸€ç« -æ¦‚è¿°" class="headerlink" title="ç¬¬ä¸€ç«  æ¦‚è¿°"></a>ç¬¬ä¸€ç«  æ¦‚è¿°</h2><h3 id="äº’è”ç½‘ä¸¤ä¸ªé‡è¦åŸºæœ¬ç‰¹ç‚¹"><a href="#äº’è”ç½‘ä¸¤ä¸ªé‡è¦åŸºæœ¬ç‰¹ç‚¹" class="headerlink" title="äº’è”ç½‘ä¸¤ä¸ªé‡è¦åŸºæœ¬ç‰¹ç‚¹"></a>äº’è”ç½‘ä¸¤ä¸ªé‡è¦åŸºæœ¬ç‰¹ç‚¹</h3><blockquote><ul><li>è¿é€šæ€§</li><li>å…±äº«ï¼ˆèµ„æºå…±äº«ï¼‰<ul><li>ä¿¡æ¯å…±äº«</li><li>è½¯ä»¶å…±äº«</li><li>ç¡¬ä»¶å…±äº«</li></ul></li></ul></blockquote><h3 id="RFC"><a href="#RFC" class="headerlink" title="RFC"></a>RFC</h3><blockquote><p>  <code>Request For Comment</code>è¯·æ±‚è¯„è®º</p><ul><li>äº’è”ç½‘è‰æ¡ˆ</li><li>å»ºè®®æ ‡å‡† â€“&gt; RFCæ–‡æ¡£</li><li>äº’è”ç½‘æ ‡å‡†</li></ul></blockquote><h3 id="äº’è”ç½‘çš„è¾¹ç¼˜éƒ¨åˆ†"><a href="#äº’è”ç½‘çš„è¾¹ç¼˜éƒ¨åˆ†" class="headerlink" title="äº’è”ç½‘çš„è¾¹ç¼˜éƒ¨åˆ†"></a>äº’è”ç½‘çš„è¾¹ç¼˜éƒ¨åˆ†</h3><blockquote><p>  è¾¹ç¼˜éƒ¨åˆ†çš„ä¸»æœºåˆç§°ä¸º**<code>ç«¯ç³»ç»Ÿ</code>**</p><p>  ç«¯ç³»ç»Ÿä¹‹é—´çš„é€šä¿¡æ–¹å¼</p><ul><li>å®¢æˆ·&#x2F;æœåŠ¡å™¨ï¼ˆC&#x2F;Sï¼‰æ–¹å¼</li><li>å¯¹ç­‰ï¼ˆP2Pï¼‰æ–¹å¼</li></ul></blockquote><h3 id="äº’è”ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†"><a href="#äº’è”ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†" class="headerlink" title="äº’è”ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†"></a>äº’è”ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†</h3><blockquote><p>  åœ¨ç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†èµ·ç‰¹æ®Šä½œç”¨çš„æ˜¯**<code>è·¯ç”±å™¨(router)</code><strong>ï¼Œå®ç°</strong>åˆ†ç»„è½¬å‘**</p><p>  é‡‡ç”¨<strong>ç½‘çŠ¶æ‹“æ‰‘ç»“æ„</strong></p></blockquote><h4 id="ç”µè·¯äº¤æ¢"><a href="#ç”µè·¯äº¤æ¢" class="headerlink" title="ç”µè·¯äº¤æ¢"></a>ç”µè·¯äº¤æ¢</h4><blockquote><ol><li>å»ºç«‹è¿æ¥</li><li>åŒè¯</li><li>é‡Šæ”¾è¿æ¥</li></ol><p>  ç¼ºç‚¹ï¼šçº¿è·¯çš„ä¼ è¾“æ•ˆç‡ä½</p></blockquote><h4 id="åˆ†ç»„äº¤æ¢"><a href="#åˆ†ç»„äº¤æ¢" class="headerlink" title="åˆ†ç»„äº¤æ¢"></a>åˆ†ç»„äº¤æ¢</h4><blockquote><p>  åˆ†ç»„äº¤æ¢é‡‡ç”¨<strong>å­˜å‚¨è½¬å‘</strong>æŠ€æœ¯</p><p>  <strong>åˆ†ç»„ï¼ˆpacketï¼‰</strong> â€“ <strong>åŒ…</strong></p></blockquote><h3 id="è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½"><a href="#è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½" class="headerlink" title="è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½"></a>è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½</h3><blockquote><ol><li>é€Ÿç‡</li><li>å¸¦å®½</li><li>ååé‡</li><li>æ—¶å»¶</li><li>æ—¶å»¶å¸¦å®½ç§¯</li><li>å¾€è¿”æ—¶é—´</li></ol></blockquote><h3 id="åè®®ä¸åˆ’åˆ†å±‚æ¬¡"><a href="#åè®®ä¸åˆ’åˆ†å±‚æ¬¡" class="headerlink" title="åè®®ä¸åˆ’åˆ†å±‚æ¬¡"></a>åè®®ä¸åˆ’åˆ†å±‚æ¬¡</h3><h4 id="åè®®"><a href="#åè®®" class="headerlink" title="åè®®"></a>åè®®</h4><blockquote><p>  ä¸ºè¿›è¡Œç½‘ç»œä¸­çš„æ•°æ®äº¤æ¢è€Œå»ºç«‹çš„è§„åˆ™ã€æ ‡å‡†æˆ–çº¦å®šç§°ä¸º<strong>ç½‘ç»œåè®®</strong></p><ul><li>è¯­æ³•</li><li>è¯­ä¹‰</li><li>åŒæ­¥ï¼ˆæ—¶åºï¼‰</li></ul></blockquote><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153520.png" alt="è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"></p><blockquote><ul><li>åº”ç”¨å±‚<ul><li>é€šè¿‡åº”ç”¨è¿›ç¨‹é—´çš„äº¤äº’æ¥å®Œæˆç‰¹å®šç½‘ç»œåº”ç”¨ã€‚</li><li>å®šä¹‰çš„æ˜¯<strong>åº”ç”¨è¿›ç¨‹é—´é€šä¿¡å’Œäº¤äº’çš„è§„åˆ™</strong></li></ul></li><li>è¿è¾“å±‚<ul><li>è´Ÿè´£å‘ä¸¤å°ä¸»æœºä¸­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æä¾›é€šç”¨çš„æ•°æ®ä¼ è¾“æœåŠ¡</li><li><strong>ä¼ è¾“æ§åˆ¶åè®®TCP</strong></li><li><strong>ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP</strong></li></ul></li><li>ç½‘ç»œå±‚<ul><li>è´Ÿè´£ä¸ºåˆ†ç»„äº¤æ¢ç½‘ä¸Šçš„ä¸åŒä¸»æœºæä¾›é€šä¿¡æœåŠ¡</li><li><strong>IPæ•°æ®æŠ¥ â€“ åˆ†ç»„</strong></li></ul></li><li>æ•°æ®é“¾è·¯å±‚<ul><li><strong>å¸§(frame)</strong></li></ul></li><li>ç‰©ç†å±‚<ul><li><strong>æ¯”ç‰¹(bit)</strong></li></ul></li></ul></blockquote><hr><h2 id="ç‰©ç†å±‚"><a href="#ç‰©ç†å±‚" class="headerlink" title="ç‰©ç†å±‚"></a>ç‰©ç†å±‚</h2><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><blockquote><p>  ç‰©ç†å±‚çš„åè®®ä¹Ÿè¢«ç§°ä¸º<strong>è§„ç¨‹(procedure)</strong></p><p>  ç‰©ç†å±‚çš„ä¸»è¦ä»»åŠ¡</p><ul><li>æœºæ¢°ç‰¹æ€§</li><li>ç”µæ°”ç‰¹æ€§</li><li>åŠŸèƒ½ç‰¹æ€§</li><li>è¿‡ç¨‹ç‰¹æ€§</li></ul></blockquote><h3 id="ä¿¡é“"><a href="#ä¿¡é“" class="headerlink" title="ä¿¡é“"></a>ä¿¡é“</h3><blockquote><ul><li><strong>å•å·¥é€šä¿¡</strong>ï¼šå•å‘é€šä¿¡</li><li><strong>åŠåŒå·¥é€šä¿¡</strong>ï¼šåŒå‘äº¤æ›¿é€šä¿¡</li><li><strong>å…¨åŒå·¥é€šä¿¡</strong>ï¼šåŒå‘åŒæ—¶é€šä¿¡</li></ul></blockquote><h3 id="è°ƒåˆ¶"><a href="#è°ƒåˆ¶" class="headerlink" title="è°ƒåˆ¶"></a>è°ƒåˆ¶</h3><blockquote><ol><li><strong>åŸºå¸¦è°ƒåˆ¶</strong>ï¼šä»…ä»…å¯¹åŸºå¸¦ä¿¡å·çš„æ³¢å½¢è¿›è¡Œå˜æ¢ â€“ <strong>ç¼–ç (coding)</strong></li><li><strong>å¸¦é€šè°ƒåˆ¶</strong>ï¼šä½¿ç”¨**è½½æ³¢(carrier)**è¿›è¡Œè°ƒåˆ¶ï¼Œå°†é¢‘ç‡æé«˜å¹¶è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ã€‚</li></ol></blockquote><h4 id="å¸¸ç”¨ç¼–ç æ–¹å¼"><a href="#å¸¸ç”¨ç¼–ç æ–¹å¼" class="headerlink" title="å¸¸ç”¨ç¼–ç æ–¹å¼"></a>å¸¸ç”¨ç¼–ç æ–¹å¼</h4><blockquote><ul><li><strong>ä¸å½’é›¶åˆ¶</strong>ï¼šæ­£ç”µå¹³ä»£è¡¨1ï¼Œè´Ÿç”µå¹³ä»£è¡¨0</li><li><strong>å½’é›¶åˆ¶</strong>ï¼šæ­£è„‰å†²ä»£è¡¨1ï¼Œè´Ÿè„‰å†²ä»£è¡¨0</li><li><strong>æ›¼å½»æ–¯ç‰¹ç¼–ç </strong>ï¼šä½å‘¨æœŸä¸­å¿ƒå‘ä¸‹è·³è¡¨ç¤º1ï¼Œå‘ä¸Šè·³è¡¨ç¤º0</li><li><strong>å·®åˆ†æ›¼å½»æ–¯ç‰¹</strong>ï¼šåœ¨æ¯ä¸€ä½çš„ä¸­å¿ƒéƒ½æœ‰è·³å˜ã€‚ä½å¼€å§‹è¾¹ç•Œæœ‰è·³å˜ä»£è¡¨0ï¼Œæ²¡æœ‰ä»£è¡¨1</li></ul></blockquote><h4 id="åŸºæœ¬å¸¦é€šè°ƒåˆ¶æ–¹æ³•"><a href="#åŸºæœ¬å¸¦é€šè°ƒåˆ¶æ–¹æ³•" class="headerlink" title="åŸºæœ¬å¸¦é€šè°ƒåˆ¶æ–¹æ³•"></a>åŸºæœ¬å¸¦é€šè°ƒåˆ¶æ–¹æ³•</h4><blockquote><ul><li><strong>è°ƒå¹…(AM)</strong></li><li><strong>è°ƒé¢‘(FM)</strong></li><li><strong>è°ƒç›¸(PM)</strong></li><li><strong>æ­£äº¤æŒ¯å¹…è°ƒåˆ¶QAM</strong></li></ul></blockquote><h3 id="ä¿¡é“çš„æé™å®¹é‡"><a href="#ä¿¡é“çš„æé™å®¹é‡" class="headerlink" title="ä¿¡é“çš„æé™å®¹é‡"></a>ä¿¡é“çš„æé™å®¹é‡</h3><h4 id="ä¿¡å™ªæ¯”"><a href="#ä¿¡å™ªæ¯”" class="headerlink" title="ä¿¡å™ªæ¯”"></a>ä¿¡å™ªæ¯”</h4><blockquote><p>  ä¿¡å·çš„å¹³å‡åŠŸç‡å’Œå™ªå£°çš„å¹³å‡åŠŸç‡ä¹‹æ¯”ï¼š<strong>S&#x2F;N</strong>ï¼Œç”¨åˆ†è´(dB)åšå•ä½</p><p>  <img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20211226221220.png" alt="ä¿¡å™ªæ¯”"></p><p>  <strong>é¦™å†œå…¬å¼</strong></p><p>  <img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153526.png" alt="é¦™å†œå…¬å¼"></p><p>  Wä¸ºä¿¡é“çš„å¸¦å®½(Hz)ï¼ŒSä¸ºä¿¡é“å†…æ‰€ä¼ ä¿¡å·çš„å¹³å‡åŠŸç‡ï¼ŒNä¸ºä¿¡é“å†…éƒ¨é«˜æ–¯å™ªå£°åŠŸç‡</p><p>  é¦™å†œå…¬å¼è¡¨æ˜ï¼š<strong>ä¿¡é“çš„å¸¦å®½æˆ–ä¿¡é“ä¸­çš„ä¿¡å™ªæ¯”è¶Šå¤§ï¼Œä¿¡æ¯çš„æé™ä¼ è¾“é€Ÿç‡å°±è¶Šé«˜</strong></p></blockquote><h3 id="ä¼ è¾“åª’ä½“"><a href="#ä¼ è¾“åª’ä½“" class="headerlink" title="ä¼ è¾“åª’ä½“"></a>ä¼ è¾“åª’ä½“</h3><blockquote><ul><li>åŒç»çº¿</li><li>åŒè½´ç”µç¼†</li><li>å…‰ç¼†</li></ul></blockquote><h3 id="ç åˆ†å¤ç”¨"><a href="#ç åˆ†å¤ç”¨" class="headerlink" title="ç åˆ†å¤ç”¨"></a>ç åˆ†å¤ç”¨</h3><hr><h2 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h2><h3 id="åˆ’åˆ†å­ç½‘"><a href="#åˆ’åˆ†å­ç½‘" class="headerlink" title="åˆ’åˆ†å­ç½‘"></a>åˆ’åˆ†å­ç½‘</h3><blockquote><ul><li>IP åœ°å€åˆ©ç”¨ç‡æœ‰æ—¶å¾ˆä½ï¼šA ç±»ï¼ŒB ç±»</li><li></li></ul></blockquote><h3 id="æ„é€ è¶…ç½‘"><a href="#æ„é€ è¶…ç½‘" class="headerlink" title="æ„é€ è¶…ç½‘"></a>æ„é€ è¶…ç½‘</h3><h2 id="ä¼ è¾“å±‚"><a href="#ä¼ è¾“å±‚" class="headerlink" title="ä¼ è¾“å±‚"></a>ä¼ è¾“å±‚</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><h4 id="åº”ç”¨å±‚åè®®ä¸»è¦ä½¿ç”¨çš„ä¼ è¾“å±‚åè®®"><a href="#åº”ç”¨å±‚åè®®ä¸»è¦ä½¿ç”¨çš„ä¼ è¾“å±‚åè®®" class="headerlink" title="åº”ç”¨å±‚åè®®ä¸»è¦ä½¿ç”¨çš„ä¼ è¾“å±‚åè®®"></a>åº”ç”¨å±‚åè®®ä¸»è¦ä½¿ç”¨çš„ä¼ è¾“å±‚åè®®</h4><blockquote><ul><li>TCP<ul><li>SMTPã€TELNET(è¿œç¨‹ç»ˆç«¯åè®®)ã€HTTPã€FTP</li></ul></li><li>UDP<ul><li>DNSã€TFTP(ç®€å•æ–‡ä»¶ä¼ é€åè®®)ã€RIP(è·¯ç”±ä¿¡æ¯åè®®)ã€DHCP(åŠ¨æ€ä¸»æœºé…ç½®åè®®)ã€SNMP(ç®€å•ç½‘ç»œç®¡ç†åè®®)ã€NFS(wç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ)</li></ul></li></ul></blockquote><h4 id="åº”ç”¨å±‚ä½¿ç”¨çš„ä¼ è¾“å±‚åè®®"><a href="#åº”ç”¨å±‚ä½¿ç”¨çš„ä¼ è¾“å±‚åè®®" class="headerlink" title="åº”ç”¨å±‚ä½¿ç”¨çš„ä¼ è¾“å±‚åè®®"></a>åº”ç”¨å±‚ä½¿ç”¨çš„ä¼ è¾“å±‚åè®®</h4><blockquote><ul><li>TCPï¼š<ul><li>SMTPã€TELNETã€HTTPã€FTP</li></ul></li><li>UDPï¼š<ul><li>DNSã€TFTPã€RIPã€DHCPã€SNMPã€NFSã€IPç”µè¯ã€æµå¼å¤šåª’ä½“</li></ul></li></ul></blockquote><h4 id="å¤ç”¨åˆ†ç”¨"><a href="#å¤ç”¨åˆ†ç”¨" class="headerlink" title="å¤ç”¨åˆ†ç”¨"></a>å¤ç”¨åˆ†ç”¨</h4><blockquote><ul><li><p><strong>å¤ç”¨</strong></p><p>åº”ç”¨å±‚æ‰€æœ‰çš„åº”ç”¨è¿›ç¨‹éƒ½å¯ä»¥é€šè¿‡ä¼ è¾“å±‚å†ä¼ åˆ°ç½‘ç»œå±‚</p></li><li><p><strong>åˆ†ç”¨</strong></p><p>ä¼ è¾“å±‚ä»ç½‘ç»œå±‚æ”¶åˆ°å‘é€ç»™å„åº”ç”¨è¿›ç¨‹çš„æ•°æ®åï¼Œå¿…é¡»åˆ†åˆ«äº¤ä»˜æŒ‡æ˜çš„å„åº”ç”¨è¿›ç¨‹</p></li></ul></blockquote><h4 id="ç«¯å£å·"><a href="#ç«¯å£å·" class="headerlink" title="ç«¯å£å·"></a>ç«¯å£å·</h4><blockquote><p>  TCP&#x2F;IPçš„ä¼ è¾“å±‚ç”¨ä¸€ä¸ª<strong>16</strong>ä½ç«¯å£å·æ¥è¡¨æŒ‡ä¸€ä¸ªç«¯å£ï¼Œå…è®¸æœ‰<strong>65535</strong>ä¸ªä¸åŒç«¯å£å·</p><ol><li><p>æœåŠ¡å™¨ç«¯ä½¿ç”¨çš„ç«¯å£å·</p><ul><li><p><strong>ç†ŸçŸ¥ç«¯å£å·</strong>ï¼š0~1023</p><table><thead><tr><th align="center">åº”ç”¨ç¨‹åº</th><th align="center">FTP</th><th align="center">TELNET</th><th align="center">SMTP</th><th align="center">DNS</th><th align="center">TFTP</th><th align="center">HTTP</th><th align="center">SNMP</th><th align="center">HTTPS</th></tr></thead><tbody><tr><td align="center">ç†ŸçŸ¥ç«¯å£å·</td><td align="center">21</td><td align="center">23</td><td align="center">25</td><td align="center">53</td><td align="center">69</td><td align="center">80</td><td align="center">161</td><td align="center">443</td></tr></tbody></table></li><li><p><strong>ç™»è®°ç«¯å£å·</strong>ï¼š1024~49151</p></li></ul></li><li><p>å®¢æˆ·ç«¯ä½¿ç”¨çš„ç«¯å£å·</p><ul><li>49152~65535</li><li>åˆç§°ä¸ºçŸ­æš‚ç«¯å£å·</li></ul></li></ol></blockquote><hr><h3 id="ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP"><a href="#ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP" class="headerlink" title="ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP"></a>ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><blockquote><p>  UDPåªåœ¨IPçš„æ•°æ®æŠ¥æœåŠ¡ä¸Šå¢åŠ äº†å¾ˆå°‘ä¸€ç‚¹åŠŸèƒ½ï¼š<strong>å¤ç”¨åˆ†ç”¨ã€å·®é”™æ£€æµ‹</strong></p><ol><li>UDPæ˜¯æ— è¿æ¥çš„ï¼Œå³å‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œä¸éœ€è¦ä½¿ç”¨å¥—æ¥å­—(ip:port)</li><li>UDPä½¿ç”¨<strong>å°½æœ€å¤§åŠªåŠ›äº¤ä»˜</strong>ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ï¼Œå› æ­¤ä¸»æœºä¸éœ€è¦ç»´æŠ¤å¤æ‚çš„é“¾æ¥çŠ¶æ€è¡¨</li><li>UDPæ˜¯<strong>é¢å‘æŠ¥æ–‡çš„</strong>ï¼Œå³åº”ç”¨å±‚äº¤ä»˜å¤šå°‘æŠ¥æ–‡ï¼ŒUDPåœ¨æ·»åŠ é¦–éƒ¨åç›´æ¥äº¤ä»˜IPå±‚</li><li>UDP<strong>æ²¡æœ‰æ‹¥å¡æ§åˆ¶</strong></li><li>UDPæ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡</li><li>UDPçš„é¦–éƒ¨å¼€é”€å°</li></ol></blockquote><h4 id="UDPçš„é¦–éƒ¨æ ¼å¼"><a href="#UDPçš„é¦–éƒ¨æ ¼å¼" class="headerlink" title="UDPçš„é¦–éƒ¨æ ¼å¼"></a>UDPçš„é¦–éƒ¨æ ¼å¼</h4><blockquote><p>  UDPçš„é¦–éƒ¨åªæœ‰<strong>8</strong>ä¸ªå­—èŠ‚ï¼Œæ¯ä¸¤ä¸ªå­—èŠ‚ä¸€ä¸ªå­—æ®µ</p><ol><li><strong>æºç«¯å£</strong></li><li><strong>ç›®çš„ç«¯å£</strong></li><li><strong>é•¿åº¦</strong>ï¼šå…¶æœ€å°å€¼æ˜¯<strong>8</strong>ï¼ˆä»…åŒ…å«é¦–éƒ¨ï¼‰</li><li><strong>æ£€éªŒå’Œ</strong>ï¼šæ£€æµ‹æ•°æ®æŠ¥æ˜¯å¦æœ‰å·®é”™</li></ol></blockquote><h4 id="æ£€éªŒå’Œ"><a href="#æ£€éªŒå’Œ" class="headerlink" title="æ£€éªŒå’Œ"></a>æ£€éªŒå’Œ</h4><blockquote><p>  åœ¨é¦–éƒ¨ä¹‹å‰æ·»åŠ <strong>12</strong>ä¸ªå­—èŠ‚çš„<strong>ä¼ªé¦–éƒ¨</strong>ï¼Œ</p></blockquote><hr><h3 id="ä¼ è¾“æ§åˆ¶åè®®TCP"><a href="#ä¼ è¾“æ§åˆ¶åè®®TCP" class="headerlink" title="ä¼ è¾“æ§åˆ¶åè®®TCP"></a>ä¼ è¾“æ§åˆ¶åè®®TCP</h3><h4 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><blockquote><ol><li>TCPæ˜¯<strong>é¢å‘è¿æ¥</strong>çš„ä¼ è¾“å±‚åè®®ï¼Œå³ä¼ è¾“æ•°æ®å‰è¦å»ºç«‹TCPè¿æ¥ï¼Œä¹‹åè¦é‡Šæ”¾TCPè¿æ¥</li><li>TCPè¿æ¥åªæœ‰ä¸¤ä¸ªç«¯ç‚¹</li><li>TCPæä¾›<strong>å¯é äº¤ä»˜</strong>çš„æœåŠ¡ï¼š<strong>æ— å·®é”™ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€æŒ‰åºåˆ°è¾¾</strong></li><li>TCPæä¾›<strong>å…¨åŒå·¥</strong>é€šä¿¡</li><li><strong>é¢å‘å­—èŠ‚æµ</strong></li></ol></blockquote><h4 id="å¯é ä¼ è¾“çš„å·¥ä½œåŸç†"><a href="#å¯é ä¼ è¾“çš„å·¥ä½œåŸç†" class="headerlink" title="å¯é ä¼ è¾“çš„å·¥ä½œåŸç†"></a>å¯é ä¼ è¾“çš„å·¥ä½œåŸç†</h4><blockquote><p>  ç†æƒ³çš„ä¼ è¾“æ¡ä»¶æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>ä¼ è¾“ä¿¡é“ä¸äº§ç”Ÿå·®é”™</li><li>æ¥æ”¶æ–¹æ¥å¾—åŠå¤„ç†æ”¶åˆ°çš„æ•°æ®</li></ul><p>  ä½†å®é™…ç½‘ç»œä¼ è¾“ä¸æ˜¯ç†æƒ³çŠ¶æ€ï¼Œæ•…ï¼š</p><ul><li>å¯ä»¥åœ¨å‡ºç°å·®é”™æ—¶è®©å‘é€æ–¹é‡ä¼ å‡ºç°å·®é”™çš„æ•°æ®</li><li>åœ¨æ¥æ”¶æ–¹æ¥ä¸åŠå¤„ç†æ•°æ®æ—¶ï¼ŒåŠæ—¶å‘Šè¯‰å‘é€æ–¹é™ä½å‘é€é€Ÿåº¦</li></ul></blockquote><h4 id="åœæ­¢ç­‰å¾…åè®®"><a href="#åœæ­¢ç­‰å¾…åè®®" class="headerlink" title="åœæ­¢ç­‰å¾…åè®®"></a>åœæ­¢ç­‰å¾…åè®®</h4><blockquote><p>  æ¯å‘é€å®Œä¸€ä¸ªåˆ†ç»„å°±åœæ­¢å‘é€ï¼Œç­‰å¾…å¯¹æ–¹çš„ç¡®è®¤ï¼Œåœ¨æ”¶åˆ°ç¡®è®¤åå†å‘é€ä¸‹ä¸€ä¸ªåˆ†ç»„</p><ul><li>å‡ºç°å·®é”™ä½¿ç”¨è¶…æ—¶é‡ä¼ ï¼Œè¶…æ—¶è®¡æ—¶å™¨çš„é‡ä¼ æ—¶é—´åº”å½“æ¯”æ•°æ®å†åˆ†ç»„ä¼ è¾“çš„å¹³å‡å¾€è¿”æ—¶é—´æ›´é•¿ä¸€ç‚¹</li><li>ç¡®è®¤ä¸¢å¤±æˆ–è¿Ÿåˆ°æ—¶ï¼Œå‘é€æ–¹ä¼šé‡ä¼ åˆ†ç»„ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°åä¸¢å¼ƒé‡å¤åˆ†ç»„å¹¶è¿”å›ç¡®è®¤ã€‚</li><li>æ­¤å³ä¸º<strong>è‡ªåŠ¨é‡ä¼ åè®®ARQ</strong></li><li>ä¿¡é“åˆ©ç”¨ç‡ä½</li></ul></blockquote><h4 id="è¿ç»­ARQåè®®"><a href="#è¿ç»­ARQåè®®" class="headerlink" title="è¿ç»­ARQåè®®"></a>è¿ç»­ARQåè®®</h4><h4 id="TCPçš„é¦–éƒ¨æ ¼å¼"><a href="#TCPçš„é¦–éƒ¨æ ¼å¼" class="headerlink" title="TCPçš„é¦–éƒ¨æ ¼å¼"></a>TCPçš„é¦–éƒ¨æ ¼å¼</h4><blockquote><p>  é¦–éƒ¨å›ºå®š<strong>20</strong>å­—èŠ‚ï¼Œåé¢æœ‰ 4n å­—èŠ‚æ˜¯æ ¹æ®éœ€è¦è€Œå¢åŠ çš„é€‰é¡¹</p><ol><li>æºç«¯å£å’Œç›®çš„ç«¯å£ï¼Œ<strong>4</strong>å­—èŠ‚</li><li>åºå·ï¼Œ<strong>4</strong>å­—èŠ‚ã€‚èŒƒå›´æ˜¯[0,2^32 - 1]ã€‚è¯¥åºå·ä¸ºæŠ¥æ–‡æ®µçš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ï¼ˆé¢å‘å­—èŠ‚æµï¼‰</li><li>ç¡®è®¤å·ï¼Œ<strong>4</strong>å­—èŠ‚ã€‚æœŸæœ›æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„åºå·</li><li>æ•°æ®åç§»ï¼Œ<strong>1</strong>å­—èŠ‚(4ä½)ã€‚</li><li>ä¿ç•™ï¼Œ<strong>6</strong>ä½ã€‚</li><li>URG ACK PSH RET SYN FINï¼Œ<strong>6</strong>ä½ã€‚</li><li>çª—å£ï¼Œ<strong>2</strong>å­—èŠ‚ã€‚</li><li>æ£€éªŒå’Œï¼Œ<strong>2</strong>å­—èŠ‚ã€‚</li><li>ç´§æ€¥æŒ‡é’ˆï¼Œ<strong>2</strong>å­—èŠ‚ã€‚</li><li>é€‰é¡¹ï¼Œé•¿åº¦å¯å˜ï¼Œæœ€é•¿å¯è¾¾<strong>40</strong>å­—èŠ‚ã€‚å¡«å……å­—æ®µæ˜¯ä¸ºäº†ä½¿æ•´ä¸ªTCPé¦–éƒ¨é•¿åº¦ä½¿<strong>4</strong>å­—èŠ‚çš„æ•´æ•°å€</li></ol></blockquote><h4 id="TCPçš„æµé‡æ§åˆ¶"><a href="#TCPçš„æµé‡æ§åˆ¶" class="headerlink" title="TCPçš„æµé‡æ§åˆ¶"></a>TCPçš„æµé‡æ§åˆ¶</h4><blockquote><p>  è®¾Aå‘Bå‘é€æ•°æ®ï¼Œåœ¨è¿æ¥å»ºç«‹æ—¶Bå‘Aå‘é€<strong>æ¥æ”¶çª—å£å¤§å° rwnd &#x3D; xx</strong></p><p>  TCPä¸ºæ¯ä¸€ä¸ªè¿æ¥è®¾æœ‰ä¸€ä¸ª<strong>æŒç»­è®¡æ—¶å™¨</strong>ï¼Œåªè¦TCPè¿æ¥çš„ä¸€æ–¹æ”¶åˆ°å¯¹æ–¹çš„é›¶çª—å£é€šçŸ¥ï¼Œå°±å¯åŠ¨æŒç»­è®¡æ—¶å™¨ï¼Œæ—¶é—´åˆ°äº†å°±å‘é€ä¸€ä¸ªé›¶çª—å£<strong>æ¢æµ‹æŠ¥æ–‡æ®µ</strong>ï¼ˆä»…æºå¸¦1å­—èŠ‚çš„æ•°æ®ï¼‰ã€‚</p><p>  <strong>ç³Šæ¶‚çª—å£ç»¼åˆå¾</strong>ï¼šæ¥æ”¶æ–¹åœ¨ç¼“å­˜åˆšæœ‰ä¸€ç‚¹å°ç©ºé—´çš„æ—¶å€™å°±æ€¥å¿™æŠŠçª—å£å¤§å°ä¿¡æ¯å‘é€ç»™å‘é€æ–¹</p></blockquote><h4 id="TCPçš„æ‹¥å¡æ§åˆ¶"><a href="#TCPçš„æ‹¥å¡æ§åˆ¶" class="headerlink" title="TCPçš„æ‹¥å¡æ§åˆ¶"></a>TCPçš„æ‹¥å¡æ§åˆ¶</h4><blockquote><p>  TCPæ‹¥å¡æ§åˆ¶çš„ç®—æ³•æœ‰å››ç§ï¼š<strong>æ…¢å¼€å§‹ã€æ‹¥å¡é¿å…ã€å¿«é‡ä¼ ã€å¿«æ¢å¤</strong></p><p>  <strong>æ…¢å¼€å§‹ï¼š</strong></p><ul><li><p>ç”±å°åˆ°å¤§é€æ¸å¢å¤§æ‹¥å¡çª—å£æ•°å€¼</p></li><li><table><thead><tr><th align="center">SMSSæ•°å€¼</th><th align="center">å¤§äº2190</th><th align="center">å°äº2190å¤§äº1095</th><th align="center">å°äº1095</th></tr></thead><tbody><tr><td align="center">çª—å£å¤§å°</td><td align="center">2 * SMSS</td><td align="center">3 * SMSS</td><td align="center">4 * SMSS</td></tr></tbody></table></li><li><p>æ¯æ”¶åˆ°ä¸€ä¸ªå¯¹æ–°çš„æŠ¥æ–‡æ®µçš„ç¡®è®¤ï¼Œæ‹¥å¡çª—å£å¢åŠ æœ€å¤šä¸€ä¸ªSMSSã€‚</p></li><li><p>æ‹¥å¡çª—å£æ¯æ¬¡å¢åŠ é‡ cwnd &#x3D; min(N, SMSS)ï¼ŒNä¸ºç¡®è®¤æŠ¥æ–‡æ®µæ‰€ç¡®è®¤çš„å­—èŠ‚æ•°</p></li></ul><p>  <strong>æ‹¥å¡é¿å…ï¼š</strong></p><ul><li>ä¸ºäº†é˜²æ­¢ cwnd å¢é•¿è¿‡å¤§ï¼Œè¿˜éœ€è¦è®¾ç½®ä¸€ä¸ª**æ…¢å¼€å§‹é—¨é™(ssthresh)**ã€‚</li><li>å½“ cwnd &lt; ssthresh æ—¶ï¼Œä½¿ç”¨æ…¢å¼€å§‹ï¼›å½“ cwnd &gt; ssthresh æ—¶æ”¹ç”¨æ‹¥å¡é¿å…ï¼›ç›¸ç­‰æ—¶ä¸¤è€…çš†å¯</li><li>æ‹¥å¡é¿å…ç®—æ³•æ˜¯è®© cwnd ä½¿ç”¨**åŠ æ³•å¢å¤§(Additive Increase)**ï¼Œå³ç»è¿‡ä¸€ä¸ª RTT å cwnd + 1</li><li>å½“ç½‘ç»œå‡ºç°è¶…æ—¶çš„æ—¶å€™ï¼Œè°ƒæ•´é—¨é™ ssthresh &#x3D; cwnd &#x2F; 2ï¼ŒåŒæ—¶è®¾ç½® cwnd &#x3D; 1ï¼Œè¿›å…¥æ…¢å¼€å§‹é˜¶æ®µ</li></ul><p>  <strong>å¿«é‡ä¼ ï¼š</strong></p><ul><li>é‡‡ç”¨å¿«é‡ä¼ å¯ä»¥è®©å‘é€æ–¹<strong>å°½æ—©å‘ç°ä¸ªåˆ«æŠ¥æ–‡æ®µçš„ä¸¢å¤±</strong></li><li>æ¥æ”¶æ–¹å³ä½¿æ”¶åˆ°äº†å¤±åºçš„æŠ¥æ–‡æ®µï¼Œä¹Ÿè¦ç«‹å³å‘å‡ºå¯¹å·²æ”¶åˆ°æŠ¥æ–‡æ®µçš„ç¡®è®¤ã€‚</li><li>å½“å‘é€æ–¹æ”¶åˆ°**è¿ç»­ä¸‰ä¸ªå¯¹åŒä¸€æŠ¥æ–‡æ®µçš„é‡å¤ç¡®è®¤(3-ACK)**æ—¶ï¼Œç«‹å³è¿›è¡Œé‡ä¼ </li></ul><p>  <strong>å¿«æ¢å¤ï¼š</strong></p><ul><li>å½“å‘é€æ–¹çŸ¥é“åªæ˜¯ä¸¢å¤±äº†ä¸ªåˆ«æŠ¥æ–‡æ®µæ—¶ï¼Œæ‰§è¡Œå¿«æ¢å¤ç®—æ³•</li><li>è®¾ç½® ssthresh &#x3D; cwnd &#x2F; 2ï¼Œcwnd &#x3D; ssthreshï¼Œå¹¶å¼€å§‹æ‰§è¡Œæ‹¥å¡é¿å…ç®—æ³•</li></ul></blockquote><h4 id="TCPçš„è¿æ¥å»ºç«‹"><a href="#TCPçš„è¿æ¥å»ºç«‹" class="headerlink" title="TCPçš„è¿æ¥å»ºç«‹"></a>TCPçš„è¿æ¥å»ºç«‹</h4><blockquote><p>  è®¾ A æ˜¯å®¢æˆ·ä¸»æœºï¼ŒB æ˜¯æœåŠ¡ä¸»æœºã€‚å‘é€æ•°æ®TCPå»ºç«‹è¿æ¥è¿‡ç¨‹è¦ç»è¿‡<strong>ä¸‰æ¬¡æ¡æ‰‹</strong>ï¼Œå³ A å’Œ B ä¹‹é—´äº¤æ¢ä¸‰ä¸ªTCPæŠ¥æ–‡æ®µ</p><ul><li>B çš„TCPè¿›ç¨‹åˆ›å»ºä¼ è¾“æ§åˆ¶å¿« <strong>TCB</strong>ï¼ŒæœåŠ¡å™¨ä» <strong>CLOSED</strong>åˆ° <strong>LISTEN(æ”¶å¬)</strong> çŠ¶æ€</li><li>A çš„å®¢æˆ·è¿›ç¨‹ä¹Ÿåˆ›å»ºTCBï¼Œå‘ B å‘å‡ºè¿æ¥å»ºç«‹è¯·æ±‚ï¼š<strong>SYN &#x3D; 1, seq &#x3D; x</strong>ï¼Œæ¶ˆè€—ä¸€ä¸ªåºå·ã€‚æ­¤æ—¶ A è¿›å…¥ **SYN-SENT(åŒæ­¥å·²å‘é€)**çŠ¶æ€</li><li>B æ”¶åˆ°è¿æ¥å»ºç«‹è¯·æ±‚æŠ¥æ–‡æ®µåï¼Œå¦‚åŒæ„å»ºç«‹è¿æ¥ï¼Œåˆ™å‘ A å‘é€ç¡®è®¤ï¼š<strong>SYN &#x3D; 1, ACK &#x3D; 1, ack &#x3D; x + 1, seq &#x3D; y</strong>ï¼ŒåŒæ ·æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚æ­¤æ—¶ B è¿›å…¥ <strong>SYN-RCVD(åŒæ­¥æ”¶åˆ°)</strong> çŠ¶æ€</li><li>A æ”¶åˆ° B çš„ç¡®è®¤åï¼Œè¿˜è¦å‘ B å‘é€ç¡®è®¤ï¼š<strong>ACK &#x3D; 1, seq &#x3D; x + 1, ack &#x3D; y + 1</strong>ï¼ŒACK æŠ¥æ–‡æ®µå¯ä»¥æºå¸¦æ•°æ®ï¼Œå¦‚æœæºå¸¦åˆ™ä¸æ¶ˆè€—åºå·ã€‚æ­¤æ—¶ A è¿›å…¥ <strong>ESTABLISHED(è¿æ¥å·²å»ºç«‹)</strong> çŠ¶æ€</li><li>B æ”¶åˆ° A çš„ç¡®è®¤åï¼Œä¹Ÿè¿›å…¥ <strong>ESTABLISHED</strong> çŠ¶æ€</li></ul><p>  <img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153536.png" alt="ä½¿ç”¨ä¸‰æŠ¥æ–‡æ¡æ‰‹å»ºç«‹TCPè¿æ¥"></p><p>  ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ä¸¤æ¬¡æ¡æ‰‹ï¼Ÿ</p><ul><li>å¦‚æœ A åœ¨å‘ B å‘é€è¿æ¥å»ºç«‹è¯·æ±‚æ—¶ï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚åœ¨ç½‘ç»œæ»ç•™ï¼Œç¬¬äºŒæ¬¡å‘é€æˆåŠŸå»ºç«‹ï¼Œåœ¨é‡Šæ”¾è¿æ¥åï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚åˆåˆ°è¾¾ Bã€‚å¦‚æœé‡‡ç”¨ä¸¤æ¬¡æ¡æ‰‹ï¼ŒB æ”¶åˆ°è¿æ¥å»ºç«‹è¯·æ±‚åå°±è¿›å…¥ <strong>ESTABLISHED</strong> çŠ¶æ€ï¼Œæµªè´¹äº† B çš„èµ„æº</li><li>é‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ A å°±ä¸ä¼šç†ç¬ B å‘é€çš„æ•°æ®</li></ul><p>  ä¸ºä»€ä¹ˆä¸é€‚ç”¨å››æ¬¡æ¡æ‰‹ï¼Ÿ</p><ul><li>ä¸‰æ¬¡æ¡æ‰‹è¶³å¤Ÿå»ºç«‹è¿æ¥</li></ul></blockquote><h4 id="TCPçš„è¿æ¥é‡Šæ”¾"><a href="#TCPçš„è¿æ¥é‡Šæ”¾" class="headerlink" title="TCPçš„è¿æ¥é‡Šæ”¾"></a>TCPçš„è¿æ¥é‡Šæ”¾</h4><blockquote><p>  è®¾ A æ˜¯å®¢æˆ·ä¸»æœºï¼ŒB æ˜¯æœåŠ¡ä¸»æœºã€‚TCPçš„è¿æ¥é‡Šæ”¾éœ€è¦ç»è¿‡<strong>å››æ¬¡æŒ¥æ‰‹</strong>è¿‡ç¨‹ã€‚</p><ul><li>å‡è®¾ A å…ˆå‘ B å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µï¼Œå¹¶åœæ­¢å‘é€æ•°æ®ï¼š<strong>FIN &#x3D; 1, seq &#x3D; u</strong>ï¼Œu æ˜¯å‘é€çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ 1ï¼Œæ­¤æ—¶ A è¿›å…¥ **FIN-WAIT-1(ç»ˆæ­¢ç­‰å¾…1) **çŠ¶æ€ï¼Œç­‰å¾… B çš„ç¡®è®¤ã€‚</li><li>B æ”¶åˆ°è¿æ¥é‡Šæ”¾è¯·æ±‚åå‘å‡ºç¡®è®¤ï¼š<strong>ACK &#x3D; 1, ack &#x3D; u + 1, seq &#x3D; v</strong>ï¼Œv ç­‰äº B å‘é€çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ 1ã€‚æ­¤æ—¶ B è¿›å…¥ <strong>CLOSE-WAIT(å…³é—­ç­‰å¾…)</strong> çŠ¶æ€ï¼Œæ­¤æ—¶çš„ TCP è¿æ¥å¤„äº<strong>åŠå…³é—­</strong> çŠ¶æ€ï¼Œå³ A å·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€ï¼Œå¦‚æœ B è¦å‘é€æ•°æ®ï¼ŒA ä»è¦æ¥å—ã€‚</li><li>A æ”¶åˆ° B çš„ç¡®è®¤åï¼Œè¿›å…¥ <strong>FIN-WAIT-2(ç»ˆæ­¢ç­‰å¾…2)</strong> çŠ¶æ€ï¼Œç­‰å¾… B å‘å‡ºçš„è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µã€‚</li><li>è‹¥ B å·²ç»æ²¡æœ‰è¦å‘é€çš„æ•°æ®ï¼Œåˆ™åº”ç”¨è¿›ç¨‹é€šçŸ¥ TCP é‡Šæ”¾è¿æ¥ï¼š<strong>FIN &#x3D; 1, ACK &#x3D; 1, ack &#x3D; u + 1, seq &#x3D; w</strong>ï¼Œæ­¤æ—¶ B è¿›å…¥ <strong>LAST-ACK(æœ€åç¡®è®¤)</strong> çŠ¶æ€ã€‚</li><li>A åœ¨æ”¶åˆ° B çš„è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µåï¼Œå¯¹æ­¤å‘å‡ºç¡®è®¤ï¼š<strong>ACK &#x3D; 1, seq &#x3D; u + 1, ack &#x3D; w + 1</strong>ï¼Œå‰é¢ FIN æ¶ˆè€—äº†ä¸€ä¸ªåºå·ï¼Œæ­¤æ—¶ A è¿›å…¥ <strong>TIME-WAIT(æ—¶é—´ç­‰å¾…)</strong> çŠ¶æ€ï¼Œç»è¿‡<strong>æ—¶é—´ç­‰å¾…è®¡æ—¶å™¨</strong>è®¾ç½®çš„æ—¶é—´ <strong>2MSL</strong> åï¼ŒA è¿›å…¥ <strong>CLOSED</strong> çŠ¶æ€</li><li>B æ”¶åˆ° A çš„ç¡®è®¤åè¿›å…¥ <strong>CLOSED</strong> çŠ¶æ€ã€‚</li></ul><p>  <img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153541.png" alt="TCPè¿æ¥é‡Šæ”¾è¿‡ç¨‹"></p><p>  ä¸ºä»€ä¹ˆè¦ç­‰å¾… <strong>2MSLï¼ˆæœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½ï¼‰</strong></p></blockquote><hr><h2 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h2><h3 id="åŸŸåç³»ç»ŸDNS"><a href="#åŸŸåç³»ç»ŸDNS" class="headerlink" title="åŸŸåç³»ç»ŸDNS"></a>åŸŸåç³»ç»ŸDNS</h3><h4 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><blockquote><p>  åŸŸåç³»ç»ŸDNS(Domain Name System)èƒ½å¤ŸæŠŠäº’è”ç½‘ä¸Šçš„ä¸»æœºåå­—è½¬æ¢ä¸ºIPåœ°å€</p></blockquote><h4 id="åŸŸåæœåŠ¡å™¨"><a href="#åŸŸåæœåŠ¡å™¨" class="headerlink" title="åŸŸåæœåŠ¡å™¨"></a>åŸŸåæœåŠ¡å™¨</h4><blockquote><ul><li>æ ¹åŸŸåæœåŠ¡å™¨</li><li>é¡¶çº§åŸŸåæœåŠ¡å™¨</li><li>æƒé™åŸŸåæœåŠ¡å™¨</li><li>æœ¬åœ°åŸŸåæœåŠ¡å™¨</li></ul></blockquote><h3 id="æ–‡ä»¶ä¼ é€åè®®"><a href="#æ–‡ä»¶ä¼ é€åè®®" class="headerlink" title="æ–‡ä»¶ä¼ é€åè®®"></a>æ–‡ä»¶ä¼ é€åè®®</h3><h3 id="HTTPåè®®"><a href="#HTTPåè®®" class="headerlink" title="HTTPåè®®"></a>HTTPåè®®</h3><h4 id="HTTP1-0å’ŒHTTP1-1"><a href="#HTTP1-0å’ŒHTTP1-1" class="headerlink" title="HTTP1.0å’ŒHTTP1.1"></a>HTTP1.0å’ŒHTTP1.1</h4><blockquote><p>  HTTPåè®®æœ¬èº«æ˜¯æ— è¿æ¥çš„ï¼Œå»ºç«‹åœ¨TCPè¿æ¥ä¸Šã€‚</p><p>  <strong>HTTP1.0</strong></p><ul><li>æ¯è¯·æ±‚ä¸€ä¸ªæ–‡æ¡£å°±æœ‰ä¸¤å€RTTçš„å¼€é”€ï¼ˆå»ºç«‹TCPè¿æ¥+è¯·æ±‚å“åº”ï¼‰</li></ul><p>  <strong>HTTP1.1</strong></p><p>  HTTP&#x2F;1.1ä½¿ç”¨<strong>æŒç»­é“¾æ¥</strong>ï¼Œæœ‰<strong>éæµæ°´çº¿æ–¹å¼</strong>å’Œ<strong>æµæ°´çº¿æ–¹å¼</strong>ä¸¤ç§å·¥ä½œæ–¹å¼</p><ul><li>éæµæ°´çº¿æ–¹å¼<ul><li>èŠ‚çœäº†å»ºç«‹TCPè¿æ¥çš„å¼€é”€</li><li>æ”¶åˆ°å‰ä¸€ä¸ªçš„å“åº”åæ‰è¿”å›ä¸‹ä¸€ä¸ªè¯·æ±‚</li><li>å½“æœåŠ¡å™¨å‘é€ä¸€ä¸ªå“åº”åï¼ŒTCPè¿æ¥å¤„äºç©ºé—²çŠ¶æ€ï¼Œæµªè´¹æœåŠ¡å™¨èµ„æº</li></ul></li><li>æµæ°´çº¿æ–¹å¼<ul><li>å®¢æˆ·åœ¨æ”¶åˆ°å“åº”æŠ¥æ–‡å‰å°±èƒ½å¤Ÿæ¥ç€å‘é€æ–°çš„è¯·æ±‚æŠ¥æ–‡</li><li>æ‰€æœ‰å¯¹è±¡åªéœ€èŠ±è´¹ä¸€ä¸ªRTTæ—¶é—´</li></ul></li></ul></blockquote><h4 id="æŠ¥æ–‡ç»“æ„"><a href="#æŠ¥æ–‡ç»“æ„" class="headerlink" title="æŠ¥æ–‡ç»“æ„"></a>æŠ¥æ–‡ç»“æ„</h4><blockquote><p>  <strong>è¯·æ±‚æŠ¥æ–‡</strong></p><ul><li>è¯·æ±‚è¡Œ<ul><li>æ–¹æ³• URL HTTPç‰ˆæœ¬</li></ul></li><li>é¦–éƒ¨è¡Œ</li><li>ç©ºè¡Œ</li><li>è¯·æ±‚ä½“</li></ul><p>  <strong>å“åº”æŠ¥æ–‡</strong></p><ul><li>çŠ¶æ€è¡Œ<ul><li>ç‰ˆæœ¬ çŠ¶æ€ç  çŸ­è¯­</li></ul></li><li>é¦–éƒ¨è¡Œ</li><li>ç©ºè¡Œ</li><li>å“åº”ä½“</li></ul></blockquote><h4 id="çŠ¶æ€ç "><a href="#çŠ¶æ€ç " class="headerlink" title="çŠ¶æ€ç "></a>çŠ¶æ€ç </h4><blockquote><table><thead><tr><th align="left">çŠ¶æ€ç </th><th>çŸ­è¯­</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td align="left">200</td><td>OK</td><td>å“åº”æˆåŠŸ</td></tr><tr><td align="left">301</td><td>Moved Permanently</td><td>è¯·æ±‚å¯¹è±¡å·²è¢«æ°¸ä¹…è½¬ç§»ï¼Œæ–°çš„URLå®šä¹‰åœ¨å“åº”æŠ¥æ–‡çš„é¦–éƒ¨è¡Œï¼Œå®¢æˆ·ç«¯å°†è‡ªåŠ¨è·å–</td></tr><tr><td align="left">400</td><td>Bad Request</td><td>é€šç”¨çš„å·®é”™ä»£ç ï¼Œè¯·æ±‚ä¸èƒ½è¢«æœåŠ¡å™¨ç†è§£ã€‚</td></tr><tr><td align="left">401</td><td>Unauthorized</td><td>æœªè®¤è¯ï¼Œç¼ºä¹ç›¸å…³æƒé™</td></tr><tr><td align="left">402</td><td>Payment Required</td><td>ä¿ç•™ï¼Œå°†æ¥ä½¿ç”¨</td></tr><tr><td align="left">403</td><td>Forbidden</td><td>é€šç”¨çš„å·®é”™ä»£ç ï¼Œè¯·æ±‚ä¸èƒ½è¢«æœåŠ¡å™¨ç†è§£ã€‚</td></tr><tr><td align="left">404</td><td>Not Found</td><td>è¢«è¯·æ±‚çš„æ–‡æ¡£ä¸åœ¨æœåŠ¡å™¨ä¸Šï¼Œæœ‰å¯èƒ½å› ä¸ºè¯·æ±‚ URL å‡ºé”™ã€‚</td></tr><tr><td align="left">405</td><td>Method Not Allowed</td><td>å®¢æˆ·ç«¯ä¸­è¯·æ±‚çš„æ–¹æ³•è¢«ç¦æ­¢ï¼Œä¾‹å¦‚é™åˆ¶ POST æ–¹å¼ä½†ä½¿ç”¨äº† GET è®¿é—®ã€‚</td></tr><tr><td align="left">500</td><td>Internal Server Error</td><td>å®¢æˆ·ç«¯ä¸­è¯·æ±‚çš„æ–¹æ³•è¢«ç¦æ­¢ï¼Œä¾‹å¦‚é™åˆ¶ POST æ–¹å¼ä½†ä½¿ç”¨äº† GET è®¿é—®ã€‚</td></tr><tr><td align="left">502</td><td>Bad Gateway</td><td>ä½œä¸ºç½‘å…³æˆ–ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»è¿œç¨‹æœåŠ¡å™¨æ”¶åˆ°äº†ä¸€ä¸ªæ— æ•ˆå“åº”ã€‚</td></tr></tbody></table></blockquote><h4 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h4><blockquote><p>  HTTP over SSL</p><p>  å®¢æˆ·ç«¯å…ˆå‘æœåŠ¡å™¨ç«¯ç´¢è¦å…¬é’¥ï¼Œç„¶åç”¨å…¬é’¥åŠ å¯†ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¯†æ–‡åï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚</p><p>  æ‰€ä»¥è¿™é‡Œå°±éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹æƒå¨æœºæ„ CA ï¼ˆæ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼‰ï¼Œå°†<strong>ã€ŒæœåŠ¡å™¨å…¬é’¥æ”¾åœ¨æ•°å­—è¯ä¹¦ã€</strong>ï¼ˆç”±æ•°å­—è¯ä¹¦è®¤è¯æœºæ„é¢å‘ï¼‰ä¸­ï¼Œåªè¦è¯ä¹¦æ˜¯å¯ä¿¡çš„ï¼Œå…¬é’¥å°±æ˜¯å¯ä¿¡çš„ã€‚</p></blockquote><blockquote><p>  <strong>SSLè¿æ¥è¿‡ç¨‹</strong> </p><ol><li><p>Clientå‘èµ·ä¸€ä¸ªHTTPSçš„è¯·æ±‚</p></li><li><p>ServeræŠŠäº‹å…ˆé…ç½®å¥½çš„å…¬é’¥è¯ä¹¦è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></li><li><p>ClientéªŒè¯å…¬é’¥è¯ä¹¦ï¼šæ¯”å¦‚æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ï¼Œè¯ä¹¦çš„ç”¨é€”æ˜¯ä¸æ˜¯åŒ¹é…Clientè¯·æ±‚çš„ç«™ç‚¹ï¼Œæ˜¯ä¸æ˜¯åœ¨CRLåŠé”€åˆ—è¡¨é‡Œé¢ï¼Œå®ƒçš„ä¸Šä¸€çº§è¯ä¹¦æ˜¯å¦æœ‰æ•ˆï¼Œè¿™æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œç›´åˆ°éªŒè¯åˆ°æ ¹è¯ä¹¦ï¼ˆæ“ä½œç³»ç»Ÿå†…ç½®çš„Rootè¯ä¹¦æˆ–è€…Clientå†…ç½®çš„Rootè¯ä¹¦ï¼‰ï¼Œå¦‚æœéªŒè¯é€šè¿‡åˆ™ç»§ç»­ï¼Œä¸é€šè¿‡åˆ™æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ã€‚</p></li><li><p>Clientä½¿ç”¨ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ç”ŸæˆåŠ å¯†æ‰€ä½¿ç”¨çš„å¯¹ç§°å¯†é’¥ï¼Œç„¶åç”¨è¯ä¹¦çš„å…¬é’¥åŠ å¯†è¿™ä¸ªå¯¹ç§°å¯†é’¥ï¼Œå‘ç»™Serverã€‚</p></li><li><p>Clientä½¿ç”¨ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ç”ŸæˆåŠ å¯†æ‰€ä½¿ç”¨çš„å¯¹ç§°å¯†é’¥ï¼Œç„¶åç”¨è¯ä¹¦çš„å…¬é’¥åŠ å¯†è¿™ä¸ªå¯¹ç§°å¯†é’¥ï¼Œå‘ç»™Serverã€‚</p></li><li><p>Serverä½¿ç”¨å¯¹ç§°å¯†é’¥åŠ å¯†æ˜æ–‡å†…å®¹Aï¼Œå‘é€ç»™Clientã€‚</p></li><li><p>Clientä½¿ç”¨å¯¹ç§°å¯†é’¥è§£å¯†å“åº”çš„å¯†æ–‡ï¼Œå¾—åˆ°æ˜æ–‡å†…å®¹Aã€‚<strong>SSLå»ºç«‹</strong></p></li><li><p>Clientå†æ¬¡å‘èµ·HTTPSçš„è¯·æ±‚ï¼Œä½¿ç”¨å¯¹ç§°å¯†é’¥åŠ å¯†è¯·æ±‚çš„æ˜æ–‡å†…å®¹Bï¼Œç„¶åServerä½¿ç”¨å¯¹ç§°å¯†é’¥è§£å¯†å¯†æ–‡ï¼Œå¾—åˆ°æ˜æ–‡å†…å®¹Bã€‚</p></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
            <tag> æ¦‚è¿° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java ç±»åŠ è½½è¿‡ç¨‹</title>
      <link href="/2022/03/28/Java%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B/"/>
      <url>/2022/03/28/Java%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaç±»åŠ è½½è¿‡ç¨‹"><a href="#Javaç±»åŠ è½½è¿‡ç¨‹" class="headerlink" title="Javaç±»åŠ è½½è¿‡ç¨‹"></a>Javaç±»åŠ è½½è¿‡ç¨‹</h1><p>Javaä¸­ç±»çš„åŠ è½½è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206154017.png" alt="ç±»åŠ è½½è¿‡ç¨‹"></p><p>å…¶ä¸­<strong>è¿æ¥</strong>è¿‡ç¨‹åˆåˆ†ä¸‰æ­¥ï¼š<strong>éªŒè¯â€“&gt;å‡†å¤‡â€“&gt;è§£æ</strong></p><blockquote><ul><li><strong>åŠ è½½ï¼š</strong><ul><li>é€šè¿‡ä¸€ä¸ªç±»çš„<strong>å®Œå…¨é™å®š</strong>æŸ¥æ‰¾æ­¤ç±»å­—èŠ‚ç æ–‡ä»¶ï¼Œå¹¶åˆ©ç”¨å­—èŠ‚ç æ–‡ä»¶åˆ›å»ºä¸€ä¸ª Class æ–‡ä»¶</li></ul></li><li><strong>éªŒè¯ï¼š</strong><ul><li>ç¡®ä¿ Class æ–‡ä»¶å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºè¦æ±‚ï¼Œä¸ä¼šå±å®³è™šæ‹Ÿæœºå®‰å…¨ã€‚ä¸»è¦åŒ…æ‹¬<strong>æ–‡ä»¶æ ¼å¼éªŒè¯</strong>ã€<strong>å…ƒæ•°æ®éªŒè¯</strong>ã€<strong>å­—èŠ‚ç éªŒè¯</strong>ã€<strong>ç¬¦å·å¼•ç”¨éªŒè¯</strong></li></ul></li><li><strong>å‡†å¤‡ï¼š</strong><ul><li>ä¸º<strong>ç±»å˜é‡</strong>åˆ†é…å†…å­˜å¹¶èµ‹åˆå€¼ï¼Œæ­¤å¤„ä¸åŒ…æ‹¬ final ä¿®é¥°çš„å˜é‡</li></ul></li><li><strong>è§£æï¼š</strong><ul><li>ä¸»è¦å°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨è½¬å˜ä¸ºç›´æ¥å¼•ç”¨</li></ul></li><li><strong>åˆå§‹åŒ–ï¼š</strong><ul><li>è‹¥è¯¥ç±»å…·æœ‰è¶…ç±»ï¼Œåˆ™å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰§è¡Œé™æ€åˆå§‹åŒ–å™¨å’Œé™æ€åˆå§‹åŒ–å˜é‡ã€‚</li></ul></li></ul></blockquote><hr><h2 id="åŒäº²å§”æ´¾æ¨¡å‹"><a href="#åŒäº²å§”æ´¾æ¨¡å‹" class="headerlink" title="åŒäº²å§”æ´¾æ¨¡å‹"></a>åŒäº²å§”æ´¾æ¨¡å‹</h2><p><strong>ä¸‰å±‚ç±»åŠ è½½å™¨</strong></p><blockquote><ul><li>å¯åŠ¨ç±»åŠ è½½å™¨ BootStrap ClassLoaderï¼šè´Ÿè´£åŠ è½½å­˜æ”¾åœ¨ \lib ç›®å½•æˆ–è¢« -Xbootclaspath å‚æ•°ï¼Œå¯åŠ¨ç±»åŠ è½½å™¨æ— æ³•è¢« Java ç¨‹åºç›´æ¥å¼•ç”¨ï¼Œç”¨æˆ·åœ¨è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ—¶ï¼Œéœ€è¦ç»™å¼•å¯¼ç±»åŠ è½½å™¨å¤„ç†</li><li>æ‰©å±•ç±»åŠ è½½å™¨ Extension Classloaderï¼šè´Ÿè´£åŠ è½½ \lib\ext ç›®å½•æˆ–è€…è¢« java.ext.dirs ç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„ç›®å½•ä¸­çš„æ‰€æœ‰ç±»åº“</li><li>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ Application Classloaderï¼ˆä¹Ÿå«ç³»ç»Ÿç±»åŠ è½½å™¨ï¼‰ï¼šè´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ ClassPath ä¸Šçš„æ‰€æœ‰ç±»åº“</li></ul></blockquote><p><strong>ä¸¤ä¸ª class å¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªç±»å¯¹è±¡</strong></p><blockquote><ul><li>ç±»çš„å…¨é™å®šåï¼ŒåŒ…æ‹¬åŒ…åå¿…é¡»ä¸€è‡´</li><li>åŠ è½½è¿™ä¸ªç±»çš„ ClassLoader å¿…é¡»ç›¸åŒï¼Œå³ ClassLoader å®ä¾‹å¯¹è±¡</li></ul></blockquote><p><strong>åŒäº²å§”æ´¾æ¨¡å‹åŠ è½½è¿‡ç¨‹</strong></p><blockquote><ol><li>å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°ç±»åŠ è½½è¯·æ±‚ï¼Œå®ƒé¦–å…ˆä¸ä¼šè‡ªå·±å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯æŠŠè¯·æ±‚å§”æ‰˜åˆ°çˆ¶ç±»æ‰§è¡Œã€‚</li><li>æ¯ä¸€å±‚æ¬¡çš„ç±»åŠ è½½å™¨éƒ½ä¼šå§”æ‰˜å…¶çˆ¶ç±»åŠ è½½å™¨å»å®Œæˆï¼Œæœ€ç»ˆä¼ å›æœ€é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ä¸­ã€‚</li><li>åªæœ‰å½“æ‰€æœ‰çˆ¶ç±»åŠ è½½å™¨éƒ½æ— æ³•å®Œæˆè¿™ä¸ªç±»çš„åŠ è½½è¯·æ±‚æ—¶ï¼Œå­ç±»åŠ è½½å™¨æ‰ä¼šè¿›è¡ŒåŠ è½½</li></ol><p>  <strong>ä½œç”¨</strong>ï¼š</p><ul><li>è¿™æ ·å¯ä»¥é¿å…é‡å¤åŠ è½½ç±»ï¼Œå½“çˆ¶ç±»å·²ç»åŠ è½½äº†è¯¥ç±»æ—¶ï¼Œå°±æ²¡å¿…è¦å†åŠ è½½ä¸€æ¬¡</li><li>è€ƒè™‘åˆ°å®‰å…¨å› ç´ ï¼ŒåŒäº²å§”æ´¾æ¨¡å‹å¯ä»¥é¿å…å­ç±»åŠ è½½å™¨åŠ è½½å·²ç»è¢«çˆ¶ç±»åŠ è½½å™¨åŠ è½½è¿‡çš„ç±»ã€‚</li></ul></blockquote><p><strong>ç ´ååŒäº²å§”æ´¾æ¨¡å‹</strong></p><blockquote><p>  ä¸ºä»€ä¹ˆè¦ç ´ååŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿ</p><ul><li>å› ä¸ºç±»åŠ è½½å™¨å—åˆ°åŠ è½½èŒƒå›´çš„é™åˆ¶ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹çˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½åˆ°éœ€è¦çš„æ–‡ä»¶ï¼Œè¿™æ˜¯å°±éœ€è¦æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œå§”æ‰˜å­ç±»åŠ è½½å™¨å»åŠ è½½ Class æ–‡ä»¶</li></ul><p>  <strong>æ€ä¹ˆæ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹</strong></p><ul><li>ä½¿ç”¨<strong>çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆContextClassLoaderï¼‰</strong>åŠ è½½ç±»ï¼Œä¸€èˆ¬ ContexClassLoader é»˜è®¤ä¸ºåº”ç”¨ç±»åŠ è½½å™¨</li></ul><p>  <strong>æ‰“ç ´å®ä¾‹ï¼š</strong></p><ul><li><p><strong>JDBC</strong> å„ç§é©±åŠ¨çš„å®ç°</p><ul><li>åŠ è½½ Driver æ¥å£å®ç°ç±»çš„æ—¶å€™ï¼ŒDriverManager ç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ï¼Œè€Œå®ç°ç±»ç”±æœåŠ¡æä¾›å•†åŠ è½½</li></ul><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153801.png" alt="image-20220317012236388"></p></li><li><p><strong>Tomcat</strong></p><ul><li>å„ä¸ª webapps éœ€è¦éš”ç¦»çš„ç¯å¢ƒï¼Œä¹Ÿéœ€è¦ä¸€äº›å…±äº«çš„ç±»</li><li>Tomcat ä½¿ç”¨è‡ªå®šä¹‰ç±»åŠ è½½å™¨å»åŠ è½½ç±»ï¼Œä»¥å…æ¶æ„æˆ–æ— æ„ç ´å</li><li>çƒ­éƒ¨ç½²</li></ul></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
            <tag> ç±»åŠ è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebSocket</title>
      <link href="/2022/03/28/WebSocket/"/>
      <url>/2022/03/28/WebSocket/</url>
      
        <content type="html"><![CDATA[<h1 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><strong>WebSocket</strong>æ˜¯ä¸€ç§åœ¨å•ä¸ª<a href="https://baike.baidu.com/item/TCP">TCP</a>è¿æ¥ä¸Šè¿›è¡Œ<a href="https://baike.baidu.com/item/%E5%85%A8%E5%8F%8C%E5%B7%A5">å…¨åŒå·¥</a>é€šä¿¡çš„åè®®ã€‚<strong>HTTP</strong>åè®®æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œå³é€šä¿¡åªèƒ½ç”±å®¢æˆ·ç«¯å‘èµ·ï¼Œå¦‚æœæœåŠ¡å™¨æœ‰çŠ¶æ€å˜åŒ–ï¼Œåªèƒ½é€šè¿‡å®¢æˆ·ç«¯<strong>è½®è¯¢</strong>æ¯éš”ä¸€æ®µæ—¶é—´ç»™æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ï¼Œè¯¢é—®æ˜¯å¦æœ‰æ–°æ¶ˆæ¯ã€‚è€Œ<strong>WebSocket</strong>åè®®ä¸­ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ä¸»åŠ¨å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ã€‚</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153228.png" alt="img"></p><p><strong>WebSocket</strong>åè®®ç”±ä¸¤éƒ¨åˆ†ç»„æˆ</p><ul><li>æ¡æ‰‹</li><li>æ•°æ®ä¼ è¾“</li></ul><hr><p><strong>æ¡æ‰‹</strong></p><p>æ¡æ‰‹æ˜¯åŸºäºhttpåè®®çš„ã€‚</p><p>æ¥è‡ªå®¢æˆ·ç«¯çš„æ¡æ‰‹</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">ws://localhost/char</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">HOST</span><span class="punctuation">: </span>localhost</span><br><span class="line"><span class="attribute">Upgrade</span><span class="punctuation">: </span>websocket</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Upgrade</span><br><span class="line"><span class="attribute">Sec-WebSocket-key</span><span class="punctuation">: </span>key1</span><br><span class="line"><span class="attribute">Sec-WebSocket-Extensions</span><span class="punctuation">: </span>permessage-deflate</span><br><span class="line"><span class="attribute">Sec-WebSocket-Version</span><span class="punctuation">: </span>13</span><br></pre></td></tr></table></figure><p>æ¥è‡ªæœåŠ¡å™¨çš„æ¡æ‰‹</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">101</span> Switching Protocols</span><br><span class="line"><span class="attribute">Upgrade</span><span class="punctuation">: </span>webscocket</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Upgrade</span><br><span class="line"><span class="attribute">Sec-WebSocket-Accept</span><span class="punctuation">: </span>acc1</span><br><span class="line"><span class="attribute">Sec-WebSocket-Extensions</span><span class="punctuation">: </span>permessage-deflate</span><br></pre></td></tr></table></figure><p>å­—æ®µè¯´æ˜</p><table><thead><tr><th>å¤´åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Connection: Upgrade</td><td>æ ‡è¯†è¯¥HTTPè¯·æ±‚æ˜¯ä¸€ä¸ªåè®®å‡çº§è¯·æ±‚</td></tr><tr><td>Upgrade: websocket</td><td>åè®®å‡çº§ä¸ºWebScoketåè®®</td></tr><tr><td>Sec-WbSocket-Versions: 13</td><td>å®¢æˆ·ç«¯æ”¯æŒWebSocketçš„ç‰ˆæœ¬</td></tr><tr><td>Sec-WbSocket-key: xxx</td><td>å®¢æˆ·ç«¯é‡‡ç”¨base64ç¼–ç çš„24ä½éšæœºå­—ç¬¦åºåˆ—ï¼ŒæœåŠ¡å™¨æ¥å—å®¢æˆ·ç«¯HTTPåè®®å‡çº§çš„è¯æ˜ã€‚è¦æ±‚æœåŠ¡ç«¯å“åº”ä¸€ä¸ªå¯¹åº”çš„åŠ å¯†çš„Sec-WebSocket-Acceptå¤´ä¿¡æ¯ä½œä¸ºåº”ç­”</td></tr><tr><td>Sec-WbSocket-Extensions: permessage-deflate</td><td>åè®®æ‹“å±•ç±»å‹</td></tr></tbody></table><hr><h3 id="å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å®ç°"><a href="#å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å®ç°" class="headerlink" title="å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å®ç°"></a>å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰å®ç°</h3><p><strong>WebSocketå¯¹è±¡</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ws = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(url)</span><br></pre></td></tr></table></figure><blockquote><p>  é€šè¿‡ä¸Šé¢çš„è¯­å¥åˆ›å»ºä¸€ä¸ªWebSocketå¯¹è±¡ï¼Œéœ€è¦ä¼ å…¥å‚æ•°<code>url</code></p><p>  <code>url</code>ï¼šws:&#x2F;&#x2F;ip:prot&#x2F;resources</p></blockquote><p><strong>WebSocketäº‹ä»¶</strong></p><table><thead><tr><th>äº‹ä»¶</th><th>äº‹ä»¶å¤„ç†ç¨‹åº</th><th>æè¿°</th></tr></thead><tbody><tr><td>open</td><td>websocket.onopen</td><td>è¿æ¥å»ºç«‹æ—¶è§¦å‘</td></tr><tr><td>message</td><td>websocket.onmessage</td><td>å®¢æˆ·ç«¯æ¥æ”¶æœåŠ¡ç«¯æ•°æ®æ—¶è§¦å‘</td></tr><tr><td>error</td><td>websocket.onerror</td><td>é€šä¿¡å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</td></tr><tr><td>close</td><td>websocket.onclose</td><td>è¿æ¥å…³é—­æ—¶è§¦å‘</td></tr></tbody></table><p><strong>WebSocketæ–¹æ³•</strong></p><table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td>send()</td><td>ä½¿ç”¨è¿æ¥å‘é€æ•°æ®</td></tr></tbody></table><hr><h3 id="æœåŠ¡ç«¯å®ç°"><a href="#æœåŠ¡ç«¯å®ç°" class="headerlink" title="æœåŠ¡ç«¯å®ç°"></a>æœåŠ¡ç«¯å®ç°</h3><p>Tomcatçš„7.0.5ç‰ˆæœ¬å¼€å§‹æ”¯æŒ<strong>WebSocket</strong>åè®®ï¼Œå¹¶ä¸”å®ç°äº†<strong>Java WebSocket</strong>è§„èŒƒ</p><p><strong>Java WebSocket</strong>åº”ç”¨æœ‰ä¸€ç³»åˆ—çš„<strong>WebSocketEndpoint</strong>ç»„æˆã€‚<strong>EndPoint</strong>æ˜¯ä¸€ä¸ªJavaå¯¹è±¡ï¼Œä»£è¡¨<strong>WebSocket</strong>è¿æ¥çš„ä¸€ç«¯ã€‚</p><p>ä¸¤ç§æ–¹å¼å®šä¹‰<strong>EndPoint</strong></p><ul><li>ç¼–ç¨‹å¼ï¼šç»§æ‰¿ç±»<code>javax.websocket.EndPoint</code>å¹¶å®ç°æ–¹æ³•</li><li>æ³¨è§£å¼ï¼šå®šä¹‰ä¸€ä¸ªPOJOï¼Œå¹¶æ·»åŠ <code>@ServerEndpoint</code>ç›¸å…³æ³¨è§£</li></ul><p><strong>æœåŠ¡ç«¯æ¥å—å®¢æˆ·ç«¯å‘é€çš„æ•°æ®</strong></p><blockquote><p>  é€šè¿‡ä¸º<code>Session</code>æ·»åŠ <code>MessageHandler</code>æ¶ˆæ¯å¤„ç†å™¨æ¥æ¥å—æ¶ˆæ¯ï¼Œå½“é‡‡ç”¨æ³¨è§£æ–¹å¼æ—¶ï¼Œé€šè¿‡æ³¨è§£<code>@OnMessage</code>æ³¨è§£æŒ‡å®šæ¥å—æ¶ˆæ¯çš„æ–¹æ³•ã€‚</p></blockquote><p><strong>æœåŠ¡ç«¯æ¨é€æ•°æ®ç»™å®¢æˆ·ç«¯</strong></p><blockquote><p>  å‘é€æ¶ˆæ¯ç”±<code>RemoteEndPoint</code>å®Œæˆï¼Œå…¶å®ä¾‹ç”±<code>Session</code>ç»´æŠ¤ã€‚æ ¹æ®ä½¿ç”¨æƒ…å†µï¼Œå¯ä»¥é€šè¿‡<code>Session.getBasicRemote</code>è·å–å‘é€åŒæ­¥æ¶ˆæ¯çš„å®ä¾‹ï¼Œè°ƒç”¨<code>sendXxx()</code>æ–¹æ³•å‘é€æ¶ˆæ¯ï¼›å¯ä»¥é€šè¿‡<code>Session.getAsyncRemote</code>è·å–å‘é€å¼‚æ­¥æ¶ˆæ¯çš„å®ä¾‹</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åè®® </tag>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java åƒåœ¾å›æ”¶</title>
      <link href="/2021/12/29/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/"/>
      <url>/2021/12/29/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Javaè™šæ‹Ÿæœºä¸­ï¼Œ<strong>ç¨‹åºè®¡æ•°å™¨</strong>ã€<strong>è™šæ‹Ÿæœºæ ˆ</strong>ã€<strong>æœ¬åœ°æ–¹æ³•æ ˆ</strong>ä¸‰ä¸ªåŒºåŸŸéšçº¿ç¨‹è€Œç”Ÿï¼Œéšçº¿ç¨‹è€Œç­ï¼Œæ ˆä¸­çš„æ ˆå¸§éšç€æ–¹æ³•çš„è¿›å…¥å’Œé€€å‡ºè€Œæœ‰æ¡ä¸ç´Šåœ°æ‰§è¡Œç€å…¥æ ˆå’Œå‡ºæ ˆæ“ä½œã€‚æ¯ä¸€ä¸ªæ ˆå¸§åˆ†é…å¤šå°‘å†…å­˜åŸºæœ¬åœ¨ç¼–è¯‘æœŸå¯ä»¥ç¡®å®šï¼Œå› æ­¤è¿™å‡ ä¸ªåŒºåŸŸçš„å†…å­˜åˆ†é…å’Œå›æ”¶éƒ½å…·å¤‡ç¡®å®šæ€§ï¼Œä¸éœ€è¦è¿‡å¤šçš„è€ƒè™‘å¦‚ä½•å›æ”¶çš„é—®é¢˜ï¼Œçº¿ç¨‹ç»“æŸæ—¶å†…å­˜è‡ªç„¶è·Ÿç€å›æ”¶äº†ã€‚</p><p>ä½†<strong>Javaå †</strong>å’Œ<strong>æ–¹æ³•åŒº</strong>åˆ™ä¸åŒï¼šä¸€ä¸ªæ¥å£çš„å¤šä¸ªå®ç°ç±»éœ€è¦çš„å†…å­˜å¯èƒ½ä¸ä¸€æ ·ï¼Œä¸€ä¸ªæ–¹æ³•æ‰€æ‰§è¡Œçš„ä¸åŒæ¡ä»¶åˆ†æ”¯æ‰€éœ€è¦çš„å†…å­˜ä¹Ÿå¯èƒ½ä¸ä¸€æ ·ï¼Œåªæœ‰å¤„äºè¿è¡ŒæœŸæ‰èƒ½çŸ¥é“ç¨‹åºä¼šåˆ›å»ºå¤šå°‘å¯¹è±¡ï¼Œè¿™éƒ¨åˆ†çš„å†…å­˜çš„åˆ†é…ä¸å›æ”¶æ˜¯åŠ¨æ€çš„ã€‚æ‰€ä»¥åƒåœ¾æ”¶é›†å™¨å…³æ³¨çš„å°±æ˜¯è¿™éƒ¨åˆ†å†…å­˜è¯¥å¦‚ä½•ç®¡ç†ã€‚</p><hr><h2 id="å¯¹è±¡çš„æ¶ˆäº¡"><a href="#å¯¹è±¡çš„æ¶ˆäº¡" class="headerlink" title="å¯¹è±¡çš„æ¶ˆäº¡"></a>å¯¹è±¡çš„æ¶ˆäº¡</h2><p>åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»æœ‰ä¸¤ç§ç®—æ³•ï¼Œä¸€æ˜¯<strong>å¼•ç”¨è®¡æ•°ç®—æ³•</strong>ï¼Œå¦ä¸€ä¸ªæ˜¯<strong>å¯è¾¾æ€§åˆ†æç®—æ³•</strong></p><ul><li><p><strong>å¼•ç”¨è®¡æ•°ç®—æ³•ï¼š</strong></p><p>ç®€å•æ¥è¯´ï¼Œåœ¨å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œå½“æœ‰ä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„å¼•ç”¨æ—¶+1ï¼Œå½“å¼•ç”¨å¤±æ•ˆæ—¶-1ï¼Œä»»ä½•æ—¶åˆ»è®¡æ•°å™¨ä¸ºé›¶çš„å¯¹è±¡å°±æ˜¯ä¸å¯èƒ½å†è¢«ä½¿ç”¨çš„ã€‚</p><p>ä½†ä¸»æµçš„Javaè™šæ‹Ÿæœºä¸­å¹¶æ²¡æœ‰é€‰ç”¨è¯¥ç®—æ³•ï¼Œå› ä¸ºè¯¥ç®—æ³•éœ€è¦å¤§é‡é¢å¤–å¤„ç†æ‰èƒ½ä¿è¯æ­£ç¡®åœ°å·¥ä½œã€‚ä¸¾ä¾‹æ¥è®²å®ƒå¾ˆéš¾è§£å†³<strong>å¯¹è±¡ä¹‹é—´ç›¸äº’å¼•ç”¨</strong>çš„é—®é¢˜ã€‚</p></li><li><p><strong>å¯è¾¾æ€§åˆ†æç®—æ³•ï¼š</strong></p><p>è¯¥ç®—æ³•çš„åŸºæœ¬æ€è·¯æ˜¯é€šè¿‡ä¸€ç³»åˆ—ç§°ä¸ºâ€œ<strong>GC Roots</strong>â€çš„æ ¹å¯¹è±¡ä½œä¸ºèµ·å§‹èŠ‚ç‚¹é›†ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹æ ¹æ®å¼•ç”¨å…³ç³»å‘ä¸‹æœç´¢ï¼Œæœç´¢è·¯å¾„ç§°ä¸ºâ€œå¼•ç”¨é“¾â€ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsé—´æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯èƒ½å†è¢«ä½¿ç”¨çš„ã€‚</p><p>åœ¨JavaæŠ€æœ¯ä½“ç³»ä¸­ï¼Œå›ºå®šå¯ä½œä¸ºGC Rootsçš„å¯¹è±¡åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>åœ¨è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ï¼Œæ¯”å¦‚å½“å‰æ­£åœ¨è¿è¡Œçš„æ–¹æ³•ä¸­ç”¨åˆ°çš„å‚æ•°ã€å±€éƒ¨å˜é‡ã€ä¸´æ—¶å˜é‡ç­‰ã€‚</li><li>åœ¨æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ï¼Œæ¯”å¦‚Javaç±»çš„å¼•ç”¨ç±»å‹é™æ€å˜é‡</li><li>åœ¨æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Tableï¼‰é‡Œçš„å¼•ç”¨</li><li>åœ¨æœ¬åœ°æ–¹æ³•æ ˆä¸­<code>Native</code>æ–¹æ³•å¼•ç”¨çš„å¯¹è±¡</li><li>æ‰€æœ‰è¢«åŒæ­¥é”æŒæœ‰çš„å¯¹è±¡</li></ul></li></ul><h3 id="Javaä¸­å¼•ç”¨çš„æ¦‚å¿µ"><a href="#Javaä¸­å¼•ç”¨çš„æ¦‚å¿µ" class="headerlink" title="Javaä¸­å¼•ç”¨çš„æ¦‚å¿µ"></a>Javaä¸­å¼•ç”¨çš„æ¦‚å¿µ</h3><ul><li>JDK 1.2ä¹‹å‰ï¼ŒJava ä¸­å¼•ç”¨çš„å®šä¹‰å¾ˆä¼ ç»Ÿï¼šå¦‚æœ reference ç±»å‹çš„æ•°æ®å­˜å‚¨çš„æ•°å€¼ä»£è¡¨çš„æ˜¯å¦ä¸€å—å†…å­˜çš„èµ·å§‹åœ°å€ï¼Œå°±ç§°è¿™å—å†…å­˜ä»£è¡¨ä¸€ä¸ªå¼•ç”¨ã€‚</li><li>JDK 1.2ä¹‹åï¼ŒJava å¯¹å¼•ç”¨æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼šå°†å¼•ç”¨åˆ†ä¸º<strong>å¼ºå¼•ç”¨</strong>ã€<strong>è½¯å¼•ç”¨</strong>ã€<strong>å¼±å¼•ç”¨</strong>ã€<strong>è™šå¼•ç”¨</strong><ul><li>å¼ºå¼•ç”¨</li><li>è½¯å¼•ç”¨</li><li>å¼±å¼•ç”¨</li><li>è™šå¼•ç”¨</li></ul></li></ul><h3 id="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¸¸é‡æ˜¯åºŸå¼ƒå¸¸é‡ï¼Ÿ"><a href="#å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¸¸é‡æ˜¯åºŸå¼ƒå¸¸é‡ï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¸¸é‡æ˜¯åºŸå¼ƒå¸¸é‡ï¼Ÿ"></a>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¸¸é‡æ˜¯åºŸå¼ƒå¸¸é‡ï¼Ÿ</h3><p>å½“å¸¸é‡æ± ä¸­å­˜åœ¨æŸä¸€å¸¸é‡ï¼Œè€Œç³»ç»Ÿæœ‰æ²¡æœ‰ä»»ä½•ä¸€ä¸ªå¯¹è±¡å¼•ç”¨è¿™ä¸ªå¸¸é‡ï¼Œè‹¥åœ¨è¿™æ—¶éœ€è¦å†…å­˜å›æ”¶ï¼Œè€Œåƒåœ¾æ”¶é›†å™¨åˆ¤æ–­ç¡®æœ‰å¿…è¦çš„è¯ï¼Œè¿™ä¸ªå¸¸é‡å°±ä¼šè¢«æ¸…ç†å‡ºå¸¸é‡æ± ã€‚</p><h3 id="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯æ— ç”¨çš„ç±»ï¼Ÿ"><a href="#å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯æ— ç”¨çš„ç±»ï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯æ— ç”¨çš„ç±»ï¼Ÿ"></a>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯æ— ç”¨çš„ç±»ï¼Ÿ</h3><p>åˆ¤å®šä¸€ä¸ªå¸¸é‡æ˜¯å¦æ˜¯â€œåºŸå¼ƒå¸¸é‡â€æ¯”è¾ƒç®€å•ï¼Œè€Œè¦åˆ¤å®šä¸€ä¸ªç±»æ˜¯å¦æ˜¯â€œæ— ç”¨çš„ç±»â€çš„æ¡ä»¶åˆ™ç›¸å¯¹è‹›åˆ»è®¸å¤šã€‚ç±»éœ€è¦åŒæ—¶æ»¡è¶³ä¸‹é¢ 3 ä¸ªæ¡ä»¶æ‰èƒ½ç®—æ˜¯ <strong>â€œæ— ç”¨çš„ç±»â€</strong> ï¼š</p><ul><li>è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯ Java å †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹ã€‚</li><li>åŠ è½½è¯¥ç±»çš„ <code>ClassLoader</code> å·²ç»è¢«å›æ”¶ã€‚</li><li>è¯¥ç±»å¯¹åº”çš„ <code>java.lang.Class</code> å¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚</li></ul><p>è™šæ‹Ÿæœºå¯ä»¥å¯¹æ»¡è¶³ä¸Šè¿° 3 ä¸ªæ¡ä»¶çš„æ— ç”¨ç±»è¿›è¡Œå›æ”¶ï¼Œè¿™é‡Œè¯´çš„ä»…ä»…æ˜¯â€œå¯ä»¥â€ï¼Œè€Œå¹¶ä¸æ˜¯å’Œå¯¹è±¡ä¸€æ ·ä¸ä½¿ç”¨äº†å°±ä¼šå¿…ç„¶è¢«å›æ”¶ã€‚</p><hr><h2 id="åˆ†ä»£æ”¶é›†ç†è®º"><a href="#åˆ†ä»£æ”¶é›†ç†è®º" class="headerlink" title="åˆ†ä»£æ”¶é›†ç†è®º"></a>åˆ†ä»£æ”¶é›†ç†è®º</h2><p>å½“ä»Šå•†ä¸šè™šæ‹Ÿæœºçš„åƒåœ¾æ”¶é›†å™¨ï¼Œå¤§å¤šéƒ½éµå¾ªäº†â€œåˆ†ä»£æ”¶é›†â€çš„ç†è®ºè¿›è¡Œè®¾è®¡ï¼Œå®ƒå»ºç«‹åœ¨ä¸¤ä¸ªåˆ†ä»£å‡è¯´ä¸Šï¼š</p><ul><li>å¼±åˆ†ä»£å‡è¯´ï¼šç»å¤§å¤šæ•°å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•ç­çš„</li><li>å¼ºåˆ†ä»£å‡è¯´ï¼šç†¬è¿‡è¶Šå¤šæ¬¡åƒåœ¾æ”¶é›†è¿‡ç¨‹çš„å¯¹è±¡è¶Šéš¾ä»¥æ¶ˆäº¡</li></ul><p>æ®æ­¤ï¼Œåƒåœ¾æ”¶é›†å™¨é€šå¸¸å°†Javaå †åˆ’åˆ†å‡ºä¸åŒçš„åŒºåŸŸï¼Œå°†å›æ”¶å¯¹è±¡æŒ‰ç…§å¹´é¾„åˆ†é…åˆ°ä¸åŒçš„åŒºåŸŸå­˜å‚¨ã€‚</p><p>åœ¨åˆ’åˆ†å‡ºä¸åŒçš„åŒºåŸŸä¹‹åï¼Œåƒåœ¾æ”¶é›†å™¨æ‰å¯ä»¥é’ˆå¯¹æŸä¸€åŒºåŸŸæˆ–æŸäº›éƒ¨åˆ†åŒºåŸŸè¿›è¡Œå›æ”¶ã€‚</p><p>ç”±æ­¤ï¼Œåˆ’åˆ†å‡ºäº†ä¸åŒçš„å›æ”¶ç±»å‹ï¼š</p><ul><li>æ–°ç”Ÿä»£æ”¶é›†ï¼ˆ<strong>Minor GC&#x2F;Young GC</strong>ï¼‰ï¼šç›®æ ‡åªæ˜¯æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›†ã€‚</li><li>è€å¹´ä»£æ”¶é›†ï¼ˆ<strong>Major GC&#x2F;Old GC</strong>ï¼‰ï¼šåªæœ‰CMSæ”¶é›†å™¨ä¼šæœ‰å•ç‹¬æ”¶é›†è€å¹´ä»£çš„è¡Œä¸º</li><li>æ··åˆæ”¶é›†ï¼ˆ<strong>Mixed GC</strong>ï¼‰ï¼šç›®æ ‡æ˜¯æ”¶é›†æ•´ä¸ªæ–°ç”Ÿä»£åŠéƒ¨åˆ†è€å¹´ä»£ï¼Œç›®å‰åªæœ‰G1æ”¶é›†å™¨æœ‰è¿™ä¸ªè¡Œä¸º</li><li>æ•´å †æ”¶é›†ï¼ˆ<strong>Full GC</strong>ï¼‰ï¼šæ”¶é›†æ•´ä¸ªJavaå †å’Œæ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ã€‚</li></ul><p>Javaå †ç»“æ„å¦‚å›¾ï¼š</p><p><img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20210908214450.png" alt="Javaå †ç»“æ„"></p><hr><h2 id="åƒåœ¾æ”¶é›†ç®—æ³•"><a href="#åƒåœ¾æ”¶é›†ç®—æ³•" class="headerlink" title="åƒåœ¾æ”¶é›†ç®—æ³•"></a>åƒåœ¾æ”¶é›†ç®—æ³•</h2><p>Javaè™šæ‹Ÿæœºä¸­ä¸åŒçš„åƒåœ¾å›æ”¶å™¨æœ‰ä¸åŒçš„åƒåœ¾æ”¶é›†ç®—æ³•ã€‚å¯ç®€å•åˆ†ä¸ºä¸‰ç§</p><ul><li><strong>æ ‡è®°â€”â€”æ¸…é™¤ï¼š</strong>è¯¥ç®—æ³•åˆ†ä¸ºâ€œæ ‡è®°â€å’Œâ€œæ¸…é™¤â€é˜¶æ®µï¼šé¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰ä¸éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåç»Ÿä¸€å›æ”¶æ‰æ‰€æœ‰æ²¡æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ã€‚è¿™ç§åƒåœ¾æ”¶é›†ç®—æ³•ä¼šå¸¦æ¥ä¸¤ä¸ªæ˜æ˜¾çš„é—®é¢˜ï¼š<ol><li><strong>æ•ˆç‡é—®é¢˜</strong></li><li><strong>ç©ºé—´é—®é¢˜ï¼ˆæ ‡è®°æ¸…é™¤åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„ç¢ç‰‡ï¼‰</strong></li></ol></li><li><strong>æ ‡è®°â€”â€”å¤åˆ¶ï¼š</strong>ä¸ºäº†è§£å†³æ•ˆç‡é—®é¢˜ï¼Œâ€œæ ‡è®°-å¤åˆ¶â€æ”¶é›†ç®—æ³•å‡ºç°äº†ã€‚å®ƒå¯ä»¥å°†å†…å­˜åˆ†ä¸ºå¤§å°ç›¸åŒçš„ä¸¤å—ï¼Œæ¯æ¬¡ä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™ä¸€å—çš„å†…å­˜ä½¿ç”¨å®Œåï¼Œå°±å°†è¿˜å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—å»ï¼Œç„¶åå†æŠŠä½¿ç”¨çš„ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚è¿™æ ·å°±ä½¿æ¯æ¬¡çš„å†…å­˜å›æ”¶éƒ½æ˜¯å¯¹å†…å­˜åŒºé—´çš„ä¸€åŠè¿›è¡Œå›æ”¶ã€‚</li><li><strong>æ ‡è®°â€”â€”æ•´ç†ï¼š</strong>æ ¹æ®è€å¹´ä»£çš„ç‰¹ç‚¹æå‡ºçš„ä¸€ç§æ ‡è®°ç®—æ³•ï¼Œæ ‡è®°è¿‡ç¨‹ä»ç„¶ä¸â€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•ä¸€æ ·ï¼Œä½†åç»­æ­¥éª¤ä¸æ˜¯ç›´æ¥å¯¹å¯å›æ”¶å¯¹è±¡å›æ”¶ï¼Œè€Œæ˜¯è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åç›´æ¥æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚</li></ul><p>HotSpot ä¸ºä»€ä¹ˆè¦åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Ÿ</p><ul><li>åœ¨æ–°ç”Ÿä»£æ¯æ¬¡æ”¶é›†éƒ½æœ‰å¤§é‡å¯¹è±¡æ¶ˆäº¡ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©â€œ<strong>æ ‡è®°â€”â€”å¤åˆ¶</strong>ç®—æ³•ï¼Œæé«˜æ•ˆç‡</li><li>è€å¹´ä»£å¯¹è±¡å­˜æ´»å‡ ç‡è¾ƒé«˜ï¼Œæ‰€ä»¥å¯ä»¥é‡‡ç”¨â€<strong>æ ‡è®°â€”â€”æ¸…é™¤</strong>â€œå’Œâ€<strong>æ ‡è®°â€”â€”æ•´ç†</strong>â€ç®—æ³•è¿›è¡Œæ”¶é›†</li></ul><hr><h2 id="åƒåœ¾æ”¶é›†å™¨"><a href="#åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨"></a>åƒåœ¾æ”¶é›†å™¨</h2><ol><li><p><strong>Serialï¼ˆä¸²è¡Œï¼‰æ”¶é›†å™¨</strong></p><p>å•çº¿ç¨‹æ”¶é›†å™¨ï¼Œå®ƒåªä¼šä½¿ç”¨ä¸€æ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å»å®Œæˆåƒåœ¾æ”¶é›†å·¥ä½œï¼Œå¹¶ä¸”åœ¨è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶éœ€è¦æš‚åœå…¶ä»–å·¥ä½œçº¿ç¨‹ã€‚</p><p><strong>æ–°ç”Ÿä»£é‡‡ç”¨æ ‡è®°â€”â€”å¤åˆ¶ç®—æ³•ï¼Œè€å¹´ä»£é‡‡ç”¨æ ‡è®°â€”â€”æ•´ç†ç®—æ³•</strong></p><p>ç®€å•é«˜æ•ˆï¼ˆä¸å…¶ä»–æ”¶é›†å™¨çš„å•çº¿ç¨‹ç›¸æ¯”ï¼‰</p></li><li><p><strong>ParNewæ”¶é›†å™¨</strong></p><p>ParNewæ”¶é›†å™¨æ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œé™¤äº†ä½¿ç”¨å¤šçº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†å¤–ï¼Œå…¶ä½™è¡Œä¸ºå’ŒSerialæ”¶é›†å™¨ä¸€æ ·</p><p><strong>æ–°ç”Ÿä»£é‡‡ç”¨æ ‡è®°â€”â€”å¤åˆ¶ç®—æ³•ï¼Œè€å¹´ä»£é‡‡ç”¨æ ‡è®°â€”â€”æ•´ç†ç®—æ³•</strong></p></li><li><p><strong>Parallel Scavengeæ”¶é›†å™¨</strong></p><p>Parallel Scavengeæ”¶é›†å™¨ä¹Ÿæ˜¯å¤šçº¿ç¨‹æ”¶é›†å™¨ï¼Œå’ŒParNewæ”¶é›†å™¨çš„åŒºåˆ«åœ¨äºParallel Scavengeæ”¶é›†å™¨æ›´å¤šå…³æ³¨çš„æ˜¯<strong>ååé‡</strong>ï¼Œè€ŒCMSç­‰åƒåœ¾æ”¶é›†å™¨æ›´å¤šå…³æ³¨çš„æ˜¯ç”¨æˆ·çº¿ç¨‹çš„åœé¡¿æ—¶é—´ã€‚è¿™ä¹Ÿæ˜¯Jdk1.8é»˜è®¤åƒåœ¾æ”¶é›†å™¨</p><p><strong>æ–°ç”Ÿä»£é‡‡ç”¨æ ‡è®°â€”â€”å¤åˆ¶ç®—æ³•ï¼Œè€å¹´ä»£é‡‡ç”¨æ ‡è®°â€”â€”æ•´ç†ç®—æ³•</strong></p></li><li><p><strong>Serial Oldæ”¶é›†å™¨</strong></p><p>Serialæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œä¸€ç§ç”¨é€”æ˜¯åœ¨JDK1.5ä»¥å‰çš„ç‰ˆæœ¬ä¸­ä¸Parallel Scavengeæ”¶é›†å™¨æ­é…ä½¿ç”¨ï¼Œå¦ä¸€ç§ç”¨é€”æ˜¯ä½œä¸ºCMSæ”¶é›†å™¨çš„åå¤‡æ–¹æ¡ˆ</p></li><li><p><strong>Parallel Oldæ”¶é›†å™¨</strong></p><p>Parallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬</p></li><li><p><strong>CMSæ”¶é›†å™¨</strong></p><p>CMSï¼ˆConcurrent Mark Sweepï¼‰æ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚CMSæ”¶é›†å™¨å®ç°äº†<strong>è®©åƒåœ¾å›æ”¶çº¿ç¨‹ä¸ç”¨æˆ·çº¿ç¨‹åŒæ—¶å·¥ä½œ</strong></p><p>CMSæ”¶é›†å™¨é‡‡ç”¨çš„æ˜¯â€œ<strong>æ ‡è®°â€”â€”æ¸…é™¤</strong>â€ç®—æ³•ï¼Œè¿ä½œè¿‡ç¨‹åˆ†å››ä¸ªæ­¥éª¤ï¼š</p><ol><li><strong>åˆå§‹æ ‡è®°</strong></li><li><strong>å¹¶å‘æ ‡è®°</strong></li><li><strong>é‡æ–°æ ‡è®°</strong></li><li><strong>å¹¶å‘æ¸…é™¤</strong></li></ol></li><li><p><strong>G1æ”¶é›†å™¨</strong></p><p><strong>G1 (Garbage-First)</strong> æ˜¯ä¸€æ¬¾é¢å‘æœåŠ¡å™¨çš„åƒåœ¾æ”¶é›†å™¨,ä¸»è¦é’ˆå¯¹é…å¤‡å¤šé¢—å¤„ç†å™¨åŠå¤§å®¹é‡å†…å­˜çš„æœºå™¨. ä»¥æé«˜æ¦‚ç‡æ»¡è¶³ GC åœé¡¿æ—¶é—´è¦æ±‚çš„åŒæ—¶,è¿˜å…·å¤‡é«˜ååé‡æ€§èƒ½ç‰¹å¾.</p></li><li><p><strong>ZGCæ”¶é›†å™¨</strong></p></li></ol><h3 id="CMSæ”¶é›†å™¨"><a href="#CMSæ”¶é›†å™¨" class="headerlink" title="CMSæ”¶é›†å™¨"></a>CMSæ”¶é›†å™¨</h3><blockquote><p>  CMS å‰çš„åƒåœ¾æ”¶é›†å™¨åœ¨ GC çº¿ç¨‹å·¥ä½œæ—¶éƒ½ä¼š **STW(Stop The World)**ï¼Œå³åœæ­¢ç”¨æˆ·çº¿ç¨‹ã€‚è€Œ CMS çš„ GC çº¿ç¨‹åœ¨éƒ¨åˆ†åœºæ™¯ä¸‹å¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹å¹¶è¡Œã€‚</p><ul><li><p><strong>åˆå§‹æ ‡è®°</strong></p><p>åˆå§‹æ ‡è®°é˜¶æ®µä¼šæ ‡è®° <strong>GCRoots ç›´æ¥å…³è”çš„å¯¹è±¡</strong>ä»¥åŠ <strong>å¹´è½»ä»£æŒ‡å‘è€å¹´ä»£çš„å¯¹è±¡</strong>ï¼Œä¼šå‘ç”ŸçŸ­æš‚çš„ STW ï¼Œä½†ç”±äºæ²¡æœ‰å‘ä¸‹è¿½æº¯ï¼ˆåªæ ‡è®°ä¸€å±‚ï¼‰ï¼Œæ‰€ä»¥é€Ÿåº¦å¾ˆå¿«</p></li><li><p><strong>å¹¶å‘æ ‡è®°</strong></p><p>å¹¶å‘æ ‡è®°é˜¶æ®µä¸»è¦<strong>ä» GCRoots å‘ä¸‹è¿½æº¯ï¼Œæ ‡è®°æ‰€æœ‰å¯è¾¾å¯¹è±¡</strong>ï¼Œè¯¥é˜¶æ®µç”±äºä¸ç”¨æˆ·çº¿ç¨‹å¹¶è¡Œï¼Œæ‰€ä»¥å¯èƒ½æœ‰å¯¹è±¡å‘ç”Ÿå˜åŒ–</p></li><li><p><strong>é‡æ–°æ ‡è®°</strong></p><p>è¯¥é˜¶æ®µä¼šå‘ç”Ÿ STW æš‚åœç”¨æˆ·çº¿ç¨‹ï¼Œæ‰«æ <strong>è€å¹´ä»£(dirty card)<strong>å’Œ</strong>å¹´è½»ä»£</strong>ï¼Œæ‰¾å‡ºå­˜æ´»çš„è€å¹´ä»£å¯¹è±¡</p></li><li><p><strong>å¹¶å‘æ¸…é™¤</strong></p><p>ä¸ç”¨æˆ·çº¿ç¨‹å¹¶è¡Œï¼Œå›æ”¶æ‰€æœ‰<strong>ä¸å¯è¾¾å¯¹è±¡</strong>ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½äº§ç”Ÿæµ®åŠ¨åƒåœ¾</p></li></ul><p>  ç¼ºç‚¹ï¼š</p><ul><li>ä½¿ç”¨æ ‡è®°æ¸…é™¤ï¼Œäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œç©ºé—´åˆ©ç”¨ç‡å‡å°</li><li>å¹¶å‘è¿‡ç¨‹éœ€è¦é¢„ç•™ç©ºé—´ï¼Œå¦‚æœé¢„ç•™ç©ºé—´ä¸è¶³ï¼Œä¼šæŠ¥ <strong>Concurrent Mode Failure</strong>ï¼Œç„¶åé‡‡ç”¨ <strong>Serial Old</strong> è¿›è¡Œè€å¹´ä»£å›æ”¶</li><li>è¦å¤„ç†å†…å­˜ç¢ç‰‡ï¼Œéœ€è¦ STW</li></ul></blockquote><h3 id="G1æ”¶é›†å™¨"><a href="#G1æ”¶é›†å™¨" class="headerlink" title="G1æ”¶é›†å™¨"></a>G1æ”¶é›†å™¨</h3><blockquote><p>  CMS åƒåœ¾æ”¶é›†å™¨ä¼šå‡ºç°<strong>åœé¡¿æ—¶é—´ä¸å¯é¢„çŸ¥</strong>çš„æƒ…å†µï¼ŒG1 æ”¶é›†å™¨ä¼šè®©ç”¨æˆ·æå‰è®¾å®šä¸€ä¸ªå¯ä»¥æ¥å—çš„ STW æ—¶é—´ï¼Œæ ¹æ®è¿™ä¸ªæ—¶é—´å°½å¯èƒ½æ»¡è¶³ã€‚</p><p>  G1 æ”¶é›†å™¨å°†å †ç©ºé—´ä»¥é€»è¾‘å½¢å¼åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ª <strong>Region</strong></p><p>  G1 æ”¶é›†å™¨çš„è¿ä½œå¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ul><li><strong>åˆå§‹æ ‡è®°</strong></li><li><strong>å¹¶å‘æ ‡è®°</strong></li><li><strong>æœ€ç»ˆæ ‡è®°</strong></li><li><strong>ç­›é€‰å›æ”¶</strong></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
            <tag> åƒåœ¾å›æ”¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java å•ä¾‹æ¨¡å¼</title>
      <link href="/2021/11/04/Java%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2021/11/04/Java%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h1><p><strong>å•ä¾‹ï¼ˆSingletonï¼‰æ¨¡å¼</strong>ï¼šæŒ‡ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¸”è¯¥ç±»èƒ½è‡ªè¡Œåˆ›å»ºè¿™ä¸ªå®ä¾‹çš„ä¸€ç§æ¨¡å¼ã€‚</p><p>å•ä¾‹æ¨¡å¼æœ‰ 3 ä¸ªç‰¹ç‚¹ï¼š</p><ol><li>å•ä¾‹ç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼›</li><li>è¯¥å•ä¾‹å¯¹è±¡å¿…é¡»ç”±å•ä¾‹ç±»è‡ªè¡Œåˆ›å»ºï¼›</li><li>å•ä¾‹ç±»å¯¹å¤–æä¾›ä¸€ä¸ªè®¿é—®è¯¥å•ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚</li></ol><p>å¯¹äºJavaæ¥è¯´ï¼Œé€šè¿‡å°†æ„é€ æ–¹æ³•ç§æœ‰åŒ–ä½¿å¤–éƒ¨æ— æ³•è°ƒç”¨æ„é€ æ–¹æ³•ç”Ÿæˆå¤šä¸ªå®ä¾‹ï¼Œæä¾›ä¸€ä¸ªé™æ€å‡½æ•°ä¾›å¤–éƒ¨è®¿é—®å•ä¾‹ã€‚å•ä¾‹æ¨¡å¼å¯ä»¥ä¿è¯åœ¨ä¸€ä¸ª JVM ä¸­åªå­˜åœ¨å•ä¸€å®ä¾‹ã€‚</p><p>å•ä¾‹æ¨¡å¼é€šå¸¸æœ‰ä¸¤ç§å®ç°æ–¹å¼</p><ul><li>æ‡’æ±‰å¼</li><li>é¥¿æ±‰å¼</li></ul><hr><h2 id="é¥¿æ±‰å¼å•ä¾‹"><a href="#é¥¿æ±‰å¼å•ä¾‹" class="headerlink" title="é¥¿æ±‰å¼å•ä¾‹"></a>é¥¿æ±‰å¼å•ä¾‹</h2><p>ç±»ä¸€æ—¦åŠ è½½å°±åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œä¿è¯åœ¨è°ƒç”¨<code>getInstance()</code>æ–¹æ³•å‰å·²ç»åˆ›å»ºå®ä¾‹</p><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HungrySingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">HungrySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HungrySingleton</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">HungrySingleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> HungrySingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‡’æ±‰å¼å•ä¾‹"><a href="#æ‡’æ±‰å¼å•ä¾‹" class="headerlink" title="æ‡’æ±‰å¼å•ä¾‹"></a>æ‡’æ±‰å¼å•ä¾‹</h2><p>åŠ è½½æ—¶æ²¡æœ‰ç”Ÿæˆå®ä¾‹ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰åˆ›å»ºå®ä¾‹ã€‚</p><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazySingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">LazySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">LazySingleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">LazySingleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‡’æ±‰å¼å¯¹äºå®ä¾‹åŒ–ç±»å‘ˆæ‡’æƒ°æ€åº¦ï¼Œå³å®ä¾‹åŒ–çš„æ—¶æœºåœ¨ç¬¬ä¸€è¢«å¼•ç”¨æ—¶è§¦å‘ï¼Œåœ¨ç±»è¿›è¡ŒåŠ è½½æ—¶ï¼Œä¸ä¼šå°†è‡ªå·±å®ä¾‹åŒ–(å»¶è¿ŸåŠ è½½æŠ€æœ¯)ã€‚</p><h2 id="æ‡’æ±‰å¼å•ä¾‹çš„å¹¶å‘é—®é¢˜"><a href="#æ‡’æ±‰å¼å•ä¾‹çš„å¹¶å‘é—®é¢˜" class="headerlink" title="æ‡’æ±‰å¼å•ä¾‹çš„å¹¶å‘é—®é¢˜"></a>æ‡’æ±‰å¼å•ä¾‹çš„å¹¶å‘é—®é¢˜</h2><p>ä¸Šè¿°<strong>æ‡’æ±‰å¼å•ä¾‹</strong>ä»£ç å­˜åœ¨å¹¶å‘é—®é¢˜ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®<code>LazySingleton.getInstance()</code>å¯èƒ½å¯¼è‡´ç±»è¢«å®ä¾‹åŒ–å¤šæ¬¡ã€‚è€Œé¥¿æ±‰å¼è°ƒç”¨<code>getInstance()</code>å‰å°±å·²ç»åˆ›å»ºå®ä¾‹ï¼Œä¸å­˜åœ¨å¹¶å‘é—®é¢˜ã€‚</p><p><strong>å¹¶å‘æµ‹è¯•</strong>ï¼šä¸‰ä¸ªçº¿ç¨‹è°ƒç”¨<code>LazySingleton.getInstance()</code>æ–¹æ³•ï¼Œä¸‰ä¸ªçº¿ç¨‹è°ƒç”¨<code>HungrySingleton.getInstance()</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSingleton</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="type">LazySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> LazySingleton.getInstance();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;-&gt;&quot;</span> + instance);</span><br><span class="line">        &#125;, <span class="string">&quot;t1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="type">LazySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> LazySingleton.getInstance();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;-&gt;&quot;</span> + instance);</span><br><span class="line">        &#125;, <span class="string">&quot;t2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="type">LazySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> LazySingleton.getInstance();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;-&gt;&quot;</span> + instance);</span><br><span class="line">        &#125;, <span class="string">&quot;t3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="type">HungrySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> HungrySingleton.getInstance();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;-&gt;&quot;</span> + instance);</span><br><span class="line">        &#125;, <span class="string">&quot;t4&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="type">HungrySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> HungrySingleton.getInstance();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;-&gt;&quot;</span> + instance);</span><br><span class="line">        &#125;, <span class="string">&quot;t5&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t6</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="type">HungrySingleton</span> <span class="variable">instance</span> <span class="operator">=</span> HungrySingleton.getInstance();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;-&gt;&quot;</span> + instance);</span><br><span class="line">        &#125;, <span class="string">&quot;t6&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t4.start();</span><br><span class="line">        t5.start();</span><br><span class="line">        t6.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ç»“æœï¼š</strong></p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153618.png" alt="å¹¶å‘æµ‹è¯•ç»“æœ"></p><p>æ‡’æ±‰å¼è·å–å•ä¾‹æ—¶äº§ç”Ÿäº†å¤šä¸ªå®ä¾‹ï¼Œé¥¿æ±‰å¼è·å–å•ä¾‹æ—¶æ²¡æœ‰å½±å“ã€‚</p><hr><h2 id="è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜"></a>è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜</h2><h3 id="å¯¹æ–¹æ³•åŠ é”"><a href="#å¯¹æ–¹æ³•åŠ é”" class="headerlink" title="å¯¹æ–¹æ³•åŠ é”"></a>å¯¹æ–¹æ³•åŠ é”</h3><p>å¯¹<code>getInstance()</code>æ–¹æ³•åŠ é”ä½¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹è·å¾—å•ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadSafeSingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> ThreadSafeSingleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">ThreadSafeSingleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> ThreadSafeSingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">ThreadSafeSingleton</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥ä¿è¯åªä¼šåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œ<code>volatile</code>é˜²æ­¢æŒ‡ä»¤é‡æ’åºï¼Œä½†<code>synchronized</code>é”ä½äº†æ•´ä¸ªæ–¹æ³•ï¼Œå¤šçº¿ç¨‹è®¿é—®æ—¶æ€§èƒ½ä¼šé™ä½ã€‚</p><h3 id="åŒé‡æ£€æŸ¥é”"><a href="#åŒé‡æ£€æŸ¥é”" class="headerlink" title="åŒé‡æ£€æŸ¥é”"></a>åŒé‡æ£€æŸ¥é”</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoubleCheckSingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> DoubleCheckSingleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">DoubleCheckSingleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> DoubleCheckSingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (DoubleCheckSingleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName()+ <span class="string">&quot;æ­£åœ¨åˆå§‹åŒ–&quot;</span>);</span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">DoubleCheckSingleton</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœå¤šä¸ªçº¿ç¨‹è¿›å…¥<code>getInstance()</code>æ–¹æ³•</p><ul><li>å…ˆåˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨å®ä¾‹ï¼Œè‹¥å·²å­˜åœ¨åˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™è·å¾—é”åˆ›å»ºå®ä¾‹</li><li>çº¿ç¨‹è·å¾—é”åå…ˆåˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨å®ä¾‹ã€‚åŸå› æ˜¯å¦‚æœçº¿ç¨‹Aå’Œçº¿ç¨‹BåŒæ—¶ç«äº‰é”ï¼Œçº¿ç¨‹Aè·å¾—é”è¿›å…¥å¹¶åˆ›å»ºå®ä¾‹åé‡Šæ”¾é”ï¼Œæ­¤æ—¶çº¿ç¨‹Bè·å¾—é”ä¸”å¹¶ä¸çŸ¥é“å®ä¾‹å·²è¢«åˆ›å»ºçš„è¯ï¼Œä¼šç»§ç»­åˆ›å»ºæ–°å®ä¾‹ï¼Œæ‰€ä»¥éœ€è¦ç¬¬äºŒæ¬¡åˆ¤æ–­ã€‚</li></ul><h3 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a>å†…éƒ¨ç±»</h3><h3 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h3>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
            <tag> singleton </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java ä»£ç†æ¨¡å¼</title>
      <link href="/2021/11/03/Java%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
      <url>/2021/11/03/Java%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h1><p>ä»£ç†é€šå¸¸æŒ‡çš„é€šè¿‡ä¸€ä¸ªä»£ç†ç±»å®ç°å¯¹çœŸå®ç±»çš„æ§åˆ¶è®¿é—®ã€‚</p><p>åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå®¢æˆ·ä¸èƒ½æˆ–è€…ä¸æƒ³ç›´æ¥è®¿é—®å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ—¶éœ€è¦æ‰¾ä¸€ä¸ªä¸­ä»‹å¸®å¿™å®ŒæˆæŸé¡¹ä»»åŠ¡ï¼Œè¿™ä¸ªä¸­ä»‹å°±æ˜¯ä»£ç†å¯¹è±¡ã€‚æ¯”å¦‚ç§Ÿæˆ¿å­æ—¶ä¸ä¸­ä»‹æ²Ÿé€šç§Ÿæˆ¿çš„ä¸€åˆ‡äº‹å®œï¼Œä¸ç›´æ¥æ¥è§¦æˆ¿ä¸œã€‚</p><p>Javaä¸­æ ¹æ®ä»£ç†çš„åˆ›å»ºæ—¶æœŸï¼Œä»£ç†çš„ç±»å‹åˆ†ä¸ºä¸¤ç§ã€‚</p><ul><li>é™æ€ä»£ç†ï¼šç¨‹åºå‘˜åˆ›å»ºä»£ç†ç±»æˆ–ç‰¹å®šå·¥å…·ç±»æºç å¯¹å…¶ç¼–è¯‘ï¼Œåœ¨ç¨‹åºè¿è¡Œå‰å°±ç”Ÿæˆäº†.classæ–‡ä»¶</li><li>åŠ¨æ€ä»£ç†ï¼šåœ¨ç¨‹åºè¿è¡Œæ—¶é€šè¿‡åå°„æœºåˆ¶åŠ¨æ€åˆ›å»º</li></ul><h1 id="é™æ€ä»£ç†"><a href="#é™æ€ä»£ç†" class="headerlink" title="é™æ€ä»£ç†"></a>é™æ€ä»£ç†</h1><p>åˆ›å»ºä¸€ä¸ª<code>RentService</code>æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RentService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RentServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">RentService</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿å®¢ä»˜é’±å’¯...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç†ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RentServiceProxy</span> <span class="keyword">implements</span> <span class="title class_">RentService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RentService rentService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RentServiceProxy</span><span class="params">(RentService rentService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rentService = rentService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">see</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿å®¢çœ‹æˆ¿å’¯...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span> &#123;</span><br><span class="line">        see();</span><br><span class="line">        rentService.pay();</span><br><span class="line">        sign();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sign</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿å®¢ç­¾åå’¯...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">RentService</span> <span class="variable">rentService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RentServiceProxy</span>(<span class="keyword">new</span> <span class="title class_">RentServiceImpl</span>());</span><br><span class="line">        rentService.pay();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚å›¾</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206154028.png" alt="é™æ€ä»£ç†"></p><p>é€šè¿‡<code>RentServiceProxy</code>å®ç°äº†å¯¹<code>RentService</code>ç±»çš„æ‹“å±•ï¼Œåœ¨æµ‹è¯•ç±»ä¸­ä»£ç é‡æ²¡æœ‰å¢åŠ ä½†æ˜¯æ‰©å±•äº†åŠŸèƒ½ã€‚</p><p>ä½†é™æ€ä»£ç†çš„ç¼ºç‚¹åœ¨äºï¼š</p><ul><li>å½“éœ€è¦ä»£ç†å¤šä¸ªç±»çš„æ—¶å€™ï¼Œç”±äºä»£ç†å¯¹è±¡è¦å®ç°ä¸ç›®æ ‡å¯¹è±¡ä¸€è‡´çš„æ¥å£ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š<ul><li>åªç»´æŠ¤ä¸€ä¸ªä»£ç†ç±»ï¼Œç”±è¿™ä¸ªä»£ç†ç±»å®ç°å¤šä¸ªæ¥å£ï¼Œä½†æ˜¯è¿™æ ·å°±å¯¼è‡´<strong>ä»£ç†ç±»è¿‡äºåºå¤§</strong>ã€‚</li><li>æ–°å»ºå¤šä¸ªä»£ç†ç±»ï¼Œæ¯ä¸ªç›®æ ‡å¯¹è±¡å¯¹åº”ä¸€ä¸ªä»£ç†ç±»ï¼Œä½†æ˜¯è¿™æ ·ä¼š**äº§ç”Ÿè¿‡å¤šçš„ä»£ç†ç±»ã€‚</li></ul></li><li>å½“æ¥å£éœ€è¦å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ–¹æ³•çš„æ—¶å€™ï¼Œç›®æ ‡å¯¹è±¡ä¸ä»£ç†ç±»éƒ½è¦åŒæ—¶ä¿®æ”¹ï¼Œ<strong>ä¸æ˜“ç»´æŠ¤</strong>ã€‚</li></ul><h1 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h1><p>Javaä¸­åŠ¨æ€ä»£ç†æœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼š</p><ul><li>JDKåŠ¨æ€ä»£ç†</li></ul><p>æ¶‰åŠä¸¤ä¸ªç±» <code>java.lang.reflect.Proxy</code> å’Œ <code>java.lang.reflect.InvocationHandler</code>ã€‚</p><p><code>Proxy</code> æä¾›äº†åˆ›å»ºåŠ¨æ€ä»£ç†ç±»å’Œå®ä¾‹çš„é™æ€æ–¹æ³•ï¼Œå®ƒä¹Ÿæ˜¯ç”±è¿™äº›æ–¹æ³•åˆ›å»ºçš„æ‰€æœ‰åŠ¨æ€ä»£ç†ç±»çš„è¶…ç±»ã€‚</p><p><code>InvocationHandler</code> æ˜¯ç”±ä»£ç†å®ä¾‹çš„è°ƒç”¨å¤„ç†ç¨‹åºå®ç°çš„æ¥å£ã€‚</p><p>JDK åŠ¨æ€ä»£ç†çš„å¯¹è±¡å¿…é¡»å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ã€‚å¦‚æœæƒ³ä»£ç†æ²¡æœ‰å®ç°æ¥å£çš„ç±»ï¼Œå°±å¯ä»¥ä½¿ç”¨CGLIBå®ç°ã€‚JDK åŠ¨æ€ä»£ç†ä¹‹æ‰€ä»¥<strong>åªèƒ½ä»£ç†æ¥å£</strong>æ˜¯å› ä¸º<strong>ä»£ç†ç±»æœ¬èº«å·²ç» extends äº† Proxyï¼Œè€Œjavaæ˜¯ä¸å…è®¸å¤šé‡ç»§æ‰¿çš„</strong>ï¼Œä½†æ˜¯å…è®¸å®ç°å¤šä¸ªæ¥å£ã€‚</p><ul><li>CglibåŠ¨æ€ä»£ç†</li></ul><p>ä½¿ç”¨cglibä»£ç†çš„å¯¹è±¡åˆ™æ— éœ€å®ç°æ¥å£ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„ç”ŸæˆæŸä¸ªç±»çš„å­ç±»ï¼Œæ•…éœ€è¦æŸä¸ªç±»ä¸èƒ½è¢«æ ‡è®°ä¸ºfinal</p><h2 id="JDKåŠ¨æ€ä»£ç†"><a href="#JDKåŠ¨æ€ä»£ç†" class="headerlink" title="JDKåŠ¨æ€ä»£ç†"></a>JDKåŠ¨æ€ä»£ç†</h2><p>ä½¿ç”¨<code>Proxy.newProxyInstance</code>æ–¹æ³•ç”Ÿæˆä»£ç†å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">newProxyInstance</span><span class="params">(ClassLoader loader,</span></span><br><span class="line"><span class="params">                                      Class&lt;?&gt;[] interfaces,</span></span><br><span class="line"><span class="params">                                      InvocationHandler h)</span></span><br></pre></td></tr></table></figure><ul><li><code>loader</code> ä¸ºä»£ç†ç±»çš„ç±»åŠ è½½å™¨</li><li><code>interfaces</code> ä¸ºä»£ç†ç±»çš„æ¥å£æ•°ç»„</li><li><code>h</code> ä¸ºæ–¹æ³•è°ƒç”¨å¤„ç†å™¨</li></ul><p>ä½¿ç”¨ <code>InvocationHandler</code> çš„ <code>invoke</code> æ–¹æ³•å®ç°æ–¹æ³•è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span></span><br></pre></td></tr></table></figure><ul><li><code>proxy</code>ï¼šè§¦å‘æ–¹æ³•çš„ä»£ç†ç±»å®ä¾‹</li><li><code>method</code>ï¼šä»£ç†ç±»å®ç°çš„æ¥å£ä¸­çš„æ–¹æ³•</li><li><code>args</code>ï¼šæ–¹æ³•å‚æ•°</li></ul><p>å®ç°ä¸€ä¸ªHandlerï¼Œç»§æ‰¿ <code>InvocationHandler</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicProxyHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> RentService rentService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DynamicProxyHandler</span><span class="params">(RentService rentService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rentService = rentService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿å®¢çœ‹æˆ¿å’¯...&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> method.invoke(rentService, args);</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿å®¢ç­¾åå’¯...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> o;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="type">RentService</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RentServiceImpl</span>();</span><br><span class="line">        <span class="comment">//è‡ªå®šä¹‰æ–¹æ³•è°ƒç”¨å¤„ç†å™¨</span></span><br><span class="line">        <span class="type">DynamicProxyHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DynamicProxyHandler</span>(target);</span><br><span class="line">        <span class="comment">//è·å¾—ä»£ç†ç±»å®ä¾‹</span></span><br><span class="line">        <span class="type">RentService</span> <span class="variable">rentServiceProxy</span> <span class="operator">=</span> (RentService) Proxy.newProxyInstance(</span><br><span class="line">                target.getClass().getClassLoader(),</span><br><span class="line">                target.getClass().getInterfaces(),</span><br><span class="line">                handler);</span><br><span class="line">        rentServiceProxy.pay();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœå’Œé™æ€ä»£ç†ç±»ç›¸åŒã€‚</p><h2 id="CGLIBåŠ¨æ€ä»£ç†"><a href="#CGLIBåŠ¨æ€ä»£ç†" class="headerlink" title="CGLIBåŠ¨æ€ä»£ç†"></a><a href="https://github.com/cglib/cglib">CGLIB</a>åŠ¨æ€ä»£ç†</h2><p> JDKä¸­æä¾›çš„ç”ŸæˆåŠ¨æ€ä»£ç†ç±»çš„æœºåˆ¶æœ‰ä¸ªé²œæ˜çš„ç‰¹ç‚¹æ˜¯ï¼š æŸä¸ªç±»å¿…é¡»æœ‰å®ç°çš„æ¥å£ï¼Œè€Œç”Ÿæˆçš„ä»£ç†ç±»ä¹Ÿåªèƒ½ä»£ç†æŸä¸ªç±»æ¥å£å®šä¹‰çš„æ–¹æ³•ã€‚æ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­å¦‚æœ<code>RentServiceImpl</code>æœ‰å…¶ä»–æ–¹æ³•<code>live()</code>ï¼ŒJDKåŠ¨æ€ä»£ç†ç±»ä¸­å°±æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ã€‚</p><p>è€Œ<code>CGLIB(Code Generation Library)</code>æ²¡æœ‰æ¥å£ä¹Ÿèƒ½å®ç°åŠ¨æ€ä»£ç†</p><p><strong>ç¤ºä¾‹ä»£ç </strong></p><p>è‡ªå®šä¹‰<code>Interceptor</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RentInterceptor</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> object å¢å¼ºçš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> method æ‹¦æˆªçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args æ–¹æ³•å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> methodProxy å¯¹æ–¹æ³•çš„ä»£ç†ï¼ŒinvokeSuperæ–¹æ³•è¡¨ç¤ºå¯¹è¢«ä»£ç†å¯¹è±¡æ–¹æ³•çš„è°ƒç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ‰§è¡Œç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Object object, Method method, Object[] args, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿å®¢çœ‹æˆ¿å’¯...&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> methodProxy.invokeSuper(object, args);</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿å®¢ç­¾åå’¯...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestProxy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="type">RentInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RentInterceptor</span>();</span><br><span class="line">        <span class="type">Enhancer</span> <span class="variable">enhancer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enhancer</span>();</span><br><span class="line">        enhancer.setSuperclass(RentServiceImpl.class);</span><br><span class="line">        enhancer.setCallback(interceptor);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºä»£ç†ç±»ï¼Œå¯ä»¥å¯¹ç±»è¿›è¡Œä»£ç†</span></span><br><span class="line">        <span class="type">RentServiceImpl</span> <span class="variable">proxy</span> <span class="operator">=</span> (RentServiceImpl)enhancer.create();</span><br><span class="line">        System.out.println(<span class="string">&quot;cglib: &quot;</span> + proxy.getClass());</span><br><span class="line">        proxy.pay();</span><br><span class="line">        proxy.decorate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206154032.png" alt="cglib"></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> proxy </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java å†…å­˜åŒºåŸŸ</title>
      <link href="/2021/09/07/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F/"/>
      <url>/2021/09/07/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaå†…å­˜åŒºåŸŸ"><a href="#Javaå†…å­˜åŒºåŸŸ" class="headerlink" title="Javaå†…å­˜åŒºåŸŸ"></a>Javaå†…å­˜åŒºåŸŸ</h1><p><strong>JDK 1.8ä»¥å‰ï¼š</strong></p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153655.png" alt="JVMè¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"></p><p><strong>JDK 1.8ä»¥å:</strong></p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153701.png" alt="Javaè¿è¡Œæ—¶æ•°æ®åŒºåŸŸJDK1.8"></p><p><strong>çº¿ç¨‹ç§æœ‰ï¼š</strong></p><ul><li><p><strong>è™šæ‹Ÿæœºæ ˆ</strong></p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153704.jpeg" alt="è™šæ‹Ÿæœºæ ˆ"></p><p>Java è™šæ‹Ÿæœºæ ˆæ˜¯ç”±ä¸€ä¸ªä¸ªæ ˆå¸§ç»„æˆï¼Œè€Œæ¯ä¸ªæ ˆå¸§ä¸­éƒ½æ‹¥æœ‰ï¼šå±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ä¿¡æ¯ã€‚</p><p><strong>å±€éƒ¨å˜é‡è¡¨ä¸»è¦å­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§æ•°æ®ç±»å‹</strong>ï¼ˆbooleanã€byteã€charã€shortã€intã€floatã€longã€doubleï¼‰ã€<strong>å¯¹è±¡å¼•ç”¨</strong>ï¼ˆreference ç±»å‹ï¼Œå®ƒä¸åŒäºå¯¹è±¡æœ¬èº«ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–å…¶ä»–ä¸æ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½®ï¼‰ã€‚</p><p><strong>Java è™šæ‹Ÿæœºæ ˆä¼šå‡ºç°ä¸¤ç§é”™è¯¯ï¼š<code>StackOverFlowError</code> å’Œ <code>OutOfMemoryError</code>ã€‚</strong></p><ul><li><strong><code>StackOverFlowError</code>ï¼š</strong> è‹¥ Java è™šæ‹Ÿæœºæ ˆçš„å†…å­˜å¤§å°ä¸å…è®¸åŠ¨æ€æ‰©å±•ï¼Œé‚£ä¹ˆå½“çº¿ç¨‹è¯·æ±‚æ ˆçš„æ·±åº¦è¶…è¿‡å½“å‰ Java è™šæ‹Ÿæœºæ ˆçš„æœ€å¤§æ·±åº¦çš„æ—¶å€™ï¼Œå°±æŠ›å‡º StackOverFlowError é”™è¯¯ã€‚</li><li><strong><code>OutOfMemoryError</code>ï¼š</strong> Java è™šæ‹Ÿæœºæ ˆçš„å†…å­˜å¤§å°å¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œ å¦‚æœè™šæ‹Ÿæœºåœ¨åŠ¨æ€æ‰©å±•æ ˆæ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ï¼Œåˆ™æŠ›å‡º<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</li></ul></li><li><p><strong>æœ¬åœ°æ–¹æ³•æ ˆ</strong></p><p>æœ¬åœ°æ–¹æ³•æ ˆä¸è™šæ‹Ÿæœºæ ˆå‘æŒ¥çš„ä½œç”¨ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºè™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„æœ¬åœ°ï¼ˆNativeï¼‰æ–¹æ³•æœåŠ¡</p></li><li><p><strong>ç¨‹åºè®¡æ•°å™¨</strong></p><p>ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚</p><p>ç¨‹åºè®¡æ•°å™¨çš„ä½œç”¨ï¼š</p><ol><li>å­—èŠ‚ç è§£é‡Šå™¨é€šè¿‡æ”¹å˜ç¨‹åºè®¡æ•°å™¨æ¥ä¾æ¬¡è¯»å–æŒ‡ä»¤ï¼Œä»è€Œå®ç°ä»£ç çš„æµç¨‹æ§åˆ¶ï¼Œå¦‚ï¼šé¡ºåºæ‰§è¡Œã€é€‰æ‹©ã€å¾ªç¯ã€å¼‚å¸¸å¤„ç†ã€‚</li><li>åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œç¨‹åºè®¡æ•°å™¨ç”¨äºè®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œçš„ä½ç½®ï¼Œä»è€Œå½“çº¿ç¨‹è¢«åˆ‡æ¢å›æ¥çš„æ—¶å€™èƒ½å¤ŸçŸ¥é“è¯¥çº¿ç¨‹ä¸Šæ¬¡è¿è¡Œåˆ°å“ªå„¿äº†ã€‚</li></ol><p>ç¨‹åºè®¡æ•°å™¨æ˜¯å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰è§„å®šä»»ä½•<code>OutOfMemoryError</code>çš„å†…å­˜åŒºåŸŸ</p></li></ul><p><strong>çº¿ç¨‹å…±äº«ï¼š</strong></p><ul><li><p><strong>å †</strong></p><p>Javaå †çš„ç›®çš„æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰å¯¹è±¡å®ä¾‹éƒ½åœ¨å †ä¸Šåˆ†é…å†…å­˜ã€‚</p><p>Javaå †ä¹Ÿæ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸã€‚ä»åƒåœ¾å›æ”¶çš„è§’åº¦ï¼Œç”±äºç°åœ¨æ”¶é›†å™¨åŸºæœ¬éƒ½é‡‡ç”¨åˆ†ä»£åƒåœ¾æ”¶é›†ç®—æ³•ï¼Œæ‰€ä»¥ Java å †è¿˜å¯ä»¥ç»†åˆ†ä¸ºï¼šæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼›å†ç»†è‡´ä¸€ç‚¹æœ‰ï¼š<code>Eden</code> ç©ºé—´ã€<code>From Survivor</code>ã€<code>To Survivor</code> ç©ºé—´ç­‰ã€‚<strong>è¿›ä¸€æ­¥åˆ’åˆ†çš„ç›®çš„æ˜¯æ›´å¥½åœ°å›æ”¶å†…å­˜ï¼Œæˆ–è€…æ›´å¿«åœ°åˆ†é…å†…å­˜ã€‚</strong></p><p>JDK 7åŠä»¥å‰å †å†…å­˜åŒºåŸŸï¼š</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153708.png" alt="JVMå †å†…å­˜ç»“æ„-JDK7"></p><p>JDK 8ä»¥åå †å†…å­˜åŒºåŸŸï¼š</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206153711.png" alt="JVMå¯¹å†…å­˜åŒºåŸŸ-jdk8"></p></li><li><p><strong>æ–¹æ³•åŒº</strong></p><p>æ–¹æ³•åŒºä¸ Java å †ä¸€æ ·ï¼Œæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œå®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚</p></li><li><p><strong>è¿è¡Œæ—¶å¸¸é‡æ± </strong></p><p>è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚Class æ–‡ä»¶ä¸­é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯å¤–ï¼Œè¿˜æœ‰å¸¸é‡æ± è¡¨ï¼ˆç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼‰</p></li><li><p><strong>ç›´æ¥å†…å­˜</strong></p><p>ç›´æ¥å†…å­˜å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯è™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸï¼Œä½†æ˜¯è¿™éƒ¨åˆ†å†…å­˜ä¹Ÿè¢«é¢‘ç¹åœ°ä½¿ç”¨ã€‚è€Œä¸”ä¹Ÿå¯èƒ½å¯¼è‡´ <code>OutOfMemoryError</code> é”™è¯¯å‡ºç°ã€‚</p></li></ul><hr><p><em>å‚è€ƒé˜…è¯»ï¼š</em></p><p><a href="https://book.douban.com/subject/34907497/">æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼ˆç¬¬3ç‰ˆï¼‰ (è±†ç“£) (douban.com)</a></p><p><a href="https://github.com/Snailclimb/JavaGuide/blob/master/docs/java/jvm/Java%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F.md">JavaGuide</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†…å­˜åŒºåŸŸ </tag>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆ LRU ç¼“å­˜æœºåˆ¶ç®—æ³•é¢˜</title>
      <link href="/2021/07/23/%E6%B5%85%E8%B0%88LRU%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E7%AE%97%E6%B3%95%E9%A2%98/"/>
      <url>/2021/07/23/%E6%B5%85%E8%B0%88LRU%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E7%AE%97%E6%B3%95%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="146-LRU-ç¼“å­˜æœºåˆ¶"><a href="#146-LRU-ç¼“å­˜æœºåˆ¶" class="headerlink" title="146. LRU ç¼“å­˜æœºåˆ¶"></a><a href="https://leetcode-cn.com/problems/lru-cache/">146. LRU ç¼“å­˜æœºåˆ¶</a></h1><p>è¿ç”¨ä½ æ‰€æŒæ¡çš„æ•°æ®ç»“æ„ï¼Œè®¾è®¡å’Œå®ç°ä¸€ä¸ª <a href="https://baike.baidu.com/item/LRU">LRU (æœ€è¿‘æœ€å°‘ä½¿ç”¨) ç¼“å­˜æœºåˆ¶</a> ã€‚</p><p>å®ç° <code>LRUCache</code> ç±»ï¼š</p><ul><li><code>LRUCache(int capacity)</code> ä»¥æ­£æ•´æ•°ä½œä¸ºå®¹é‡ <code>capacity</code> åˆå§‹åŒ– LRU ç¼“å­˜</li><li><code>int get(int key)</code> å¦‚æœå…³é”®å­— <code>key</code> å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› <code>-1</code> ã€‚</li><li><code>void put(int key, int value)</code> å¦‚æœå…³é”®å­—å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ï¼›å¦‚æœå…³é”®å­—ä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥è¯¥ç»„ã€Œå…³é”®å­—-å€¼ã€ã€‚å½“ç¼“å­˜å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶ï¼Œå®ƒåº”è¯¥åœ¨å†™å…¥æ–°æ•°æ®ä¹‹å‰åˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®å€¼ï¼Œä»è€Œä¸ºæ–°çš„æ•°æ®å€¼ç•™å‡ºç©ºé—´ã€‚</li><li>è¦æ±‚åœ¨<code>O(1)</code>æ—¶é—´å¤æ‚åº¦å†…å®Œæˆ<code>get</code>å’Œ<code>put</code>æ“ä½œ</li></ul><hr><h2 id="å®ç°æ€è·¯åŠå‚è€ƒä»£ç "><a href="#å®ç°æ€è·¯åŠå‚è€ƒä»£ç " class="headerlink" title="å®ç°æ€è·¯åŠå‚è€ƒä»£ç "></a>å®ç°æ€è·¯åŠå‚è€ƒä»£ç </h2><p>è¦åœ¨<code>O(1)</code>æ—¶é—´å†…å®Œæˆ<code>get</code>å’Œ<code>put</code>æ“ä½œï¼Œå¾ˆè‡ªç„¶çš„æƒ³åˆ°å“ˆå¸Œè¡¨ç»“æ„ï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾é¡µé¢åœ¨ç½®æ¢æ—¶å¯¹é¡ºåºæ˜¯æœ‰è¦æ±‚çš„ã€‚å¦‚æœä½¿ç”¨é“¾è¡¨ç»“æ„ï¼Œåœ¨<code>get</code>æ“ä½œä¸Šæ˜¯<code>O(n)</code>çš„å¤æ‚åº¦ã€‚æ•…å¯ä»¥è€ƒè™‘é‡‡ç”¨å“ˆå¸Œè¡¨åŠ ä¸ŠåŒå‘é“¾è¡¨çš„ç»“æ„ï¼Œå“ˆå¸Œè¡¨å­˜å‚¨å¯¹åº”çš„ç»“ç‚¹ã€‚</p><p><strong>åŸç”Ÿå®ç°</strong></p><p>å…ˆå®šä¹‰åŒå‘é“¾è¡¨èŠ‚ç‚¹ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰keyçš„åŸå› æ˜¯éœ€è¦keyå¯¹å“ˆå¸Œè¡¨è¿›è¡Œæ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> key, val;</span><br><span class="line">    <span class="keyword">public</span> Node next, prev;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span> v)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = k;</span><br><span class="line">        <span class="built_in">this</span>.val = v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>Node</code>æ„å»ºåŒå‘é“¾è¡¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DoubleList</span>&#123;</span><br><span class="line">    <span class="comment">//å¤´å°¾èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">private</span> Node head, tail;</span><br><span class="line">    <span class="comment">//é“¾è¡¨èŠ‚ç‚¹æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•ï¼Œåˆå§‹åŒ–å¤´å°¾èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DoubleList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.head = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">this</span>.tail = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.prev = head;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä»é“¾è¡¨å°¾éƒ¨æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        node.prev = tail.prev;</span><br><span class="line">        node.next = tail;</span><br><span class="line">        tail.prev.next = node;</span><br><span class="line">        tail.prev = node;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤é“¾è¡¨æŒ‡å®šèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">        node.prev.next = node.next;</span><br><span class="line">        node.next.prev = node.prev;</span><br><span class="line">        size--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤é“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> Node <span class="title function_">removeFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (head.next == tail) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> head.next;</span><br><span class="line">        remove(node);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›é“¾è¡¨èŠ‚ç‚¹æ•°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­åˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯<code>O(1)</code>ï¼Œå› ä¸ºæ˜¯åŒå‘é“¾è¡¨æ‰€ä»¥å¯ä»¥ç›´æ¥æ‰¾åˆ°å‰é©±èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯å•é“¾è¡¨åˆ é™¤æ“ä½œä¼šéœ€è¦<code>O(n)</code>æ—¶é—´å¤æ‚åº¦ã€‚</p><p>åŒé“¾è¡¨ç»“åˆå“ˆå¸Œè¡¨å®ç°<code>LRUCache</code>ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;Integer, Node&gt; map;</span><br><span class="line">    <span class="keyword">private</span> DoubleList cache;</span><br><span class="line">    <span class="comment">//ç¼“å­˜å®¹é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> capacity;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="built_in">this</span>.cache = <span class="keyword">new</span> <span class="title class_">DoubleList</span>();</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getæ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="comment">//å…ˆæŸ¥çœ‹æ˜¯å¦å­˜åœ¨è¯¥èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (!map.containsKey(key)) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="comment">//å¦‚æœå­˜åœ¨ï¼Œå°†è¯¥èŠ‚ç‚¹ç§»åŠ¨åˆ°é“¾è¡¨å°¾éƒ¨æˆä¸ºæœ€è¿‘æœ€å¸¸ä½¿ç”¨èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">val</span> <span class="operator">=</span> map.get(key).val;</span><br><span class="line">        makeRecently(key);</span><br><span class="line">        <span class="keyword">return</span> val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//putæ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœé“¾è¡¨ä¸­å·²å­˜åœ¨è¯¥èŠ‚ç‚¹ï¼Œå°†è¯¥èŠ‚ç‚¹ç›´æ¥ç§»åŠ¨åˆ°å°¾éƒ¨</span></span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(key)) &#123;</span><br><span class="line">            map.put(key, value);</span><br><span class="line">            makeRecently(key);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœä¸å­˜åœ¨è¯¥èŠ‚ç‚¹ï¼Œåˆ™é¦–å…ˆè¦åˆ¤æ–­ç¼“å­˜æ˜¯å¦å·²æ»¡ï¼›</span></span><br><span class="line">        <span class="keyword">if</span> (cache.size() == <span class="built_in">this</span>.capacity) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœæ»¡äº†åˆ é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">oldestNode</span> <span class="operator">=</span> cache.removeFirst();</span><br><span class="line">            map.remove(oldestNode.key);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">Node</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(key, value);</span><br><span class="line">        map.put(key, newNode);</span><br><span class="line">        cache.addLast(newNode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°æœ€è¿‘ä½¿ç”¨èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makeRecently</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">newestNode</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">        cache.remove(newestNode);</span><br><span class="line">        cache.addLast(newestNode);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>ä½¿ç”¨<code>LinkedHashMap</code></strong></p><p>Java å†…ç½®é›†åˆç±»å‹<code>LinkedHashMap</code>æ˜¯ä¸€ä¸ªå“ˆå¸Œé“¾è¡¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span>&#123;</span><br><span class="line">    LinkedHashMap&lt;Integer, Integer&gt; cache;</span><br><span class="line">    <span class="type">int</span> capacity;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        cache = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//getæ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!cache.containsKey(key)) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        makeRecently(key);</span><br><span class="line">       <span class="keyword">return</span> cache.get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//putæ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cache.containsKey(key)) &#123;</span><br><span class="line">            cache.put(key, value);</span><br><span class="line">            makeRecently(key);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.capacity == cache.size()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">oldestNode</span> <span class="operator">=</span> cache.keySet().iterator().next();</span><br><span class="line">            cache.remove(oldestNode);</span><br><span class="line">        &#125;</span><br><span class="line">        cache.put(key, value);</span><br><span class="line">        makeRecently(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°èŠ‚ç‚¹æ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makeRecently</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">val</span> <span class="operator">=</span> cache.get(key);</span><br><span class="line">        cache.remove(key);</span><br><span class="line">        cache.put(key, val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æœ€ç®€å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> <span class="keyword">extends</span> <span class="title class_">LinkedHashMap</span>&lt;Integer, Integer&gt;&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> capacity;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(capacity, <span class="number">0.75F</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">this</span>.capacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getOrDefault(key, -<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.put(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¼šåœ¨putè°ƒç”¨æ—¶è‡ªåŠ¨è°ƒç”¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">removeEldestEntry</span><span class="params">(Map.Entry&lt;Integer, Integer&gt; eldest)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size() &gt; capacity;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>æœ¬æ–‡å‚è€ƒï¼š<a href="https://github.com/labuladong/fucking-algorithm#labuladong-%E7%9A%84%E7%AE%97%E6%B3%95%E5%B0%8F%E6%8A%84">labuladong çš„ç®—æ³•å°æŠ„</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> LRU </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode åˆ·é¢˜è®°å½•</title>
      <link href="/2021/07/09/LeetCode%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
      <url>/2021/07/09/LeetCode%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Leetcode"><a href="#Leetcode" class="headerlink" title="Leetcode"></a>Leetcode</h1><h2 id="1-ä¸¤æ•°ä¹‹å’Œ"><a href="#1-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="1. ä¸¤æ•°ä¹‹å’Œ"></a><a href="https://leetcode-cn.com/problems/two-sum/">1. ä¸¤æ•°ä¹‹å’Œ</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ <code>target</code>ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º <strong>å’Œä¸ºç›®æ ‡å€¼</strong> <em><code>target</code></em> çš„é‚£ <strong>ä¸¤ä¸ª</strong> æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [2,7,11,15], target = 9</span><br><span class="line">è¾“å‡ºï¼š[0,1]</span><br><span class="line">è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p><strong>1.æš´åŠ›æ³•</strong></p><p>å¯¹ä¸¤ä¸¤æ•°å­—å’ŒåŠ èµ·æ¥è¿›è¡Œæ¯”è¾ƒ</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)ï¼Œn ä¸ºæ•°ç»„é•¿åº¦</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="type">int</span>[] ret = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[i] + nums[j] == target) &#123;</span><br><span class="line">                    ret[<span class="number">0</span>] = i;</span><br><span class="line">                    ret[<span class="number">1</span>] = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>2.å“ˆå¸Œè¡¨</strong></p><p>å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ª<code>x</code>è¦æ‰¾åˆ°<code>target - x</code>æ—¶é—´å¤æ‚åº¦æ˜¯ O(n^2)ï¼Œå¦‚æœä½¿ç”¨å“ˆå¸Œè¡¨å°†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•°ä¿å­˜ä¸‹æ¥ï¼Œå¯»æ‰¾<code>target - x</code>çš„æ—¶é—´å¤æ‚åº¦å°±å¯ä»¥é™åˆ° O(1)</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œn ä¸ºæ•°ç»„é•¿åº¦</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼Œn ä¸ºæ•°ç»„é•¿åº¦</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(target - nums[i])) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i, map.get(target - nums[i])&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="88-åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„"><a href="#88-åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„" class="headerlink" title="88. åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„"></a><a href="https://leetcode-cn.com/problems/merge-sorted-array/">88. åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</a></h2><p>ç»™ä½ ä¸¤ä¸ªæœ‰åºæ•´æ•°æ•°ç»„ <code>nums1</code> å’Œ <code>nums2</code>ï¼Œè¯·ä½ å°† <code>nums2</code> åˆå¹¶åˆ° <code>nums1</code> ä¸­<em>ï¼Œ</em>ä½¿ <code>nums1</code> æˆä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚</p><p>åˆå§‹åŒ– <code>nums1</code> å’Œ <code>nums2</code> çš„å…ƒç´ æ•°é‡åˆ†åˆ«ä¸º <code>m</code> å’Œ <code>n</code>ã€‚ä½ å¯ä»¥å‡è®¾ <code>nums1</code> çš„ç©ºé—´å¤§å°ç­‰äº <code>m + n</code>ï¼Œè¿™æ ·å®ƒå°±æœ‰è¶³å¤Ÿçš„ç©ºé—´ä¿å­˜æ¥è‡ª <code>nums2</code> çš„å…ƒç´ ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums1 = [1,2,3,0,0,0], m = 3, nums2 = [2,5,6], n = 3</span><br><span class="line">è¾“å‡ºï¼š[1,2,2,3,5,6]</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p><strong>1.å…ˆåˆå¹¶ï¼Œå†æ’åº</strong></p><p>å°†<code>nums2</code>ä¸­çš„å…ƒç´ åŠ å…¥<code>nums1</code>ï¼Œå†å¯¹<code>nums1</code>æ’åº</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO( (m+n) log(m+n) )ï¼Œå¿«æ’çš„æ—¶é—´å¤æ‚åº¦</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO( log(m+n) )ï¼Œå¿«æ’çš„ç©ºé—´å¤æ‚åº¦</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">solution</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span> m, <span class="type">int</span>[] nums2, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            nums1[m + i] = nums2[i];</span><br><span class="line">        &#125;</span><br><span class="line">        Arrays.sort(nums1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>2.åŒæŒ‡é’ˆæ³•</strong></p><p>æ–¹æ³• 1 æ²¡æœ‰ç”¨åˆ°é¢˜ç›®ä¸­<code>nums1</code>å’Œ<code>nums2</code>æœ‰åºçš„æ€§è´¨ï¼Œå¯ä»¥ç”¨ä¸¤ä¸ªæŒ‡é’ˆ<code>iã€j</code>åˆ†åˆ«æŒ‡å‘<code>nums1ã€nums2</code>çš„ä¸‹æ ‡ï¼Œå¹¶æ ¹æ®ä¸‹æ ‡è¿›è¡Œæ¯”è¾ƒï¼Œä½†æ˜¯éœ€è¦ä¸€ä¸ªæ–°æ•°ç»„ä¿å­˜ç»“æœ</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(m + n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(m + n)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span> m, <span class="type">int</span>[] nums2, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] sorted = <span class="keyword">new</span> <span class="title class_">int</span>[nums1.length];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (i &lt; m &amp;&amp; j &lt; n) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums1[i] &lt; nums2[j]) &#123;</span><br><span class="line">                sorted[i + j] = nums1[i++];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                sorted[i + j] = nums2[j++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i &lt; m) &#123;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; m) &#123;</span><br><span class="line">                sorted[i + j] = nums1[i++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (j &lt; n) &#123;</span><br><span class="line">                sorted[i + j] = nums2[j++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; m + n; k++) &#123;</span><br><span class="line">            nums1[k] = sorted[k];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>3.é€†å‘åŒæŒ‡é’ˆ</strong></p><p>æ–¹æ³• 2 ä¸­æ–°å»ºäº†ä¸€ä¸ª<code>sorted</code>æ•°ç»„ä¿å­˜æ’åºç»“æœï¼Œä½†æ˜¯é¢˜ç›®ä¸­<code>nums1</code>ä¸­å·²ç»é¢„ç•™äº†ç©ºé—´ï¼Œæ‰€ä»¥å¯ä»¥ä»å¤§çš„å¼€å§‹æ’åºï¼Œå¹¶æ”¾å…¥<code>nums1</code>çš„ç©ºé—²åŒº</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(m + n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] nums1, <span class="type">int</span> m, <span class="type">int</span>[] nums2, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> m - <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> n - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums1[i] &gt; nums2[j]) &#123;</span><br><span class="line">                nums1[i + j + <span class="number">1</span>] = nums1[i--];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                nums1[i + j + <span class="number">1</span>] = nums2[j--];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (i &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                nums1[i + j + <span class="number">1</span>] = nums1[i--];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                nums1[i + j + <span class="number">1</span>] = nums2[j--];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="53-æœ€å¤§å­åºå’Œ"><a href="#53-æœ€å¤§å­åºå’Œ" class="headerlink" title="53. æœ€å¤§å­åºå’Œ"></a><a href="https://leetcode-cn.com/problems/maximum-subarray/">53. æœ€å¤§å­åºå’Œ</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œæ‰¾åˆ°ä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [-2,1,-3,4,-1,2,1,-5,4]</span><br><span class="line">è¾“å‡ºï¼š6</span><br><span class="line">è§£é‡Šï¼šè¿ç»­å­æ•°ç»„ [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6 ã€‚</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>å‡è®¾ dp[i]æ˜¯ä»¥ nums[i]ç»“å°¾çš„æœ€å¤§å­åºåˆ—å’Œï¼Œåˆ™<br><img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20210709145452.png"><br>æœ€å¤§å­åºåˆ—å’Œ max å°±æ˜¯ dp æ•°ç»„ä¸­çš„æœ€å¤§å€¼</p><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSubArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line"><span class="comment">//dp[i]è¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„æœ€å¤§å­åºåˆ—å’Œ</span></span><br><span class="line"><span class="type">int</span>[] dp = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line"><span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line"><span class="comment">//ä»¥ nums[i] ç»“å°¾çš„æœ€å¤§å­åºåˆ—å’Œ == ä»¥ nums[i-1] ç»“å°¾çš„æœ€å¤§å­åºåˆ—å’Œ + nums[i] æˆ–è€…æ˜¯ nums[i]</span></span><br><span class="line">dp[i] = Math.max(dp[i-<span class="number">1</span>] + nums[i], nums[i]);</span><br><span class="line">max = Math.max(dp[i], max);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="26-åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"><a href="#26-åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹" class="headerlink" title="26. åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹"></a><a href="https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/">26. åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹</a></h2><p>ç»™ä½ ä¸€ä¸ªæœ‰åºæ•°ç»„ <code>nums</code> ï¼Œè¯·ä½ **<a href="http://baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95"> åŸåœ°</a>** åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´  <strong>åªå‡ºç°ä¸€æ¬¡</strong> ï¼Œè¿”å›åˆ é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [0,0,1,1,1,2,2,3,3,4]</span><br><span class="line">è¾“å‡ºï¼š5, nums = [0,1,2,3,4]</span><br><span class="line">è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 5 ï¼Œ å¹¶ä¸”åŸæ•°ç»„ nums çš„å‰äº”ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 0, 1, 2, 3, 4 ã€‚ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-3"><a href="#è§£é¢˜æ€è·¯-3" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p><strong>1.æš´åŠ›æ³•</strong></p><p>å¯¹äº<code>nums[i]</code>ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”<code>nums[i]</code>å¤§çš„æ•°æ”¾åœ¨<code>nums[i+1]</code>çš„ä½ç½®ï¼Œç›´åˆ°æ‰¾ä¸åˆ°æ¯”<code>nums[i]</code>è¿˜è¦å¤§çš„æ•°ã€‚æœ€åè¿”å›<code>i+1</code>å³æ•°ç»„çš„æ–°é•¿åº¦</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeDuplicates</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; len; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[j] &gt; nums[i]) &#123;</span><br><span class="line">                    nums[i + <span class="number">1</span>] = nums[j];</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (j == len - <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> i+<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> len;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>2.åŒæŒ‡é’ˆ</strong></p><p>å¦‚æœå­˜åœ¨<code>nums[i] = nums[j]</code>ï¼Œåˆ™å¯¹äº $$i \leq k \leq j$$ æœ‰<code>nums[i] = nums[k] = nums[j]</code>ï¼Œå³ç›¸ç­‰çš„å…ƒç´ ä¸‹æ ‡ä¸€å®šè¿ç»­ã€‚é€šè¿‡ç»´æŠ¤<code>slow</code>å’Œ<code>fast</code>å¿«æ…¢æŒ‡é’ˆï¼Œå¯ä»¥å°†ç©ºé—´å¤æ‚åº¦é™ä½åˆ° O(n)</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeDuplicates</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">slow</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">fast</span> <span class="operator">=</span> slow + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (fast &lt; nums.length) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[slow] == nums[fast]) &#123;</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    fast++;</span><br><span class="line">                &#125; <span class="keyword">while</span> (fast &lt; nums.length &amp;&amp; nums[slow] == nums[fast]);</span><br><span class="line">                <span class="keyword">if</span> (fast == nums.length) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                nums[slow+<span class="number">1</span>] = nums[fast];</span><br><span class="line">                slow++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                slow++;</span><br><span class="line">                fast++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> slow + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæŒ‡é’ˆç®€æ˜“å†™æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeDuplicates</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] != nums[j]) &#123;</span><br><span class="line">                nums[++i] = nums[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ++i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="350-ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†-II"><a href="#350-ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†-II" class="headerlink" title="350. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† II"></a><a href="https://leetcode-cn.com/problems/intersection-of-two-arrays-ii/">350. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† II</a></h2><p>ç»™å®šä¸¤ä¸ªæ•°ç»„ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å®ƒä»¬çš„äº¤é›†ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums1 = [1,2,2,1], nums2 = [2,2]</span><br><span class="line">è¾“å‡ºï¼š[2,2]</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-4"><a href="#è§£é¢˜æ€è·¯-4" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p><strong>1.å“ˆå¸Œè¡¨</strong></p><p>å¯¹<code>nums1</code>å’Œ<code>nums2</code>åˆ›å»ºä¸¤ä¸ªå“ˆå¸Œè¡¨<code>map1</code>å’Œ<code>map2</code>ï¼Œä»¥æ•°ç»„ä¸­å‡ºç°çš„æ•°å­—ä¸º Keyï¼Œå‡ºç°çš„æ¬¡æ•°ä¸º valueï¼Œå¦‚æœä¸¤ä¸ªè¡¨å­˜åœ¨ç›¸åŒçš„<code>key</code>å€¼ï¼Œåˆ™è¿”å›è¾ƒå°çš„<code>value</code>ï¼Œæ­¤<code>value</code>å°±æ˜¯ä¸¤ä¸ªæ•°ç»„ä¸­<code>key</code>çš„äº¤é›†</p><p><strong>å¤æ‚åº¦</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n + m)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n + m)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><p>(è‡ªå·±å†™çš„ç¨€ç¢)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] intersect(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2) &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; map1 = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums1.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!map1.containsKey(nums1[i])) &#123;</span><br><span class="line">                map1.put(nums1[i], <span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> map1.get(nums1[i]);</span><br><span class="line">                count++;</span><br><span class="line">                map1.put(nums1[i], count);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Map&lt;Integer, Integer&gt; map2 = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums2.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!map2.containsKey(nums2[i])) &#123;</span><br><span class="line">                map2.put(nums2[i], <span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> map2.get(nums2[i]);</span><br><span class="line">                count++;</span><br><span class="line">                map2.put(nums2[i], count);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;Integer&gt; ret = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Set&lt;Integer&gt; keySet = map1.keySet();</span><br><span class="line">        <span class="keyword">for</span> (Integer key : keySet) &#123;</span><br><span class="line">            <span class="keyword">if</span> (map2.containsKey(key)) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> map1.get(key) &gt; map2.get(key) ? map2.get(key) : map1.get(key);</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">                    ret.add(key);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[ret.size()];</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Integer integer : ret) &#123;</span><br><span class="line">            result[i++] = integer;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨è¾ƒå°çš„æ•°ç»„å»ºå“ˆå¸Œè¡¨é™ä½ç©ºé—´å¤æ‚åº¦</p><p><strong>å¤æ‚åº¦</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n + m)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO($$min\lbrace n,m\rbrace$$)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] intersect(<span class="type">int</span>[] nums1, <span class="type">int</span>[] nums2) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums1.length &gt; nums2.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> intersect(nums2,nums1);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//map.getOrDefault(key, defaultValue) å¦‚æœå­˜åœ¨keyï¼Œè¿”å›keyçš„valueï¼›å¦‚æœä¸å­˜åœ¨è¿”å›defaultValue</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : nums1) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> map.getOrDefault(i, <span class="number">0</span>) + <span class="number">1</span>;</span><br><span class="line">            map.put(i, count);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] intersection = <span class="keyword">new</span> <span class="title class_">int</span>[nums1.length];</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : nums2) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> map.getOrDefault(i, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                intersection[index++] = i;</span><br><span class="line">                count--;</span><br><span class="line">                <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    map.put(i,count);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    map.remove(i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Arrays.copyOfRange(intersection,<span class="number">0</span>,index);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"><a href="#121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº" class="headerlink" title="121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></a><a href="https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/">121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</a></h2><p>ç»™å®šä¸€ä¸ªæ•°ç»„ <code>prices</code> ï¼Œå®ƒçš„ç¬¬ <code>i</code> ä¸ªå…ƒç´  <code>prices[i]</code> è¡¨ç¤ºä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ <code>i</code> å¤©çš„ä»·æ ¼ã€‚</p><p>ä½ åªèƒ½é€‰æ‹© <strong>æŸä¸€å¤©</strong> ä¹°å…¥è¿™åªè‚¡ç¥¨ï¼Œå¹¶é€‰æ‹©åœ¨ <strong>æœªæ¥çš„æŸä¸€ä¸ªä¸åŒçš„æ—¥å­</strong> å–å‡ºè¯¥è‚¡ç¥¨ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚</p><p>è¿”å›ä½ å¯ä»¥ä»è¿™ç¬”äº¤æ˜“ä¸­è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚å¦‚æœä½ ä¸èƒ½è·å–ä»»ä½•åˆ©æ¶¦ï¼Œè¿”å› <code>0</code> ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š[7,1,5,3,6,4]</span><br><span class="line">è¾“å‡ºï¼š5</span><br><span class="line">è§£é‡Šï¼šåœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡ºï¼Œæœ€å¤§åˆ©æ¶¦ = 6-1 = 5 ã€‚</span><br><span class="line">     æ³¨æ„åˆ©æ¶¦ä¸èƒ½æ˜¯ 7-1 = 6, å› ä¸ºå–å‡ºä»·æ ¼éœ€è¦å¤§äºä¹°å…¥ä»·æ ¼ï¼›åŒæ—¶ï¼Œä½ ä¸èƒ½åœ¨ä¹°å…¥å‰å–å‡ºè‚¡ç¥¨ã€‚</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-5"><a href="#è§£é¢˜æ€è·¯-5" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p><strong>1.è›®åŠ›æ³•ï¼ˆè¶…å‡ºæ—¶é—´é™åˆ¶ï¼‰</strong></p><p>å¯¹ç¬¬<code>i</code>å¤©ä¹°å…¥ï¼Œè®¡ç®—ä¹‹åæ¯å¤©çš„åˆ©æ¶¦ï¼Œå¹¶ä¿å­˜æœ€å¤§å€¼ã€‚è¿”å›æœ€åçš„æœ€å¤§å€¼ã€‚</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; prices.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; prices.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (prices[j] - prices[i] &gt; max) &#123;</span><br><span class="line">                    max = prices[j] - prices[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>2.å•è°ƒæ ˆ</strong></p><p>ç»´æŠ¤ä¸€ä¸ªå•è°ƒæ ˆ</p><ul><li>å…¥æ ˆå…ƒç´ å¤§äºç­‰äºæ ˆé¡¶å…ƒç´ æ—¶ï¼Œç›´æ¥å…¥æ ˆ</li><li>å…¥æ ˆå…ƒç´ å°äºæ ˆé¡¶å…ƒç´ æ—¶ï¼Œå°†æ ˆé¡¶å¼¹å‡ºï¼Œå¹¶è®¡ç®—å®ƒä¸æ ˆåº•å…ƒç´ çš„å·®å€¼ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå…ƒç´ å°äºç­‰äºå…¥æ ˆå…ƒç´ </li><li>åœ¨æ•°ç»„æœ€åè®¾ç½®ä¸€ä¸ªå“¨å…µï¼Œä¸ºäº†ä½¿æ ˆä¸­å…ƒç´ å¾—åˆ°è®¡ç®—</li></ul><p>ç¬¬äºŒæ¡å¯ä»¥è¿™æ ·ç†è§£ï¼Œæ ˆé¡¶å…ƒç´ ä¸º<code>a</code>ï¼Œå…¥æ ˆå…ƒç´ ä¸º<code>b</code>ï¼Œå½“<code>b</code>å…¥æ ˆæ—¶ï¼Œä¹‹åå…¥æ ˆçš„å…ƒç´ <code>C</code>ä¸€å®šå­˜åœ¨ $$C-b &gt; C-a$$</p><p>æ­¤æ—¶<code>a</code>å·²ç»æ²¡ç”¨äº†ï¼Œè®¡ç®—ä¸€ä¸‹ä¸åˆ©æ¶¦å³å¯å¼¹å‡ºã€‚</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        stack.push(prices[<span class="number">0</span>]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> prices[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; prices.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (stack.peek() &lt; prices[i]) &#123;</span><br><span class="line">                stack.push(prices[i]);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (stack.size() == <span class="number">1</span> &amp;&amp; stack.peek() &gt; prices[i]) &#123;</span><br><span class="line">                stack.pop();</span><br><span class="line">                low = prices[i];</span><br><span class="line">                stack.push(prices[i]);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (stack.peek() &gt; prices[i]) &#123;</span><br><span class="line">                <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; stack.peek() &gt; prices[i] ) &#123;</span><br><span class="line">                    <span class="type">Integer</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">                    <span class="keyword">if</span> (pop - low &gt; max) max = pop - low;</span><br><span class="line">                &#125;</span><br><span class="line">                stack.push(prices[i]);</span><br><span class="line">                <span class="keyword">if</span> (stack.size() == <span class="number">1</span>) low = stack.peek();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (stack.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (pop - low &gt; max) max = pop - low;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>3.ä¸€æ¬¡éå†</strong></p><p>ç¬¬<code>i</code>å¤©çš„æœ€å¤§æ”¶ç›Šæ˜¯<code>maxProfig = price[i] - minPrice</code>ï¼Œå³ç¬¬<code>i</code>å¤©çš„ä»·æ ¼å‡å»ç¬¬<code>i</code>å¤©å‰çš„å†å²æœ€ä½ä»·ã€‚</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">minPrice</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxProfit</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; prices.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (prices[i] &lt; minPrice) &#123;</span><br><span class="line">                minPrice = prices[i];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (prices[i] - minPrice &gt; maxProfit) &#123;</span><br><span class="line">                maxProfit = prices[i] - minPrice;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> maxProfit;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="566-é‡å¡‘çŸ©é˜µ"><a href="#566-é‡å¡‘çŸ©é˜µ" class="headerlink" title="566. é‡å¡‘çŸ©é˜µ"></a><a href="https://leetcode-cn.com/problems/reshape-the-matrix/">566. é‡å¡‘çŸ©é˜µ</a></h2><p>ç»™å‡ºä¸€ä¸ªç”±äºŒç»´æ•°ç»„è¡¨ç¤ºçš„çŸ©é˜µï¼Œä»¥åŠä¸¤ä¸ªæ­£æ•´æ•°<code>r</code>å’Œ<code>c</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºæƒ³è¦çš„é‡æ„çš„çŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°ã€‚</p><p>é‡æ„åçš„çŸ©é˜µéœ€è¦å°†åŸå§‹çŸ©é˜µçš„æ‰€æœ‰å…ƒç´ ä»¥ç›¸åŒçš„<strong>è¡Œéå†é¡ºåº</strong>å¡«å……ã€‚</p><p>å¦‚æœå…·æœ‰ç»™å®šå‚æ•°çš„<code>reshape</code>æ“ä½œæ˜¯å¯è¡Œä¸”åˆç†çš„ï¼Œåˆ™è¾“å‡ºæ–°çš„é‡å¡‘çŸ©é˜µï¼›å¦åˆ™ï¼Œè¾“å‡ºåŸå§‹çŸ©é˜µã€‚</p><p><strong>ç¤ºä¾‹ 1:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥:</span><br><span class="line">nums =</span><br><span class="line">[[1,2],</span><br><span class="line"> [3,4]]</span><br><span class="line">r = 1, c = 4</span><br><span class="line">è¾“å‡º:</span><br><span class="line">[[1,2,3,4]]</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥:</span><br><span class="line">nums =</span><br><span class="line">[[1,2],</span><br><span class="line"> [3,4]]</span><br><span class="line">r = 2, c = 4</span><br><span class="line">è¾“å‡º:</span><br><span class="line">[[1,2],</span><br><span class="line"> [3,4]]</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-6"><a href="#è§£é¢˜æ€è·¯-6" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p><strong>1.è›®åŠ›æ³•</strong></p><p>å°†è¾“å…¥çš„æ•°ç»„<code>nums</code>å…ˆè½¬æ¢ä¸ºä¸€ç»´æ•°ç»„ï¼Œå†å°†ä¸€ç»´æ•°ç»„è½¬æ¢ä¸ºäºŒç»´æ•°ç»„</p><p><strong>å¤æ‚åº¦</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(m * n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(m * n)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[][] matrixReshape(<span class="type">int</span>[][] mat, <span class="type">int</span> r, <span class="type">int</span> c) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> mat.length * mat[<span class="number">0</span>].length;</span><br><span class="line">        <span class="keyword">if</span> (total != r * c) &#123;</span><br><span class="line">            <span class="keyword">return</span> mat;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] source = <span class="keyword">new</span> <span class="title class_">int</span>[total];</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; mat.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; mat[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">             source[k++] = mat[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[][] result = <span class="keyword">new</span> <span class="title class_">int</span>[r][c];</span><br><span class="line">        k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; r; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; c; j++) &#123;</span><br><span class="line">                result[i][j] = source[k++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>2.äºŒç»´æ•°ç»„çš„ä¸€ç»´è¡¨ç¤º</strong></p><p>å¯¹äº $$ mÃ—n $$ çš„æ•°ç»„ï¼Œæ˜ å°„ä¸ºä¸€ç»´æ•°ç»„<code>[0,mn)</code>ï¼š</p><p>$$ (i,j) &#x3D; i Ã— n + j$$ï¼Œ</p><p>è€Œå¯¹äºä¸€ç»´æ•°ç»„ä¸­çš„<code>x</code>ï¼Œæ˜ å°„åˆ°äºŒç»´æ•°ç»„</p><p>$$ \begin{cases} i &#x3D; x <del>&#x2F;</del>n \ j &#x3D; x % n \end{cases}$$ ï¼Œ</p><p>å‰©ä¸‹çš„æ€è·¯å’Œç¬¬ä¸€ç§æ–¹æ³•ä¸€æ ·ï¼Œå…ˆè½¬æ¢ä¸ºä¸€ç»´æ•°ç»„å†å˜ä¸ºäºŒç»´æ•°ç»„</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(m * n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[][] matrixReshape(<span class="type">int</span>[][] mat, <span class="type">int</span> r, <span class="type">int</span> c) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> mat.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> mat[<span class="number">0</span>].length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> m * n;</span><br><span class="line">        <span class="keyword">if</span> (total != r * c) &#123;</span><br><span class="line">            <span class="keyword">return</span> mat;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[][] result = <span class="keyword">new</span> <span class="title class_">int</span>[r][c];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; total; x++) &#123;</span><br><span class="line">            result[x / c][x % c] = mat[x / n][x % n];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="118-æ¨è¾‰ä¸‰è§’"><a href="#118-æ¨è¾‰ä¸‰è§’" class="headerlink" title="118. æ¨è¾‰ä¸‰è§’"></a><a href="https://leetcode-cn.com/problems/pascals-triangle/">118. æ¨è¾‰ä¸‰è§’</a></h2><p>ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° <code>numRows</code>ï¼Œç”Ÿæˆæ¨è¾‰ä¸‰è§’çš„å‰ <code>numRows</code> è¡Œã€‚</p><p><img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20210712132756.gif" alt="PascalTriangleAnimated2"></p><p>åœ¨æ¨è¾‰ä¸‰è§’ä¸­ï¼Œæ¯ä¸ªæ•°æ˜¯å®ƒå·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹çš„æ•°çš„å’Œã€‚</p><h3 id="è§£é¢˜æ€è·¯-7"><a href="#è§£é¢˜æ€è·¯-7" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>æ ¹æ®å›¾ç¤ºå¯çŸ¥ï¼Œä»ç¬¬ä¸‰è¡Œå¼€å§‹ï¼Œé™¤äº†ç¬¬ä¸€åˆ—å’Œæœ€åä¸€åˆ—ï¼Œç¬¬<code>i</code>è¡Œç¬¬<code>j</code>åˆ—åº”è¯¥ç­‰äºç¬¬<code>i-1</code>è¡Œçš„<code>j-1 + j</code></p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(numRows ^ 2)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">generate</span><span class="params">(<span class="type">int</span> numRows)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numRows; i++) &#123;</span><br><span class="line">            List&lt;Integer&gt; innerList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; i + <span class="number">1</span>; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j == <span class="number">0</span>) &#123;</span><br><span class="line">                    innerList.add(<span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j == i) &#123;</span><br><span class="line">                    innerList.add(<span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                innerList.add(list.get(i-<span class="number">1</span>).get(j-<span class="number">1</span>) + list.get(i-<span class="number">1</span>).get(j));</span><br><span class="line">            &#125;</span><br><span class="line">            list.add(innerList);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="387-å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦"><a href="#387-å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦" class="headerlink" title="387. å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦"></a><a href="https://leetcode-cn.com/problems/first-unique-character-in-a-string/">387. å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦</a></h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰¾åˆ°å®ƒçš„ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦ï¼Œå¹¶è¿”å›å®ƒçš„ç´¢å¼•ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› -1ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = &quot;leetcode&quot;</span><br><span class="line">è¿”å› 0</span><br><span class="line"></span><br><span class="line">s = &quot;loveleetcode&quot;</span><br><span class="line">è¿”å› 2</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-8"><a href="#è§£é¢˜æ€è·¯-8" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p><strong>äºŒæ¬¡éå†</strong></p><p>ç¬¬ä¸€æ¬¡éå†è®°å½•<code>s</code>ä¸­çš„å­—ç¬¦å‡ºç°æ¬¡æ•°ï¼Œç¬¬äºŒæ¬¡éå†è¿”å›è¾ƒå°çš„ç´¢å¼•å€¼</p><p><strong>å¤æ‚åº¦</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œn ä¸º<code>s</code>é•¿åº¦ï¼Œéå†ä¸¤æ¬¡</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œéœ€è¦ä¸€ä¸ª 26 ä¸ªå­—æ¯çš„å­—å…¸</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">firstUniqChar</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] table = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            table[s.charAt(i) - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (table[s.charAt(i) - <span class="string">&#x27;a&#x27;</span>] == <span class="number">1</span>) <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="98-éªŒè¯äºŒå‰æœç´¢æ ‘"><a href="#98-éªŒè¯äºŒå‰æœç´¢æ ‘" class="headerlink" title="98. éªŒè¯äºŒå‰æœç´¢æ ‘"></a><a href="https://leetcode-cn.com/problems/validate-binary-search-tree/">98. éªŒè¯äºŒå‰æœç´¢æ ‘</a></h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚</p><p>å‡è®¾ä¸€ä¸ªäºŒå‰æœç´¢æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š</p><ul><li>èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å«<strong>å°äº</strong>å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚</li><li>èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å«<strong>å¤§äº</strong>å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚</li><li>æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚</li></ul><h3 id="è§£é¢˜æ€è·¯-9"><a href="#è§£é¢˜æ€è·¯-9" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p><strong>1.é€’å½’</strong></p><p>è¿™é“é¢˜å®¹æ˜“å‡ºé”™çš„åœ°æ–¹åœ¨äºåªæ ¹æ®å½“å‰èŠ‚ç‚¹åˆ¤æ–­å·¦å„¿å­å’Œå³å„¿å­æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå¿½ç•¥å·¦å­æ ‘ä¸­<strong>æ‰€æœ‰èŠ‚ç‚¹</strong>éƒ½å¿…é¡»å°äºå½“å‰èŠ‚ç‚¹ï¼Œå³å­æ ‘ä¸­<strong>æ‰€æœ‰èŠ‚ç‚¹</strong>éƒ½å¿…é¡»å¤§äºå½“å‰èŠ‚ç‚¹ã€‚æ•…è®¾è®¡ä¸€ä¸ªå‡½æ•°<code>isValid(root, lower, upper)</code>ï¼Œåˆ¤æ–­<code>root</code>çš„èŠ‚ç‚¹å€¼æ˜¯å¦æ»¡è¶³<code>lower &lt; root.val &lt; upper</code>ã€‚</p><p><strong>å¤æ‚åº¦</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">lower</span> <span class="operator">=</span> Long.MIN_VALUE, upper = Long.MAX_VALUE;</span><br><span class="line">        <span class="keyword">return</span> isValid(root, lower, upper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(TreeNode root, <span class="type">long</span> lower, <span class="type">long</span> upper)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (root.val &lt;= lower || root.val &gt;= upper) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//å¯¹äºå·¦å­æ ‘ï¼Œä¸Šç•Œæ˜¯å½“å‰èŠ‚ç‚¹ï¼›å¯¹äºå³å­æ ‘ï¼Œä¸‹ç•Œæ˜¯å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> isValid(root.left, lower, root.val) &amp;&amp; isValid(root.right, root.val, upper);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong>2.ä¸­åºéå†</strong></p><p>äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†æ˜¯ä¸ªæœ‰åºåºåˆ—ï¼Œå¯ä»¥æ ¹æ®ä¸­åºéå†åˆ¤æ–­è¯¥åºåˆ—æ˜¯å¦æœ‰åºä»è€Œåˆ¤æ–­æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘</p><p><strong>å¤æ‚åº¦</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">pre</span> <span class="operator">=</span> Long.MIN_VALUE;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> inorder(root);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">inorder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">l</span> <span class="operator">=</span> inorder(root.left);</span><br><span class="line">        <span class="keyword">if</span> (root.val &lt;= pre) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        pre = root.val;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">r</span> <span class="operator">=</span> inorder(root.right);</span><br><span class="line">        <span class="keyword">return</span> l &amp;&amp; r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¿­ä»£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">long</span> <span class="variable">pre</span> <span class="operator">=</span> Long.MIN_VALUE;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() || root != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">                stack.push(root);</span><br><span class="line">                root = root.left;</span><br><span class="line">            &#125;</span><br><span class="line">            root = stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (root.val &lt;= pre) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            pre = root.val;</span><br><span class="line">            root = root.right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="230-äºŒå‰æœç´¢æ ‘ä¸­ç¬¬-K-å°çš„å…ƒç´ "><a href="#230-äºŒå‰æœç´¢æ ‘ä¸­ç¬¬-K-å°çš„å…ƒç´ " class="headerlink" title="230. äºŒå‰æœç´¢æ ‘ä¸­ç¬¬ K å°çš„å…ƒç´ "></a><a href="https://leetcode-cn.com/problems/kth-smallest-element-in-a-bst/">230. äºŒå‰æœç´¢æ ‘ä¸­ç¬¬ K å°çš„å…ƒç´ </a></h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ <code>root</code> ï¼Œå’Œä¸€ä¸ªæ•´æ•° <code>k</code> ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªç®—æ³•æŸ¥æ‰¾å…¶ä¸­ç¬¬ <code>k</code> ä¸ªæœ€å°å…ƒç´ ï¼ˆä» 1 å¼€å§‹è®¡æ•°ï¼‰ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://assets.leetcode.com/uploads/2021/01/28/kthtree1.jpg" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = [3,1,4,null,2], k = 1</span><br><span class="line">è¾“å‡ºï¼š1</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><p><img src="https://assets.leetcode.com/uploads/2021/01/28/kthtree2.jpg" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = [5,3,6,2,4,null,null,1], k = 3</span><br><span class="line">è¾“å‡ºï¼š3</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-10"><a href="#è§£é¢˜æ€è·¯-10" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>**äºŒå‰æœç´¢æ ‘(BST)**çš„ç‰¹ç‚¹ï¼š</p><ul><li>æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å„¿å­æ¯”çˆ¶èŠ‚ç‚¹å°ï¼Œå³å„¿å­æ¯”çˆ¶èŠ‚ç‚¹å¤§</li><li>æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘</li><li>äºŒå‰æœç´¢æ ‘ä¸­åºéå†çš„åºåˆ—æ˜¯ä¸€ä¸ªå‡åºåºåˆ—</li></ul><p>ä¸ºäº†æ‰¾åˆ°æ ‘ä¸­ç¬¬<code>K</code>å°çš„å…ƒç´ ï¼Œå¯ä»¥æŒ‰ç…§ä¸­åºéå†å¾—åˆ°å‡åºåºåˆ—ï¼Œç¬¬<code>k-1</code>ä¸ªå…ƒç´ å°±æ˜¯ç¬¬<code>k</code>å°çš„èŠ‚ç‚¹</p><p>é‡‡ç”¨<strong>è¿­ä»£</strong>å’Œ<strong>é€’å½’</strong>ä¸¤ç§æ–¹æ³•å®ç°</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</li></ul><p><strong>å‚è€ƒä»£ç ï¼š</strong></p><p><strong>è¿­ä»£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">kthSmallest</span><span class="params">(TreeNode root, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    LinkedList&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸­åºéå†æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (root != <span class="literal">null</span>) &#123;</span><br><span class="line">                stack.push(root);</span><br><span class="line">                root = root.left;</span><br><span class="line">            &#125;</span><br><span class="line">            root = stack.pop();</span><br><span class="line">            <span class="comment">//å¼¹å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œk-1ï¼Œå½“kç­‰äº0æ—¶èŠ‚ç‚¹å€¼å°±æ˜¯ç¬¬kå°çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (--k == <span class="number">0</span>) <span class="keyword">return</span> root.val;</span><br><span class="line">            root = root.right;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é€’å½’</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">rank</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">kthSmallest</span><span class="params">(TreeNode root, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        traverse(root, k);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(TreeNode root, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> ;</span><br><span class="line">        traverse(root.left, k);</span><br><span class="line">        rank++;</span><br><span class="line">        <span class="keyword">if</span> (rank == k) &#123;</span><br><span class="line">            res = root.val;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        traverse(root.right, k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="538-æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘"><a href="#538-æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘" class="headerlink" title="538. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘"></a><a href="https://leetcode-cn.com/problems/convert-bst-to-greater-tree/">538. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘</a></h2><p>ç»™å‡ºäºŒå‰ <strong>æœç´¢</strong> æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¯¥æ ‘çš„èŠ‚ç‚¹å€¼å„ä¸ç›¸åŒï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºç´¯åŠ æ ‘ï¼ˆGreater Sum Treeï¼‰ï¼Œä½¿æ¯ä¸ªèŠ‚ç‚¹ <code>node</code> çš„æ–°å€¼ç­‰äºåŸæ ‘ä¸­å¤§äºæˆ–ç­‰äº <code>node.val</code> çš„å€¼ä¹‹å’Œã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/05/03/tree.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š[4,1,6,0,2,5,7,null,null,null,3,null,null,null,8]</span><br><span class="line">è¾“å‡ºï¼š[30,36,21,36,35,26,15,null,null,null,33,null,null,null,8]</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-11"><a href="#è§£é¢˜æ€è·¯-11" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>åå‘éå†æ ‘ï¼Œå¾—åˆ°é™åºçš„åºåˆ—ï¼Œä½¿ç”¨å…¨å±€å˜é‡<code>sum</code>è®°å½•èŠ‚ç‚¹å€¼</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</li></ul><p><strong>å‚è€ƒä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">convertBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        traverse(root);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> ;</span><br><span class="line">        <span class="comment">//åå‘éå†</span></span><br><span class="line">        traverse(root.right);</span><br><span class="line">        sum += root.val;</span><br><span class="line">        root.val = sum;</span><br><span class="line">        traverse(root.left);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="å‰‘æŒ‡-Offer-II-024-åè½¬é“¾è¡¨"><a href="#å‰‘æŒ‡-Offer-II-024-åè½¬é“¾è¡¨" class="headerlink" title="å‰‘æŒ‡ Offer II 024. åè½¬é“¾è¡¨"></a><a href="https://leetcode-cn.com/problems/UHnkqh/">å‰‘æŒ‡ Offer II 024. åè½¬é“¾è¡¨</a></h2><p>ç»™å®šå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ <code>head</code> ï¼Œè¯·åè½¬é“¾è¡¨ï¼Œå¹¶è¿”å›åè½¬åçš„é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20211102143406.jpeg" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1,2,3,4,5]</span><br><span class="line">è¾“å‡ºï¼š[5,4,3,2,1]</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-12"><a href="#è§£é¢˜æ€è·¯-12" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p><strong>1.è¿­ä»£</strong></p><p>ä»é“¾è¡¨å¤´éƒ¨å¼€å§‹ä¸€ä¸ªä¸€ä¸ªæ”¹å˜<code>next</code>æŒ‡é’ˆæŒ‡å‘ã€‚æ“ä½œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>ä¿å­˜å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</li><li>æ”¹å˜å½“å‰èŠ‚ç‚¹<code>next</code>æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹</li><li>å‘åç§»åŠ¨å½“å‰èŠ‚ç‚¹</li><li>å‘åç§»åŠ¨å‰ä¸€ä¸ªèŠ‚ç‚¹</li></ol><p><strong>å‚è€ƒä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) <span class="keyword">return</span> head;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">pre</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">cur</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">nxt</span> <span class="operator">=</span> cur;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (cur != <span class="literal">null</span>) &#123;</span><br><span class="line">nxt = cur.next;</span><br><span class="line">cur.next = pre;</span><br><span class="line">pre = cur;</span><br><span class="line">cur = nxt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pre;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2.é€’å½’</strong></p><p><strong>å‚è€ƒä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverseList</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) <span class="keyword">return</span> head;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">last</span> <span class="operator">=</span> reverseList(head.next);</span><br><span class="line">    head.next.next = head;</span><br><span class="line">    head.next = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> last;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="92-åè½¬é“¾è¡¨-II"><a href="#92-åè½¬é“¾è¡¨-II" class="headerlink" title="92. åè½¬é“¾è¡¨ II"></a><a href="https://leetcode-cn.com/problems/reverse-linked-list-ii/">92. åè½¬é“¾è¡¨ II</a></h2><p>ç»™ä½ å•é“¾è¡¨çš„å¤´æŒ‡é’ˆ <code>head</code> å’Œä¸¤ä¸ªæ•´æ•° <code>left</code> å’Œ <code>right</code> ï¼Œå…¶ä¸­ <code>left &lt;= right</code> ã€‚è¯·ä½ åè½¬ä»ä½ç½® <code>left</code> åˆ°ä½ç½® <code>right</code> çš„é“¾è¡¨èŠ‚ç‚¹ï¼Œè¿”å› <strong>åè½¬åçš„é“¾è¡¨</strong> ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20211108155058.jpeg" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1,2,3,4,5], left = 2, right = 4</span><br><span class="line">è¾“å‡ºï¼š[1,4,3,2,5]</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-13"><a href="#è§£é¢˜æ€è·¯-13" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><ul><li>å…ˆæ‰¾åˆ°åè½¬å¼€å§‹èŠ‚ç‚¹<code>leftNode</code>ï¼Œä¿å­˜åè½¬å¼€å§‹èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹<code>prev</code>ã€‚</li><li>åè½¬<code>[leftNodeï¼ŒrightNode]</code>ï¼Œä¿å­˜<code>rightNode</code>çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹<code>next</code>ã€‚</li><li><code>prev.next</code>æŒ‡å‘<code>rightNode</code>ï¼Œ<code>leftNode.next</code>æŒ‡å‘<code>next</code>ã€‚</li><li>è¿”å›å¤´èŠ‚ç‚¹</li></ul><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">reverseBetween</span><span class="params">(ListNode head, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="comment">//å¤´èŠ‚ç‚¹å¯èƒ½ä¼šå˜åŒ–ï¼Œå®šä¹‰ä¼ªå¤´èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>();</span><br><span class="line">        dummy.next = head;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰¾åˆ°leftNode</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">leftNode</span> <span class="operator">=</span> dummy.next;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">prev</span> <span class="operator">=</span> dummy;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; left; i++) &#123;</span><br><span class="line">            prev = leftNode;</span><br><span class="line">            leftNode = leftNode.next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åè½¬é“¾è¡¨</span></span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">pre</span> <span class="operator">=</span> prev, cur = leftNode, nxt = cur;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right &amp;&amp; cur != <span class="literal">null</span>) &#123;</span><br><span class="line">            nxt = cur.next;</span><br><span class="line">            cur.next = pre;</span><br><span class="line">            pre = cur;</span><br><span class="line">            cur = nxt;</span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">next</span> <span class="operator">=</span> cur;</span><br><span class="line"></span><br><span class="line">        prev.next = pre;</span><br><span class="line">        leftNode.next = next;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="å‰‘æŒ‡-Offer-II-027-å›æ–‡é“¾è¡¨"><a href="#å‰‘æŒ‡-Offer-II-027-å›æ–‡é“¾è¡¨" class="headerlink" title="å‰‘æŒ‡ Offer II 027. å›æ–‡é“¾è¡¨"></a><a href="https://leetcode-cn.com/problems/aMhZSa/">å‰‘æŒ‡ Offer II 027. å›æ–‡é“¾è¡¨</a></h2><p>ç»™å®šä¸€ä¸ªé“¾è¡¨çš„ <strong>å¤´èŠ‚ç‚¹</strong> <code>head</code> <strong>ï¼Œ</strong>è¯·åˆ¤æ–­å…¶æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨ã€‚</p><p>å¦‚æœä¸€ä¸ªé“¾è¡¨æ˜¯å›æ–‡ï¼Œé‚£ä¹ˆé“¾è¡¨èŠ‚ç‚¹åºåˆ—ä»å‰å¾€åçœ‹å’Œä»åå¾€å‰çœ‹æ˜¯ç›¸åŒçš„ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20211102135326.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: head = [1,2,3,3,2,1]</span><br><span class="line">è¾“å‡º: true</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-14"><a href="#è§£é¢˜æ€è·¯-14" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p><strong>1.å¿«æ…¢æŒ‡é’ˆ</strong></p><p>å…ˆæ‰¾åˆ°é“¾è¡¨ä¸­é—´èŠ‚ç‚¹ï¼Œå¯¹é“¾è¡¨ååŠéƒ¨åˆ†è¿›è¡Œåè½¬ï¼Œå†ä¸€ä¸€æ¯”è¾ƒã€‚</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)æˆ–è€… O(1)ï¼Œå–å†³äºä½¿ç”¨é€’å½’è¿˜æ˜¯è¿­ä»£</li></ul><p><strong>å‚è€ƒä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isPalindrome</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (head.next == <span class="literal">null</span> || head == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">fast</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (fast.next != <span class="literal">null</span> &amp;&amp; fast.next.next != <span class="literal">null</span>) &#123;</span><br><span class="line">fast = fast.next.next;</span><br><span class="line">slow = slow.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">mid</span> <span class="operator">=</span> reverse(slow.next);</span><br><span class="line"><span class="keyword">while</span> (mid != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (head.val != mid.val) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">mid = mid.next;</span><br><span class="line">head = head.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€’å½’åè½¬é“¾è¡¨</span></span><br><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">reverse</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (head.next == <span class="literal">null</span>) <span class="keyword">return</span> head;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">ret</span> <span class="operator">=</span> reverse(head.next);</span><br><span class="line">head.next.next = head;</span><br><span class="line">head.next = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="å‰‘æŒ‡-Offer-II-023-ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªé‡åˆèŠ‚ç‚¹"><a href="#å‰‘æŒ‡-Offer-II-023-ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªé‡åˆèŠ‚ç‚¹" class="headerlink" title="å‰‘æŒ‡ Offer II 023. ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªé‡åˆèŠ‚ç‚¹"></a><a href="https://leetcode-cn.com/problems/3u1WK4/">å‰‘æŒ‡ Offer II 023. ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªé‡åˆèŠ‚ç‚¹</a></h2><p>ç»™å®šä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ headA å’Œ headB ï¼Œè¯·æ‰¾å‡ºå¹¶è¿”å›ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚å¦‚æœä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰äº¤ç‚¹ï¼Œè¿”å› null ã€‚</p><p>å›¾ç¤ºä¸¤ä¸ªé“¾è¡¨åœ¨èŠ‚ç‚¹ c1 å¼€å§‹ç›¸äº¤ï¼š</p><p><img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20211102150638.png" alt="img"></p><h3 id="è§£é¢˜æ€è·¯-15"><a href="#è§£é¢˜æ€è·¯-15" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p><strong>1.å“ˆå¸Œé›†åˆ</strong></p><p>å°†å•é“¾è¡¨ A ä¸­çš„èŠ‚ç‚¹æ”¾å…¥é›†åˆä¸­ï¼Œéå†å•é“¾è¡¨ B åˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨ç›¸äº¤èŠ‚ç‚¹</p><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(m+n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(m)</li></ul><p><strong>å‚è€ƒä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">getIntersectionNode</span><span class="params">(ListNode headA, ListNode headB)</span> &#123;</span><br><span class="line">Set&lt;ListNode&gt; set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">while</span> (headA != <span class="literal">null</span>) &#123;</span><br><span class="line">set.add(headA);</span><br><span class="line">headA = headA.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (headB != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (set.contains(headB)) <span class="keyword">return</span> headB;</span><br><span class="line">headB = headB.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2.åŒæŒ‡é’ˆ</strong></p><p>å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ<code>pA</code>å’Œ<code>pB</code>åˆ†åˆ«æŒ‡å‘å•é“¾è¡¨ A å’Œ B çš„å¤´éƒ¨ã€‚åˆ™ä¼šå‡ºç°ä¸‰ç§æƒ…å†µï¼š</p><ol><li><p>ä¸¤ä¸ªé“¾è¡¨æœ‰äº¤ç‚¹ï¼Œä¸” A å’Œ B çš„å¤´èŠ‚ç‚¹åˆ°äº¤ç‚¹æ­¥æ•°ç›¸åŒ</p><p><img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20211102151431.png" alt="image.png"></p><p>åˆ™æ˜“å¾—<code>pA</code>å’Œ<code>pB</code>ç¬¬ä¸€æ¬¡éå†åˆ°è¾¾äº¤ç‚¹</p></li><li><p>ä¸¤ä¸ªé“¾è¡¨æœ‰äº¤ç‚¹ï¼Œä½† A å’Œ B çš„å¤´èŠ‚ç‚¹åˆ°äº¤ç‚¹æ­¥æ•°ä¸åŒ</p><p><img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20211102151454.png" alt="image.png"></p><p>å½“<code>pA</code>éå†å®Œ A é“¾è¡¨åç»§ç»­éå† Bï¼Œç»è¿‡<strong>a+c+b</strong>æ­¥åˆ°è¾¾äº¤ç‚¹ï¼›åŒæ ·çš„<code>pB</code>ç»è¿‡<code>b+c+a</code>æ­¥åˆ°è¾¾äº¤ç‚¹ã€‚</p></li><li><p>ä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰äº¤ç‚¹ã€‚</p><p><img src="https://gitee.com/xunle1/drawing-bed/raw/master/typora%5C/20211102152034.png" alt="image.png"></p><p><code>pA</code>å’Œ<code>pB</code>æœ€ç»ˆéƒ½æŒ‡å‘ nullï¼Œä½†ç»è¿‡çš„æ­¥æ•°ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚</p></li></ol><p><strong>å¤æ‚åº¦ï¼š</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(m+n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li></ul><p><strong>å‚è€ƒä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">getIntersectionNode</span><span class="params">(ListNode headA, ListNode headB)</span> &#123;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">pA</span> <span class="operator">=</span> headA;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">pB</span> <span class="operator">=</span> headB;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pA != pB) &#123;</span><br><span class="line">pA = pA == <span class="literal">null</span> ? headB : pA.next;</span><br><span class="line">pB = pB == <span class="literal">null</span> ? headA : pB.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> pA;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="å‰‘æŒ‡-Offer-25-åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨"><a href="#å‰‘æŒ‡-Offer-25-åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨" class="headerlink" title="å‰‘æŒ‡ Offer 25. åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨"></a><a href="https://leetcode-cn.com/problems/he-bing-liang-ge-pai-xu-de-lian-biao-lcof/">å‰‘æŒ‡ Offer 25. åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨</a></h2><p>è¾“å…¥ä¸¤ä¸ªé€’å¢æ’åºçš„é“¾è¡¨ï¼Œåˆå¹¶è¿™ä¸¤ä¸ªé“¾è¡¨å¹¶ä½¿æ–°é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ä»ç„¶æ˜¯é€’å¢æ’åºçš„ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š1-&gt;2-&gt;4, 1-&gt;3-&gt;4</span><br><span class="line">è¾“å‡ºï¼š1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-16"><a href="#è§£é¢˜æ€è·¯-16" class="headerlink" title="è§£é¢˜æ€è·¯"></a><strong>è§£é¢˜æ€è·¯</strong></h3><p>ä½¿ç”¨ä¼ªå¤´èŠ‚ç‚¹è¿æ¥ä¸¤ä¸ªé“¾è¡¨</p><p><strong>å‚è€ƒä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">mergeTwoLists</span><span class="params">(ListNode l1, ListNode l2)</span> &#123;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>();</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="keyword">while</span> (l1 != <span class="literal">null</span> &amp;&amp; l2 != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (l1.val &gt; l2.val) &#123;</span><br><span class="line">dummy.next = l2;</span><br><span class="line">l2 = l2.next;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">dummy.next = l1;</span><br><span class="line">l1 = l1.next;</span><br><span class="line">&#125;</span><br><span class="line">dummy = dummy.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (l1 == <span class="literal">null</span>) &#123;</span><br><span class="line">dummy.next = l2;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">dummy.next = l1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="1171-ä»é“¾è¡¨ä¸­åˆ å»æ€»å’Œå€¼ä¸ºé›¶çš„è¿ç»­èŠ‚ç‚¹"><a href="#1171-ä»é“¾è¡¨ä¸­åˆ å»æ€»å’Œå€¼ä¸ºé›¶çš„è¿ç»­èŠ‚ç‚¹" class="headerlink" title="1171. ä»é“¾è¡¨ä¸­åˆ å»æ€»å’Œå€¼ä¸ºé›¶çš„è¿ç»­èŠ‚ç‚¹"></a><a href="https://leetcode-cn.com/problems/remove-zero-sum-consecutive-nodes-from-linked-list/">1171. ä»é“¾è¡¨ä¸­åˆ å»æ€»å’Œå€¼ä¸ºé›¶çš„è¿ç»­èŠ‚ç‚¹</a></h2><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ <code>head</code>ï¼Œè¯·ä½ ç¼–å†™ä»£ç ï¼Œåå¤åˆ å»é“¾è¡¨ä¸­ç”± <strong>æ€»å’Œ</strong> å€¼ä¸º <code>0</code> çš„è¿ç»­èŠ‚ç‚¹ç»„æˆçš„åºåˆ—ï¼Œç›´åˆ°ä¸å­˜åœ¨è¿™æ ·çš„åºåˆ—ä¸ºæ­¢ã€‚</p><p>åˆ é™¤å®Œæ¯•åï¼Œè¯·ä½ è¿”å›æœ€ç»ˆç»“æœé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šhead = [1,2,-3,3,1]</span><br><span class="line">è¾“å‡ºï¼š[3,1]</span><br><span class="line">æç¤ºï¼šç­”æ¡ˆ [1,2,1] ä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-17"><a href="#è§£é¢˜æ€è·¯-17" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ<code>pre</code>å’Œ<code>p</code>ï¼Œ<code>pre</code>ç”¨äºä¿å­˜èŠ‚ç‚¹æ–¹ä¾¿åˆ é™¤åŒºé—´ï¼Œ<code>p</code>éå†é“¾è¡¨æ‰¾åˆ°å‰ç¼€å’Œä¸º 0 çš„èŠ‚ç‚¹å°†å…¶åˆ å»ã€‚</p><p><code>pre</code>ä¸€å¼€å§‹æŒ‡å‘ä¼ªå¤´èŠ‚ç‚¹ï¼Œåªæœ‰å½“<code>p</code>èµ°åˆ°ç»“å°¾æ—¶æ‰ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œæ¯å½“<code>p</code>èµ°åˆ°å‰ç¼€å’Œ<code>sum=0</code>æ—¶ï¼Œæ›´æ–°<code>pre</code>çš„æŒ‡å‘<code>pre.next = p.next</code></p><p><strong>å‚è€ƒä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Solution</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode <span class="title function_">removeZeroSumSublists</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">dummy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">        dummy.next = head;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">pre</span> <span class="operator">=</span> dummy;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (pre != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//æŒ‡é’ˆpæŒ‡å‘preåé¢çš„èŠ‚ç‚¹ï¼Œè®¡ç®—å‰ç¼€å’Œ</span></span><br><span class="line">            <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> pre.next;</span><br><span class="line">            <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">                sum += p.val;</span><br><span class="line">                <span class="comment">//å¦‚æœæ­¤æ—¶å‰ç¼€å’Œä¸º0ï¼Œåˆ å»(pre,p]åŒºé—´çš„èŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span> (sum == <span class="number">0</span>) &#123;</span><br><span class="line">                    pre.next = p.next;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    p = p.next;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å½“pèµ°åˆ°ç»“å°¾æ—¶ï¼Œpreç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦åˆ™ä¸ç§»åŠ¨ã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (p == <span class="literal">null</span>) pre = pre.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="232-ç”¨æ ˆå®ç°é˜Ÿåˆ—"><a href="#232-ç”¨æ ˆå®ç°é˜Ÿåˆ—" class="headerlink" title="232. ç”¨æ ˆå®ç°é˜Ÿåˆ—"></a><a href="https://leetcode-cn.com/problems/implement-queue-using-stacks/">232. ç”¨æ ˆå®ç°é˜Ÿåˆ—</a></h2><p>è¯·ä½ ä»…ä½¿ç”¨ä¸¤ä¸ªæ ˆå®ç°å…ˆå…¥å…ˆå‡ºé˜Ÿåˆ—ã€‚é˜Ÿåˆ—åº”å½“æ”¯æŒä¸€èˆ¬é˜Ÿåˆ—æ”¯æŒçš„æ‰€æœ‰æ“ä½œï¼ˆ<code>push</code>ã€<code>pop</code>ã€<code>peek</code>ã€<code>empty</code>ï¼‰ï¼š</p><h3 id="è§£é¢˜æ€è·¯-18"><a href="#è§£é¢˜æ€è·¯-18" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>è§£é¢˜å…³é”®åœ¨äºå¦‚ä½•ä¿è¯å…¥é˜Ÿçš„å…ƒç´ æ’å…¥åˆ°<strong>è®¾è®¡çš„ç»“æ„çš„å°¾éƒ¨</strong>å³<strong>æ ˆçš„åº•éƒ¨</strong>ï¼Œå‡ºé˜Ÿçš„å…ƒç´ åœ¨<strong>æ ˆçš„é¡¶éƒ¨</strong>ã€‚</p><p>å¯ä»¥å°†ä¸€ä¸ªæ ˆè®¾ç½®ä¸º<strong>å…¥é˜Ÿæ ˆ</strong>ï¼Œå…¥é˜Ÿå…ƒç´ éƒ½è¿›å…¥è¿™ä¸ªæ ˆï¼›å¦ä¸€ä¸ªæ ˆä¸º<strong>å‡ºé˜Ÿæ ˆ</strong>ã€‚</p><ul><li><strong>å…¥é˜Ÿï¼šå…¥é˜Ÿæ ˆ</strong>ç›´æ¥<code>push</code></li><li><strong>å‡ºé˜Ÿï¼š</strong>å½“<strong>å‡ºé˜Ÿæ ˆ</strong>ä¸ºç©ºæ—¶ï¼Œéœ€è¦å°†<strong>å…¥é˜Ÿæ ˆ</strong>ä¸­çš„å…ƒç´ ä¸€ä¸ªä¸€ä¸ª<code>pop</code>åˆ°<strong>å‡ºé˜Ÿæ ˆ</strong>ä¸­ï¼Œè¿™æ ·å¯ä»¥ä¿è¯<strong>å…¥é˜Ÿæ ˆ</strong>ä¸­æœ€åè¿›å…¥çš„å…ƒç´ è¢«<code>push</code>åˆ°<strong>å‡ºé˜Ÿæ ˆçš„åº•éƒ¨</strong>ï¼Œæœ€å…ˆè¿›å…¥çš„å…ƒç´ è¿›å…¥<strong>å‡ºé˜Ÿæ ˆ</strong>çš„å¤´éƒ¨ï¼›å½“<strong>å‡ºé˜Ÿæ ˆ</strong>ä¸ä¸ºç©ºæ—¶ï¼Œå‡ºé˜Ÿæ ˆç›´æ¥<code>pop</code>ã€‚</li></ul><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyQueue</span> &#123;</span><br><span class="line">Stack&lt;Integer&gt; inStack;</span><br><span class="line">    Stack&lt;Integer&gt; outStack;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyQueue</span><span class="params">()</span> &#123;</span><br><span class="line">inStack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        outStack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">inStack.push(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (outStack.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!inStack.isEmpty()) &#123;</span><br><span class="line">                outStack.push(inStack.pop());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> outStack.pop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (outStack.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!inStack.isEmpty()) &#123;</span><br><span class="line">                outStack.push(inStack.pop());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> outStack.peek();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> inStack.isEmpty() &amp;&amp; outStack.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot é›†æˆ Swagger</title>
      <link href="/2021/07/06/SpringBoot%E9%9B%86%E6%88%90Swagger/"/>
      <url>/2021/07/06/SpringBoot%E9%9B%86%E6%88%90Swagger/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBooté›†æˆSwagger"><a href="#SpringBooté›†æˆSwagger" class="headerlink" title="SpringBooté›†æˆSwagger"></a>SpringBooté›†æˆSwagger</h1><p>è¿™æ˜¯æˆ‘å‚ä¸æ–°æ‰‹å…¥é—¨çš„ç¬¬ä¸€ç¯‡æ–‡ç« </p><hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨Webåç«¯äººå‘˜å¼€å‘æ¥å£æ—¶ï¼Œéœ€è¦å¯¹æ¥å£è¿›è¡Œæµ‹è¯•ï¼Œè¿™æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ°ä»Šå¤©è¦æåˆ°çš„å·¥å…·Swaggerã€‚</p><h2 id="Swaggeræ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Swaggeræ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Swaggeræ˜¯ä»€ä¹ˆï¼Ÿ"></a>Swaggeræ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul><li>Swaggerå®˜ç½‘ç½‘å€ï¼š<a href="https://swagger.io/">API Documentation &amp; Design Tools for Teams | Swagger</a></li></ul><p>è¿›å…¥å®˜ç½‘æˆ‘ä»¬å°±å¯ä»¥çœ‹è§å®˜æ–¹å¯¹Swaggerçš„ç®€ä»‹</p><blockquote><p>  Simplify API development for users, teams, and enterprises with the Swagger open source and professional toolset. Find out how Swagger can help you design and document your APIs at scale.</p></blockquote><p>ç®€è¨€ä¹‹å°±æ˜¯å¸®åŠ©ç”¨æˆ·ç®€åŒ–APIå¼€å‘çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å°†APIå¯è§†åŒ–ä»è€Œæ–¹ä¾¿å¼€å‘äººå‘˜è¿›è¡Œè®¾è®¡äºè°ƒè¯•ã€‚</p><p>ç”±äºç¬”è€…ä¸»è¦ä½¿ç”¨Javaï¼Œæ•…ä»Šå¤©æƒ³è¦ä»‹ç»çš„æ˜¯åœ¨SpringBootä¸­å¦‚ä½•é›†æˆSwaggerã€‚</p><h2 id="æ–°å»ºSpringBooté¡¹ç›®å¹¶å¼•å…¥ä¾èµ–"><a href="#æ–°å»ºSpringBooté¡¹ç›®å¹¶å¼•å…¥ä¾èµ–" class="headerlink" title="æ–°å»ºSpringBooté¡¹ç›®å¹¶å¼•å…¥ä¾èµ–"></a>æ–°å»ºSpringBooté¡¹ç›®å¹¶å¼•å…¥ä¾èµ–</h2><ul><li><p>å°†Swaggerçš„ä¾èµ–å¼•å…¥SpringBooté¡¹ç›®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-boot-starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é¡¹ç›®ç»“æ„å¦‚å›¾</p></li><li><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206154111.png" alt="image-20210706155932304"></p></li></ul><h2 id="æ–°å»ºSwaggeré…ç½®ç±»"><a href="#æ–°å»ºSwaggeré…ç½®ç±»" class="headerlink" title="æ–°å»ºSwaggeré…ç½®ç±»"></a>æ–°å»ºSwaggeré…ç½®ç±»</h2><p>Swaggeré…ç½®ç±»ä½ç½®å¦‚ä¸Šå›¾</p><p>Swaggeré…ç½®ç±»ç”¨äºé…ç½®Swaggeræ‰«æçš„æ¥å£ã€ä½œè€…çš„ä¿¡æ¯</p><p>é…ç½®ç±»ä»£ç å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xunle</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®Swaggerçš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> ApiInfo <span class="title function_">getApiInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//ä½œè€…ä¿¡æ¯</span></span><br><span class="line">        <span class="type">Contact</span> <span class="variable">contact</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contact</span>(<span class="string">&quot;xunle&quot;</span>,<span class="string">&quot;https://xunle1.github.io/&quot;</span>,<span class="string">&quot;1601315809@qq.com&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfoBuilder</span>()</span><br><span class="line">                <span class="comment">//æ ‡é¢˜</span></span><br><span class="line">                .title(<span class="string">&quot;Swagger Test&quot;</span>)</span><br><span class="line">                <span class="comment">//æè¿°ä¿¡æ¯</span></span><br><span class="line">                .description(<span class="string">&quot;SpringBooté›†æˆSwagger&quot;</span>)</span><br><span class="line">                <span class="comment">//ç‰ˆæœ¬å·</span></span><br><span class="line">                .version(<span class="string">&quot;v1.0&quot;</span>)</span><br><span class="line">                <span class="comment">//ä½œè€…ä¿¡æ¯</span></span><br><span class="line">                .contact(contact)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨äºé…ç½®Swaggeræ‰«ææ¥å£</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(getApiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                <span class="comment">//apisç”¨äºé…ç½®æ‰«æå“ªäº›æ¥å£</span></span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.example.swagger.controller&quot;</span>))</span><br><span class="line">                <span class="comment">//pathsç”¨äºé…ç½®è·¯å¾„é€‰æ‹©</span></span><br><span class="line">                .paths(PathSelectors.ant(<span class="string">&quot;/hello/**&quot;</span>))</span><br><span class="line">                .build()</span><br><span class="line">                <span class="comment">//æ˜¯å¦å¼€å¯Swagger</span></span><br><span class="line">                .enable(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–°å»ºController"><a href="#æ–°å»ºController" class="headerlink" title="æ–°å»ºController"></a>æ–°å»ºController</h2><p>Controllerä½ç½®å¦‚ä¸Šå›¾</p><p>Controllerç±»ä¸­å®šä¹‰æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xunle</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//Api ç±»ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@Api(tags = &quot;Swaggeræµ‹è¯•Controller&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerController</span> &#123;</span><br><span class="line">    <span class="comment">//ApiOperation æ–¹æ³•æè¿°</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;Swaggeræµ‹è¯•Getæ–¹æ³•&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello/test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Swaggeræµ‹è¯•&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiOperation(&quot;Swaggeræ˜¯å¦æ‰«æè·¯å¾„&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hi/test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testPathSelector</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;selected!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Swagger-uiåŸºæœ¬ä¿¡æ¯"><a href="#Swagger-uiåŸºæœ¬ä¿¡æ¯" class="headerlink" title="Swagger-uiåŸºæœ¬ä¿¡æ¯"></a>Swagger-uiåŸºæœ¬ä¿¡æ¯</h2><p>ä¸€èˆ¬æƒ…å†µä¸‹è®¿é—® &#x3D;&#x3D;å·¥ç¨‹å&#x2F;swagger-ui.html&#x3D;&#x3D;</p><p>ç¬”è€…æœ¬æœºè®¿é—® <a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a></p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206154131.png" alt="image-20210706162908770"></p><p>å‰ä¸¤æ­¥çš„é…ç½®éƒ½åœ¨Swagger-uiä¸­æ˜¾ç¤ºå‡ºæ¥äº†ï¼Œå¯ä»¥å¯¹ç…§ç€çœ‹é…ç½®å¯¹åº”çš„æ˜¾ç¤º</p><p>æ³¨æ„Controllerä¸­é…ç½®çš„Pathï¼Œç¬¬äºŒä¸ªGetæ–¹æ³•è·¯å¾„&#x3D;&#x3D;&#x2F;hi&#x2F;test&#x3D;&#x3D;ä¸åŒ¹é…Swaggeré…ç½®ç±»ä¸­çš„è·¯å¾„&#x3D;&#x3D;&#x2F;hello&#x2F;**&#x3D;&#x3D;ï¼Œæ•…ä¸ä¼šæ˜¾ç¤ºåœ¨Swagger-uiä¸­</p><h2 id="æ¥å£æµ‹è¯•"><a href="#æ¥å£æµ‹è¯•" class="headerlink" title="æ¥å£æµ‹è¯•"></a>æ¥å£æµ‹è¯•</h2><p>åœ¨ç‚¹å‡»å¯¹åº”APIå</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206154136.png" alt="image-20210706163636565"></p><blockquote><ul><li>Parametersä¸ºå‚æ•°åˆ—è¡¨</li><li>Responseä¸ºè¿”å›ä¿¡æ¯<ul><li>Codeï¼šçŠ¶æ€ç </li><li>Descriptionï¼šè®¿é—®æˆåŠŸæ—¶Example Valueä¸­æ˜¾ç¤ºæ•°æ®ç±»å‹ï¼ŒModelè¡¨ç¤ºè¿”å›çš„æ˜¯å®ä½“ç±»</li></ul></li></ul></blockquote><p>ç‚¹å‡»Try it outåæ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206154139.png" alt="image-20210706164104575"></p><p>ç‚¹å‡»Executeè¿›è¡Œæ¥å£æµ‹è¯•åæ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="https://xunle-picture-bed.oss-cn-hangzhou.aliyuncs.com/20221206154143.png" alt="image-20210706164349701"></p><blockquote><ul><li>Response bodyï¼šè¿”å›ä¿¡æ¯</li><li>Response headersï¼šå“åº”å¤´</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Swagger </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>about</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<h1 id="è€ä¹"><a href="#è€ä¹" class="headerlink" title="è€ä¹"></a>è€ä¹</h1><p>è¿™ä¸ªåå­—çš„ç”±æ¥æ˜¯ç©ã€Šå¤å‰‘å¥‡è°­ç½‘ç»œç‰ˆã€‹çš„æ—¶å€™éšæœºçš„ï¼Œç›´æ¥ä¸€ä¸ª<del>å·</del>ç”¨ã€‚</p><ul><li>é‡é‚®è®¡ç®—æœºä¸“ä¸šæœ¬ç§‘æ¯•ä¸šç”Ÿ</li><li>ç†Ÿæ‚‰ Web åå°å¼€å‘</li><li>å¸¸ç”¨è¯­è¨€ï¼šJavaã€C++ã€Go</li></ul><h1 id="å¸¸ç”¨è½¯ä»¶"><a href="#å¸¸ç”¨è½¯ä»¶" class="headerlink" title="å¸¸ç”¨è½¯ä»¶"></a>å¸¸ç”¨è½¯ä»¶</h1><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><ul><li><a href="https://www.u.tools/">uTools</a>: å¿«é€Ÿå¯åŠ¨</li><li><a href="https://learn.microsoft.com/en-us/sysinternals/downloads/tcpview">TcpView</a>: æŸ¥çœ‹è¿æ¥</li><li><a href="https://www.jam-software.com/treesize">TreeSize</a>: æŸ¥çœ‹ç£ç›˜æ–‡ä»¶</li><li>Clash for Windows</li><li><a href="https://www.internetdownloadmanager.com/">IDM</a>: ä¸‹è½½</li><li><a href="https://github.com/TranslucentTB/TranslucentTB">TranslucentTB</a>: ä»»åŠ¡æ ç¾åŒ–</li><li><a href="https://hovancik.net/stretchly/">Stretchly</a>: ä¹…åæé†’</li></ul><h2 id="ç¬”è®°å·¥å…·"><a href="#ç¬”è®°å·¥å…·" class="headerlink" title="ç¬”è®°å·¥å…·"></a>ç¬”è®°å·¥å…·</h2><ul><li><a href="https://typora.io/">typora</a></li><li><a href="https://obsidian.md/">obsidian</a></li></ul><h2 id="Obsidian-æ’ä»¶"><a href="#Obsidian-æ’ä»¶" class="headerlink" title="Obsidian æ’ä»¶"></a>Obsidian æ’ä»¶</h2><ul><li><a href="https://github.com/denolehov/obsidian-git">Git</a></li><li><a href="https://github.com/kepano/obsidian-minimal">Minimal</a>: ä¸»é¢˜</li><li><a href="https://github.com/kepano/obsidian-minimal-settings">Minimal Theme Settings</a>: ä¿®æ”¹ä¸»é¢˜é¢œè‰²</li><li><a href="https://github.com/kepano/obsidian-hider">Hider</a>: éšè—å·¥å…·æ </li><li><a href="https://github.com/davisriedel/obsidian-typewriter-mode">Typewriter Mode</a>: æ‰“å­—æœºæ¨¡å¼</li><li><a href="https://github.com/wakatime/obsidian-wakatime">Wakatime</a>: è®°å½•æ—¶é—´</li><li><a href="https://excalidraw.com/">Excalidraw</a>: ç”»å›¾</li></ul><h2 id="Chrome-æ’ä»¶"><a href="#Chrome-æ’ä»¶" class="headerlink" title="Chrome æ’ä»¶"></a>Chrome æ’ä»¶</h2><ul><li><a href="https://feeder.co/">RSS Feed Reader</a>: RSS è®¢é˜…</li><li><a href="https://github.com/gdh1995/vimium-c">Vimium C</a>: Vim æ¨¡æ‹Ÿ</li><li><a href="https://www.wappalyzer.com/">Wappalyzer</a>: web é¡µé¢æŠ€æœ¯è¯†åˆ«</li><li><a href="https://www.tampermonkey.net/">Tampermonkey</a>: è„šæœ¬è¿è¡Œå·¥å…·</li><li><a href="https://chromewebstore.google.com/detail/zlibrary-searcher">ZLibrary Searcher</a>: ç”µå­ä¹¦</li></ul>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>categories</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
